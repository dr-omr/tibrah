<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ุฏ. ุนูุฑ ุงูุนูุงุฏ - ุฑุญูุชู ูุญู ุงูุดูุงุก ุจุงูุทุจ ุงูุดูููู ูุงููุธููู. ุฃุฏูุงุช ุฐููุฉุ ุฌูุณุงุช ุนูุงุฌูุฉุ ูููุชุฌุงุช ุทุจูุนูุฉ.">
    <meta name="keywords" content="ุทุจ ุดูููู, ุทุจ ูุธููู, ุนูุงุฌ ุนู ุจุนุฏ, ููุชุฌุงุช ุทุจูุนูุฉ, ุดูุงุก, ุฏูุชูุฑ ุนูุฑ ุงูุนูุงุฏ, ุทูุจุฑุง, ุนุฌูุฉ ุงูุญูุงุฉ, ุชูููู ุตุญู, DMSO, ุชุฑุฏุฏุงุช ุดูุงุฆูุฉ, ุชุดุฎูุต ุฐูู, ุฎุทุฉ ุนูุงุฌูุฉ, ุชุญููู ุงูุฏู, ุฎุฑูุทุฉ ุงูุฌุณู, ูููุฑุฉ ุงูุฃุนุฑุงุถ, ุชุฑุฏุฏ ุงููููุฉ ุงูููุงุฒูุฉ, ุตูุงุญ ุงูุฑุงุดุฏ, ุงุฎุชุจุงุฑ ููุดูุฑ ููุฃููุงู, ุงูุทุจ ุงูุดุนูุฑู, ุงุญูุฏ ุงูุฏููุงูู">
    <title>ุฏ. ุนูุฑ ุงูุนูุงุฏ | ุฎุจูุฑ ุงูุทุจ ุงูุดูููู ูุงููุธููู</title>

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Kufi+Arabic:wght@300;400;700&family=Great+Vibes&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Scripts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>


    <style>
        /* --- GLOBAL DESIGN SYSTEM & VARIABLES (REFINED) --- */
        :root {
            --primary-color: #5a6e5a; /* Muted Sage Green */
            --primary-dark: #435243;  /* Darker Sage */
            --secondary-color: #f6f3ef; /* Warmer, richer off-white */
            --accent-color: #c8a07d;  /* Warm Tan */
            --accent-light: #e6d3c1; /* Lighter Tan */
            --accent-gold: #e0c4a4;   /* Soft Gold for highlights */
            --text-dark: #2f3d2f;    /* Desaturated Green-Black for text */
            --text-light: #faf8f5;   /* Softer light text */
        }
        
        /* --- GENERAL BODY & TYPOGRAPHY STYLES --- */
        body {
            font-family: 'Noto Kufi Arabic', sans-serif;
            background-color: var(--secondary-color);
            color: var(--text-dark);
            scroll-behavior: smooth;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Noto Kufi Arabic', sans-serif;
            font-weight: 700;
            color: var(--primary-dark);
        }
        .font-brand {
            font-family: 'Great Vibes', cursive;
        }

        /* --- ADVANCED ANIMATIONS & EFFECTS --- */
        @keyframes subtle-pan {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes ripple-effect { to { transform: scale(4); opacity: 0; } }
        @keyframes glow {
            0% { box-shadow: 0 0 5px var(--accent-gold); }
            50% { box-shadow: 0 0 20px var(--accent-gold); }
            100% { box-shadow: 0 0 5px var(--accent-gold); }
        }
        @keyframes pulse-loader {
          0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(90, 110, 90, 0.7); }
          70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(90, 110, 90, 0); }
          100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(90, 110, 90, 0); }
        }

        /* --- HERO SECTION STYLES --- */
        .hero-bg { animation: subtle-pan 25s ease-in-out infinite; }
        .hero-gradient { background: linear-gradient(to top, rgba(0,0,0,0.7), rgba(0,0,0,0.2)); }

        /* --- ENHANCED BUTTON STYLES --- */
        .btn { position: relative; overflow: hidden; transition: all 0.3s ease; transform-style: preserve-3d; }
        .btn-primary { background-color: var(--primary-color); color: var(--text-light); }
        .btn-primary:hover { background-color: var(--primary-dark); transform: translateY(-4px); box-shadow: 0 8px 15px rgba(0,0,0,0.2); }
        .btn-secondary { background-color: transparent; color: var(--primary-color); border: 2px solid var(--primary-color); }
        .btn-secondary:hover { background-color: var(--primary-color); color: var(--text-light); transform: translateY(-4px); box-shadow: 0 8px 15px rgba(90, 110, 90, 0.2); }
        .btn-glow { animation: glow 3s infinite ease-in-out; }
        .ripple { position: absolute; border-radius: 50%; transform: scale(0); animation: ripple-effect 0.6s linear; background-color: rgba(255, 255, 255, 0.5); }
        
        /* --- INTERACTIVE DASHBOARD CARD --- */
        .dashboard-card { cursor: pointer; transition: transform 0.4s ease, box-shadow 0.4s ease; transform-style: preserve-3d; background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }

        /* --- SECTION STYLES --- */
        .section-title::after { content: ''; display: block; width: 60px; height: 3px; background-color: var(--accent-color); margin: 1rem auto 0; transition: width 0.5s ease; }
        .section-title:hover::after { width: 100px; }
        
        /* --- WHATSAPP & MODAL --- */
        .whatsapp-float { position: fixed; width: 60px; height: 60px; bottom: 40px; left: 40px; background-color: #25d366; color: #FFF; border-radius: 50px; text-align: center; font-size: 30px; box-shadow: 2px 2px 10px rgba(0,0,0,0.2); z-index: 100; transition: transform 0.3s ease; display: flex; align-items: center; justify-content: center; }
        .whatsapp-float:hover { transform: scale(1.1) rotate(10deg); }
        #tool-modal, #quiz-modal { transition: opacity 0.3s ease, backdrop-filter 0.3s ease; backdrop-filter: blur(0px); }
        #tool-modal.is-open, #quiz-modal.is-open { opacity: 1; backdrop-filter: blur(8px); }

        /* --- FADE-IN ANIMATION --- */
        .fade-in-up { opacity: 0; transform: translateY(40px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .fade-in-up.is-visible { opacity: 1; transform: translateY(0); }
        
        /* --- AI LOADER --- */
        .ai-loader { text-align: center; }
        .ai-loader .ai-loader-dots { display: inline-block; position: relative; width: 80px; height: 10px; }
        .ai-loader .ai-loader-dots div { position: absolute; top: 0; width: 13px; height: 13px; border-radius: 50%; background-color: var(--primary-color); animation: pulse-loader 1.4s infinite ease-in-out both; }
        .ai-loader .ai-loader-dots .dot1 { left: 8px; animation-delay: -0.32s; }
        .ai-loader .ai-loader-dots .dot2 { left: 32px; animation-delay: -0.16s; }
        .ai-loader .ai-loader-dots .dot3 { left: 56px; }

        /* --- FREQUENCY GENERATOR STYLES (REFINED) --- */
        #frequency-canvas { background: linear-gradient(135deg, #121212 0%, #2f3d2f 100%); border-radius: 8px; box-shadow: inset 0 0 15px rgba(0,0,0,0.6); }
        .freq-btn.active, .music-btn.active { background-color: var(--accent-color); color: white; transform: scale(1.05); box-shadow: 0 0 15px var(--accent-color); border-color: var(--accent-color); }
        .freq-description { font-size: 0.8rem; color: #777; margin-top: 4px; }
        .freq-btn, .music-btn { display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }


        /* --- SINGLE POST STYLES --- */
        #view-single-post .post-content h2 { font-size: 1.75rem; font-weight: bold; margin-top: 2rem; margin-bottom: 1rem; color: var(--primary-dark); }
        #view-single-post .post-content p { font-size: 1.1rem; line-height: 1.8; margin-bottom: 1.5rem; }
        #view-single-post .post-content ul { list-style-type: disc; margin-right: 2rem; margin-bottom: 1.5rem; }
        #view-single-post .post-content li { margin-bottom: 0.5rem; }

        /* --- WHEEL OF LIFE --- */
        #wheel-of-life-result { transition: opacity 0.5s ease-in-out; }
        #wheel-of-life-result-container .range-slider {
            -webkit-appearance: none; appearance: none;
            width: 100%; height: 8px; border-radius: 4px;
            background: var(--accent-light); outline: none; transition: background 0.3s;
        }
        #wheel-of-life-result-container .range-slider::-webkit-slider-thumb {
             -webkit-appearance: none; appearance: none; width: 20px; height: 20px;
             border-radius: 50%; background: var(--primary-color); cursor: pointer; transition: transform 0.2s;
        }
        #wheel-of-life-result-container .range-slider:hover { background: var(--accent-gold); }
        #wheel-of-life-result-container .range-slider::-webkit-slider-thumb:hover { transform: scale(1.2); }


        /* --- AUDIO PLAYER --- */
        .audio-player { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); border-radius: 15px; padding: 20px; box-shadow: 0 8px 32px 0 rgba(0,0,0,0.1); }
        #audio-progress-bar { -webkit-appearance: none; appearance: none; width: 100%; height: 8px; border-radius: 4px; background: var(--accent-light); outline: none; transition: opacity .2s; }
        #audio-progress-bar::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 18px; height: 18px; border-radius: 50%; background: var(--primary-color); cursor: pointer; }
        
        /* --- BODY MAP (SVG UPGRADE) --- */
        #body-map-svg .organ-path {
            fill: rgba(90, 110, 90, 0.1); /* Lighter base fill */
            stroke: var(--primary-dark);
            stroke-width: 1;
            transition: fill 0.3s ease, transform 0.2s ease;
            cursor: pointer;
        }
        #body-map-svg .organ-path:hover {
            fill: rgba(200, 160, 125, 0.7); /* Accent color on hover */
            transform: scale(1.02);
            stroke-width: 1.5;
        }
        #body-map-svg .organ-path.selected {
            fill: var(--accent-color);
            stroke: var(--primary-dark);
            stroke-width: 2;
        }

        #body-map-info {
             transition: opacity 0.5s ease, transform 0.5s ease;
             max-height: 500px;
             overflow-y: auto;
        }

        /* --- JOURNAL (NEW) --- */
        #journal-form label {
            text-align: right;
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        .journal-entry {
            border-right: 4px solid var(--accent-light);
        }

        /* --- LUSCHER QUIZ STYLES --- */
        .color-swatch-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .color-swatch {
            width: 100%;
            height: 60px;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, opacity 0.3s;
            border: 3px solid transparent;
            position: relative;
        }
        .color-swatch:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .color-swatch.selected {
            opacity: 0.3;
            cursor: not-allowed;
            transform: scale(0.9);
        }
        .color-swatch.selected::after {
            content: attr(data-order);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            text-shadow: 0 0 5px black;
        }
        
        /* --- FAQ Section --- */
        .faq-section {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }
        .faq-section details {
            border-bottom: 1px solid var(--accent-light);
            padding: 1.5rem;
        }
        .faq-section details:last-child {
            border-bottom: none;
        }
        .faq-section summary {
            font-weight: 700;
            color: var(--primary-dark);
            cursor: pointer;
            list-style: none; /* Hide default arrow */
            position: relative;
            padding-left: 2rem;
        }
        .faq-section summary::-webkit-details-marker {
            display: none; /* Hide default arrow for Chrome/Safari */
        }
        .faq-section summary::before {
            content: '+';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: var(--primary-color);
            transition: transform 0.3s ease;
        }
        .faq-section details[open] summary::before {
            transform: translateY(-50%) rotate(45deg);
        }
        .faq-section details[open] p {
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-secondary-color text-text-dark">

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-sm shadow-lg sticky top-0 z-50 transition-shadow duration-300">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="#" class="font-brand text-5xl text-primary-dark nav-link" data-view="hero" style="text-shadow: 1px 1px 3px rgba(0,0,0,0.2);">
                ุฏ. ุนูุฑ ุงูุนูุงุฏ
            </a>
            <div class="hidden md:flex items-center space-x-reverse space-x-6">
                <a href="#" class="nav-link hover:text-[--primary-color] transition-colors duration-300" data-view="about">ุนูู</a>
                <a href="#" class="nav-link hover:text-[--primary-color] transition-colors duration-300" data-view="dashboard">ุงูุฎุฏูุงุช ุงูุชูุงุนููุฉ</a>
                <a href="#" class="nav-link hover:text-[--primary-color] transition-colors duration-300" data-view="services">ุงูุฌูุณุงุช</a>
                <a href="#" class="nav-link hover:text-[--primary-color] transition-colors duration-300" data-view="store">ุงููุชุฌุฑ</a>
                <a href="#" class="nav-link hover:text-[--primary-color] transition-colors duration-300" data-view="blog">ุงููุฏููุฉ</a>
                 <!-- Login/Profile Link -->
                 <div id="auth-section" class="flex items-center">
                     <button id="login-btn" class="font-bold text-[--primary-color] hover:underline">ุชุณุฌูู ุงูุฏุฎูู</button>
                     <div id="profile-section-nav" class="hidden items-center">
                         <a href="#" class="nav-link font-bold text-[--primary-color] hover:underline ml-4" data-view="premium-content">ููู ุงููุฑูุถ</a>
                         <img id="user-avatar" class="w-8 h-8 rounded-full" alt="ุตูุฑุฉ ุงููุณุชุฎุฏู" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM1YTZlNWEiLz4KPHRleHQgeD0iNTAlIiB5PSI1MCUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjIwIiBmaWxsPSJ3aGl0ZSI+VTwvdGV4dD4KPC9zdmc+Cg=='">
                     </div>
                 </div>
            </div>
            <a href="#contact" class="hidden md:block btn btn-primary text-white py-2 px-6 rounded-full">ุงุญุฌุฒ ุฌูุณุชู</a>
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="md:hidden">
                <i class="fas fa-bars text-2xl"></i>
            </button>
        </nav>
         <!-- Mobile Menu -->
         <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
             <a href="#" class="nav-link block py-2 hover:text-[--primary-color]" data-view="about">ุนูู</a>
             <a href="#" class="nav-link block py-2 hover:text-[--primary-color]" data-view="dashboard">ุงูุฎุฏูุงุช ุงูุชูุงุนููุฉ</a>
             <a href="#" class="nav-link block py-2 hover:text-[--primary-color]" data-view="services">ุงูุฌูุณุงุช</a>
             <a href="#" class="nav-link block py-2 hover:text-[--primary-color]" data-view="store">ุงููุชุฌุฑ</a>
             <a href="#" class="nav-link block py-2 hover:text-[--primary-color]" data-view="blog">ุงููุฏููุฉ</a>
             <a href="#contact" class="block py-2 hover:text-[--primary-color]">ุชูุงุตู ูุนู</a>
             <hr class="my-2">
             <div id="auth-section-mobile">
                 <button id="login-btn-mobile" class="w-full text-right py-2 font-bold text-[--primary-color]">ุชุณุฌูู ุงูุฏุฎูู</button>
                 <a href="#" id="profile-link-mobile" class="nav-link hidden w-full text-right py-2 font-bold text-[--primary-color]" data-view="premium-content">ููู ุงููุฑูุถ</a>
             </div>
         </div>
    </header>

    <main id="main-content">
        <!-- Hero Section -->
        <section id="view-hero" class="page-view relative h-screen flex items-center justify-center text-white text-center">
            <div class="absolute inset-0 bg-cover" style="background-image: url('assets/images/omar.jpg'); background-position: center 80%;"></div>
            <div class="absolute inset-0 hero-gradient"></div>
            <div class="relative z-10 p-6 fade-in-up">
                <h1 class="font-brand text-6xl md:text-8xl mb-4 text-accent-gold" style="text-shadow: 2px 2px 5px rgba(0,0,0,0.5);">แนฌibraSoul</h1>
                <h2 class="text-4xl md:text-6xl font-bold mb-2">ุฏ. ุนูุฑ ุงูุนูุงุฏ</h2>
                <p class="text-lg md:text-xl max-w-3xl mx-auto">ุฑุญูุชู ูุญู ุงูุดูุงุก ุงููุชูุงูู ุชุจุฏุฃ ููุง</p>
                <a href="#" class="nav-link mt-8 inline-block btn bg-white text-[--primary-color] font-bold py-3 px-8 rounded-full text-lg btn-glow" data-view="dashboard">ุงูุชุดู ุฎุฏูุงุชูุง</a>
            </div>
        </section>

        <!-- Home Services Section -->
        <section id="featured-services" class="page-view py-16 bg-white dark:bg-gray-900 hidden">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 section-title">ุฎุฏูุงุชูุง ุงููููุฒุฉ</h2>
                <div class="grid gap-8 sm:grid-cols-2 md:grid-cols-3">
                    <!-- Card: Tebra Protocols -->
                    <a href="#" class="group dashboard-card block p-8 rounded-xl shadow-lg text-center smart-tool-btn" data-tool="protocols">
                        <div class="text-5xl text-[--primary-color] mb-4 group-hover:text-[--accent-color] transition-colors"><i class="fa-solid fa-vials"></i></div>
                        <h3 class="text-2xl font-bold mb-3">๐งช ุจุฑูุชููููุงุช ุทูุจุฑุง ุงูุนูุงุฌูุฉ</h3>
                        <p class="text-gray-600 dark:text-gray-300">ุงูุชุดู ุงูุจุฑูุชููููุงุช ุงูุนูุงุฌูุฉ ุงููุชูุงููุฉ ุงููุตููุฉ ููุฑุงููุฉ ุฑุญูุฉ ุงูุดูุงุก ุงูุฌุฐุฑู.</p>
                    </a>
                    <!-- Card: Consultation Sessions -->
                    <a href="#" class="nav-link group dashboard-card block p-8 rounded-xl shadow-lg text-center" data-view="services">
                        <div class="text-5xl text-[--primary-color] mb-4 group-hover:text-[--accent-color] transition-colors"><i class="fas fa-user-doctor"></i></div>
                        <h3 class="text-2xl font-bold mb-3">๐จโโ๏ธ ุงูุฌูุณุงุช ุงูุงุณุชุดุงุฑูุฉ</h3>
                        <p class="text-gray-600 dark:text-gray-300">ุงุญุฌุฒ ุฌูุณุฉ ุงุณุชุดุงุฑูุฉ ุดุงููุฉ ุฃู ุฌูุณุฉ ูุชุงุจุนุฉ ูุนู ูุจุงุดุฑุฉ.</p>
                    </a>
                    <!-- Card: Healing Store -->
                    <a href="#" class="nav-link group dashboard-card block p-8 rounded-xl shadow-lg text-center" data-view="store">
                        <div class="text-5xl text-[--primary-color] mb-4 group-hover:text-[--accent-color] transition-colors"><i class="fas fa-store"></i></div>
                        <h3 class="text-2xl font-bold mb-3">๐ ุงููุชุฌุฑ ุงูุนูุงุฌู</h3>
                        <p class="text-gray-600 dark:text-gray-300">ุชุตูุญ ุงูููููุงุช ุงูุบุฐุงุฆูุฉ ูุงูููุชุฌุงุช ุงูุทุจูุนูุฉ ุงูุชู ุฃูุตู ุจูุง.</p>
                    </a>
                </div>
            </div>
        </section>

        <!-- Interactive Dashboard Section -->
        <section id="view-dashboard" class="page-view py-20 bg-gray-50 hidden">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-4xl font-bold mb-4 section-title">ููุญุฉ ุงูุชุญูู ุงูุชูุงุนููุฉ</h2>
                <p class="max-w-3xl mx-auto mb-12">ุงุฎุชุฑ ุงูุฃุฏุงุฉ ุฃู ุงูุฎุฏูุฉ ุงูุชู ุชูุงุณุจ ุงุญุชูุงุฌู ุงูุญุงูู ูุงุจุฏุฃ ุฑุญูุฉ ุงูุดูุงุก.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Card 1: AI Tools -->
                    <div class="p-8 rounded-xl shadow-lg dashboard-card text-center md:col-span-2">
                        <div class="text-5xl text-[--primary-color] mb-4"><i class="fas fa-magic-wand-sparkles"></i></div>
                        <h3 class="text-2xl font-bold mb-3">ุงูุฃุฏูุงุช ุงูุฐููุฉ</h3>
                        <p class="text-gray-600 mb-6">ุงุณุชุฎุฏู ุฃุฏูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ููุชุดุฎูุตุ ุฅูุดุงุก ุงูุฎุทุท ุงูุนูุงุฌูุฉุ ุงูุญุตูู ุนูู ุชูุตูุงุชุ ูุงููุฒูุฏ.</p>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3">
                           <button class="smart-tool-btn btn btn-secondary w-full py-2 rounded-full" data-tool="blood-test-decoder">ูู ุดูุฑุฉ ุงูุชุญุงููู</button>
                           <button class="smart-tool-btn btn btn-secondary w-full py-2 rounded-full" data-tool="diagnosis">ุงูุชุดุฎูุต</button>
                           <button class="smart-tool-btn btn btn-secondary w-full py-2 rounded-full" data-tool="treatment-plan">ุฎุทุฉ ุนูุงุฌูุฉ</button>
                           <button class="smart-tool-btn btn btn-secondary w-full py-2 rounded-full" data-tool="supplements">ุชูุตูุฉ ููููุงุช</button>
                           <button class="smart-tool-btn btn btn-secondary w-full py-2 rounded-full" data-tool="awareness-exercise">ุชูุฑูู ูุนู</button>
                           <button class="smart-tool-btn btn btn-secondary w-full py-2 rounded-full" data-tool="consultation">ุงุณุชุดุงุฑุฉ ุขููุฉ</button>
                           <button class="smart-tool-btn btn btn-secondary w-full py-2 rounded-full" data-tool="intention">ููุฉ ุงูููู</button>
                           
                        </div>
                    </div>

                    <!-- Card 2: Wheel of Life -->
                    <a href="#" class="nav-link group dashboard-card block p-8 rounded-xl shadow-lg text-center" data-view="wheel-of-life">
                        <div class="text-5xl text-[--primary-color] mb-4 group-hover:text-[--accent-color] transition-colors"><i class="fa-solid fa-dharmachakra"></i></div>
                        <h3 class="text-2xl font-bold mb-3">ุนุฌูุฉ ุงูุนุงููุฉ</h3>
                        <p class="text-gray-600">ูููู ุฌูุงูุจ ุญูุงุชู ุงููุฎุชููุฉ ูุงุญุตู ุนูู ุฑุคู ููุฑูุฉ ูุชุญููู ุงูุชูุงุฒู.</p>
                    </a>
                    
                    <!-- NEW Card: Body Map -->
                    <a href="#" class="nav-link group dashboard-card block p-8 rounded-xl shadow-lg text-center" data-view="body-map">
                        <div class="text-5xl text-[--primary-color] mb-4 group-hover:text-[--accent-color] transition-colors"><i class="fa-solid fa-person-chalkboard"></i></div>
                        <h3 class="text-2xl font-bold mb-3">ุฎุฑูุทุฉ ุงูุฌุณุฏ ุงูุดุนูุฑู</h3>
                        <p class="text-gray-600">ุงุณุชูุดู ุฃุนุถุงุก ุฌุณุฏู ูุงููู ุฑุณุงุฆููุง ูู ููุธูุฑ ุงูุทุจ ุงูุดุนูุฑู.</p>
                    </a>

                    <!-- NEW Card: Symptom Journal -->
                    <a href="#" class="nav-link group dashboard-card block p-8 rounded-xl shadow-lg text-center" data-view="journal">
                        <div class="text-5xl text-[--primary-color] mb-4 group-hover:text-[--accent-color] transition-colors"><i class="fa-solid fa-book-medical"></i></div>
                        <h3 class="text-2xl font-bold mb-3">ูููุฑุฉ ุงูุฃุนุฑุงุถ ูุงููุฒุงุฌ</h3>
                        <p class="text-gray-600">ุชุชุจุน ุตุญุชู ุงูููููุฉ ูุงูุชุดู ุงูุฃููุงุท ุงูุฎููุฉ (ูููุณุฌููู ููุท).</p>
                    </a>

                    <!-- NEW Card: Quizzes -->
                    <a href="#" class="nav-link group dashboard-card block p-8 rounded-xl shadow-lg text-center" data-view="quizzes">
                        <div class="text-5xl text-[--primary-color] mb-4 group-hover:text-[--accent-color] transition-colors"><i class="fa-solid fa-clipboard-question"></i></div>
                        <h3 class="text-2xl font-bold mb-3">ุงูุชููููุงุช ุงูุตุญูุฉ</h3>
                        <p class="text-gray-600">ุฃุฌุจ ุนู ุงุณุชุจูุงูุงุช ุฏูููุฉ ูุชูููู ุฌูุงูุจ ูุญุฏุฏุฉ ูู ุตุญุชู.</p>
                    </a>

<!-- cards moved -->




                    </a>
<!-- Original Cards (some moved) -->




                    </a>
                    <a href="#" class="nav-link group dashboard-card block p-8 rounded-xl shadow-lg text-center" data-view="frequencies">
                        <div class="text-5xl text-[--primary-color] mb-4 group-hover:text-[--accent-color] transition-colors"><i class="fas fa-wave-square"></i></div>
                        <h3 class="text-2xl font-bold mb-3">ุงูุชุฑุฏุฏุงุช ุงูุดูุงุฆูุฉ</h3>
                        <p class="text-gray-600">ุงุณุชูุน ุฅูู ุชุฑุฏุฏุงุช ุงูุณููููุฌูู ูุชุฑุฏุฏุงุช ุงููููุฉ ุงูููุงุฒูุฉ.</p>
                    </a>




                    </a>
                    <a href="#" class="nav-link group dashboard-card block p-8 rounded-xl shadow-lg text-center" data-view="blog">
                        <div class="text-5xl text-[--primary-color] mb-4 group-hover:text-[--accent-color] transition-colors"><i class="fas fa-book-open"></i></div>
                        <h3 class="text-2xl font-bold mb-3">ุงูููุงูุงุช ูุงููุนุฑูุฉ</h3>
                        <p class="text-gray-600">ุงูุฑุฃ ุฃุญุฏุซ ุงูููุงูุงุช ูุงูุฑุคู ุญูู ุงูุทุจ ุงูุดูููู.</p>
                    </a>
                    <a href="#" class="nav-link group dashboard-card block p-8 rounded-xl shadow-lg text-center" data-view="premium-content">
                        <div class="text-5xl text-[--primary-color] mb-4 group-hover:text-[--accent-color] transition-colors"><i class="fas fa-folder-user"></i></div>
                        <h3 class="text-2xl font-bold mb-3">ููู ุงููุฑูุถ</h3>
                        <p class="text-gray-600">ุงุฏุฎู ุฅูู ูุณุงุญุชู ุงูุฎุงุตุฉ ููุฑุงุฌุนุฉ ูุชุงุฆุฌู ุงููุญููุธุฉ.</p>
                    </a>
                </div>
            </div>
        </section>
        
        <!-- Wheel of Life Section -->
        <section id="view-wheel-of-life" class="page-view py-20 bg-white hidden">
             <div class="container mx-auto px-6">
                 <div class="text-right mb-12">
                     <button class="nav-link font-bold text-[--primary-color] hover:text-[--accent-color] transition-colors" data-view="dashboard">
                         <i class="fas fa-arrow-right-long ml-2"></i>
                         ุงูุฑุฌูุน ุฅูู ููุญุฉ ุงูุชุญูู
                     </button>
                 </div>
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold mb-4 section-title">ุนุฌูุฉ ุงูุนุงููุฉ ุงูุดููููุฉ</h2>
                    <p class="max-w-3xl mx-auto text-lg">ูููู ูุณุชูู ุฑุถุงู ูู ุงูุฌูุงูุจ ุงูุฃุณุงุณูุฉ ูุญูุงุชู. ุญุฑู ุงููุคุดุฑุงุช ูุชุนูุณ ูุถุนู ุงูุญุงููุ ุซู ุงุญุตู ุนูู ุฑุคู ููุฑูุฉ ููุณุงุนุฏุชู ุนูู ุชุญุฏูุฏ ููุงุท ุงูุชุฑููุฒ ูู ุฑุญูุชู ูุญู ุงูุชูุงุฒู.</p>
                </div>

                <div id="wheel-of-life-result-container" class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                    <!-- Chart Canvas -->
                    <div class="w-full max-w-lg mx-auto fade-in-up">
                        <canvas id="wheel-of-life-chart"></canvas>
                    </div>
                    <!-- Sliders -->
                    <div id="wheel-of-life-sliders" class="space-y-4 fade-in-up" style="animation-delay: 0.2s;">
                        <!-- Sliders will be dynamically generated here -->
                    </div>
                </div>

                <!-- Result Section -->
                <div class="mt-12 text-center">
                     <button id="get-wheel-insight-btn" class="btn btn-primary text-white py-3 px-8 text-lg rounded-full">ุงูุดู ุนู ุฑุคูุชู ุงูุดุฎุตูุฉ</button>
                     <div id="wheel-of-life-result" class="mt-6 p-6 bg-green-50 border-r-4 border-primary-color rounded-lg max-w-4xl mx-auto opacity-0 hidden">
                         <!-- AI Insight will be injected here -->
                     </div>
                </div>
            </div>
        </section>

        <!-- About Me Section -->
        <section id="view-about" class="page-view py-20 bg-white hidden">
             <div class="container mx-auto px-6">
                 <div class="text-right mb-12">
                     <button class="nav-link font-bold text-[--primary-color] hover:text-[--accent-color] transition-colors" data-view="dashboard">
                         <i class="fas fa-arrow-right-long ml-2"></i>
                         ุงูุฑุฌูุน ุฅูู ููุญุฉ ุงูุชุญูู
                     </button>
                 </div>
                <div class="md:flex items-center gap-12">
                    <div class="md:w-1/3 text-center fade-in-up">
                        <img src="assets/images/omar.jpg" alt="ุตูุฑุฉ ุฏ. ุนูุฑ ุงูุนูุงุฏ" class="rounded-full shadow-2xl mx-auto w-64 h-64 md:w-80 md:h-80 object-cover border-4 border-white">
                    </div>
                    <div class="md:w-2/3 mt-8 md:mt-0 fade-in-up">
                        <h2 class="text-4xl font-bold mb-4 section-title text-right">ุนู ุฏ. ุนูุฑ ุงูุนูุงุฏ</h2>
                        <p class="mb-4">๐ฟ ูุงุฐุง ูู ูู ููู ูุฑุถู ูุฌุฑูุฏ ุนุฑูุถโฆ ุจู ูุฏุงุก ุฏุงุฎูู ููุนูุฏุฉ ุฅูู ุฐุงุชูุ</p>

                        <p class="mb-4">ุฃูุง ุฏ. ุนูุฑุ ุทุจูุจู ุนุงูุ ูุจุงุญุซู ูู ุนููู ุงูุดูุงุก ุงูุฌุณุฏูโุงูุฑูุญู.<br>ูุง ุฃูุฏูู ูู ุฏูุงุกู ููุทโฆ ุจู ูููุฌูุง ูุนูุฏู ุฅูู ูุทุฑุชู.<br>ุฃุณูุณุช <strong>แนฌibra | ุทูุจุฑุง โ ุทุจ ูุนูุฏู ุฅููู</strong> ูุฃุฏูุฌ ููู ุจูู ุงูุทุจ ุงูุญุฏูุซุ ูุงูุญููุฉ ุงูุชู ุญูููุง ุงูุฃูุจูุงุกุ ูุงูุตูุช ุงูุฐู ููุงุฏูู ูู ุฏุงุฎูู ููุฐ ุฒูู.</p>

                        <h3 class="text-2xl font-semibold text-[--primary-color] mb-2">๐ ูุงุฐุง ุฃูุนูุ</h3>
                        <ul class="list-disc pr-6 mb-4 text-right">
                            <li>ููู ุฌุฐุฑ ูุฑุถูุ ูุง ููุท ุฅููุงู ุฃุนุฑุงุถู</li>
                            <li>ุงุณุชุฎุฏุงู ุงูุชุญุงููู ูุงูููููุงุช ุจุทุฑููุฉ ูุงุนูุฉ ููุนูุงูุฉ</li>
                            <li>ุงูุชุญุฑุฑ ูู ุฃููุงุท ููุณูุฉ ูุฌุณุฏูุฉ ุชุฑุจู ุทุงูุชู</li>
                            <li>ุจูุงุก ุจุฑูุงูุฌ ุดูุงุก ูุชูุงูู: ุทุจ ุญุฏูุซ ร ุนูุงุฌ ุทุงูู ร ุบุฐุงุก ูุธููู ร ุชูุฑููุงุช ุดูุงุก ุฐุงุชู</li>
                        </ul>

                        <h3 class="text-2xl font-semibold text-[--primary-color] mb-2">๐ฏ ููู ุฃุนููุ</h3>
                        <ul class="list-disc pr-6 mb-4 text-right">
                            <li>ููู ุฌุฑูุจ ูู ุดูุกโฆ ููุงุฒุงู ูุนุงูู ูู ูุฑุถู ุงููุฒูู</li>
                            <li>ููู ูุคูู ุฃู ุงูุฌุณุฏ ูุง ูุฎุทุฆุ ุจู ูุชุญุฏุซ</li>
                            <li>ููู ูุฑูุฏ ุฃู ูุชุญุฑูุฑ ูู ุงูุชูุฑุงุฑุ ููุจุฏุฃ ูุณุงุฑูุง ุญูููููุง ูุญู ุงูุดูุงุก</li>
                        </ul>

                        <h3 class="text-2xl font-semibold text-[--primary-color] mb-2">๐ ููุงุฐุง ุทูุจุฑุงุ</h3>
                        <ul class="list-disc pr-6 mb-4 text-right">
                            <li>ูุฃูู ุงูุทุจ ููุณ ูุตูุฉโฆ ุจู ูุนู ุฃูุถูุง.</li>
                            <li>ูุฃูู ุงููุฑุถ ููุณ ุนุฏููุงโฆ ุจู ุฑุณุงูุฉ.</li>
                            <li>ููุฃูู ุชุณุชุญู ุฃู ุชูุนุงูู ูุฅูุณุงูู ุญูู ูุงุนูุ ูุง ุฑูู ูู ููู.</li>
                        </ul>

                        <h3 class="text-2xl font-semibold text-[--primary-color] mb-2">๐งฌ ูู ูู ุฏ. ุนูุฑุ</h3>
                        <ul class="list-disc pr-6 mb-4 text-right">
                            <li>ุทุจูุจ ุนุงู</li>
                            <li>ุจุงุญุซ ูู ุงูุดูุงุก ุงููุธูููโุงูุทุงูู</li>
                            <li>ูุคุณุณ ูููุฌ แนฌibra</li>
                            <li>ุฃุนูู ุนูู ุชุทููุฑ ุฃุฏูุงุช ุฐููุฉ ุชุดุฎูุต ูุชุฑุงูู ุฑุญูุฉ ุงููุฑูุถุ ูุง ุชุชุญูู ููู</li>
                        </ul>

                        <h3 class="text-2xl font-semibold text-[--primary-color] mb-2">๐ ููู ุชุจุฏุฃุ</h3>
                        <p class="mb-4">ุงุญุฌุฒ ุงุณุชุดุงุฑุฉ ุฃููู ูุชูููู ูุถุนู ุงูุฌุณุฏู ูุงูููุณูุ ูุจูุงุก ุฎุทุฉ ุดูุงุก ูุฎุตุตุฉ.<br>
                        ุฃู ุชุนุฑูู ุนูู <a href="#" class="nav-link text-[--accent-color] underline" data-view="dashboard">ุฃุฏูุงุช โุทูุจุฑุงโ ุนุจุฑ ุงููููุน</a>.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Services Section -->
        <section id="view-services" class="page-view py-20 hidden">
             <div class="container mx-auto px-6 text-center">
                 <div class="text-right mb-12">
                     <button class="nav-link font-bold text-[--primary-color] hover:text-[--accent-color] transition-colors" data-view="dashboard">
                         <i class="fas fa-arrow-right-long ml-2"></i>
                         ุงูุฑุฌูุน ุฅูู ููุญุฉ ุงูุชุญูู
                     </button>
                 </div>
                <h2 class="text-4xl font-bold mb-4 section-title">ุฌูุณุงุช ุงูุนูุงุฌ ุงูุดูููู</h2>
                <p class="max-w-2xl mx-auto mb-12">ุฌูุณุงุช ุดุฎุตูุฉ ุนู ุจุนุฏุ ูุตููุฉ ุฎุตูุตุงู ูุชูุจูุฉ ุงุญุชูุงุฌุงุชู ุงููุฑูุฏุฉ ููุณุงุนุฏุชู ุนูู ุชุญููู ุฃูุฏุงูู ุงูุตุญูุฉ.</p>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="bg-white p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 fade-in-up hover:-translate-y-2">
                        <div class="text-5xl text-[--accent-color] mb-4"><i class="fas fa-user-md"></i></div>
                        <h3 class="text-2xl font-bold mb-3">ุงุณุชุดุงุฑุฉ ุฃูููุฉ ุดุงููุฉ</h3>
                        <p class="mb-6">ุฌูุณุฉ ููุฏุฉ 90 ุฏูููุฉ ูุชูููู ุญุงูุชู ุงูุตุญูุฉ ุจุงููุงููุ ููุงูุดุฉ ุชุงุฑูุฎู ุงููุฑุถูุ ููุถุน ุฎุฑูุทุฉ ุทุฑูู ุนูุงุฌูุฉ ูุฎุตุตุฉ.</p>
                        <a href="https://wa.me/967771447111?text=ุฃุฑุบุจ%20ูู%20ุญุฌุฒ%20ุงุณุชุดุงุฑุฉ%20ุฃูููุฉ%20ุดุงููุฉ" target="_blank" class="btn btn-primary text-white py-2 px-6 rounded-full">ุงุญุฌุฒ ุงูุขู</a>
                    </div>
                    <div class="bg-white p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 fade-in-up hover:-translate-y-2" style="animation-delay: 0.2s;">
                        <div class="text-5xl text-[--accent-color] mb-4"><i class="fas fa-heartbeat"></i></div>
                        <h3 class="text-2xl font-bold mb-3">ุจุงูุฉ ุงููุชุงุจุนุฉ ุงูุตุญูุฉ</h3>
                        <p class="mb-6">3 ุฌูุณุงุช ูุชุงุจุนุฉ (45 ุฏูููุฉ ููู ุฌูุณุฉ) ููุฑุงูุจุฉ ุชูุฏููุ ุชุนุฏูู ุงูุฎุทุฉ ุงูุนูุงุฌูุฉุ ูุชูุฏูู ุงูุฏุนู ุงููุณุชูุฑ ูู.</p>
                         <a href="https://wa.me/967771447111?text=ุฃุฑุบุจ%20ูู%20ุงูุงุดุชุฑุงู%20ุจุจุงูุฉ%20ุงููุชุงุจุนุฉ%20ุงูุตุญูุฉ" target="_blank" class="btn btn-primary text-white py-2 px-6 rounded-full">ุงุดุชุฑู ุงูุขู</a>
                    </div>
                    <div class="bg-white p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 fade-in-up hover:-translate-y-2" style="animation-delay: 0.4s;">
                        <div class="text-5xl text-[--accent-color] mb-4"><i class="fas fa-leaf"></i></div>
                        <h3 class="text-2xl font-bold mb-3">ุงุณุชุดุงุฑุฉ ุงูุชุบุฐูุฉ ุงููุธูููุฉ</h3>
                        <p class="mb-6">ุฌูุณุฉ ูุฑูุฒุฉ ููุฏุฉ 60 ุฏูููุฉ ููุถุน ุฎุทุฉ ุชุบุฐูุฉ ุนูุงุฌูุฉ ูุฎุตุตุฉ ููุนุงูุฌุฉ ูุดุงูู ุตุญูุฉ ูุนููุฉ ูุซู ูุดุงูู ุงููุถู ุฃู ุงูุทุงูุฉ.</p>
                         <a href="https://wa.me/967771447111?text=ุฃุฑุบุจ%20ูู%20ุญุฌุฒ%20ุงุณุชุดุงุฑุฉ%20ุงูุชุบุฐูุฉ%20ุงููุธูููุฉ" target="_blank" class="btn btn-primary text-white py-2 px-6 rounded-full">ุงุญุฌุฒ ุงูุขู</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Store Section -->
        <section id="view-store" class="page-view py-20 bg-gray-50 hidden">
            <div class="container mx-auto px-6 text-center">
                 <div class="text-right mb-12">
                     <button class="nav-link font-bold text-[--primary-color] hover:text-[--accent-color] transition-colors" data-view="dashboard">
                         <i class="fas fa-arrow-right-long ml-2"></i>
                         ุงูุฑุฌูุน ุฅูู ููุญุฉ ุงูุชุญูู
                     </button>
                 </div>
                <h2 class="text-4xl font-bold mb-4 section-title">ูุชุฌุฑ ุงูููุชุฌุงุช ุงูุดุงููุฉ</h2>
                <p class="max-w-2xl mx-auto mb-12">ูุฌููุนุฉ ููุชูุงุฉ ุจุนูุงูุฉ ูู ุงูููุชุฌุงุช ุงูุทุจูุนูุฉ ูุงูุฃุฏููุฉ ุงููุธูููุฉ ุงูุชู ุฃุซู ุจูุง ูุฃูุตู ุจูุง ูุฏุนู ุฑุญูุชู ุงูุนูุงุฌูุฉ.</p>
                <div id="store-products-grid" class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="border bg-white border-gray-200 rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 fade-in-up hover:-translate-y-2">
                        <img src="assets/images/DMSO%20.webp" alt="DMSO ููุฌูุฏ" class="w-full h-56 object-cover">
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-2">DMSO ููุฌูุฏ</h3>
                            <p class="text-gray-600 mb-4">ูุฐูุจ ุทุจูุนู ููู ูุฏุนู ุงูุดูุงุก ูุชุฎููู ุงูุฃูู ุงูููุถุนู.</p>
                            <p class="text-2xl font-bold text-[--primary-color] mb-4">$45</p>
                            <a href="https://wa.me/967771447111?text=ุฃุฑุบุจ%20ูู%20ุดุฑุงุก%20DMSO%20ููุฌูุฏ" target="_blank" class="btn btn-secondary w-full block py-2 rounded-full">ุงุทูุจ ุนุจุฑ ูุงุชุณุงุจ</a>
                        </div>
                    </div>
                    <div class="border bg-white border-gray-200 rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 fade-in-up hover:-translate-y-2" style="animation-delay: 0.1s;">
                        <img src="assets/images/Vit%20D3%20+%20K2%20.webp" alt="ูููู ููุชุงููู D3 + K2" class="w-full h-56 object-cover">
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-2">ูููู ููุชุงููู ุฏ3 + ู2</h3>
                            <p class="text-gray-600 mb-4">ูุฏุนู ุตุญุฉ ุงูุนุธุงู ูุงูููุงุนุฉ.</p>
                            <p class="text-2xl font-bold text-[--primary-color] mb-4">$35</p>
                            <a href="https://wa.me/967771447111?text=ุฃุฑุบุจ%20ูู%20ุดุฑุงุก%20ูููู%20ููุชุงููู%20ุฏ3%20%2B%20ู2" target="_blank" class="btn btn-secondary w-full block py-2 rounded-full">ุงุทูุจ ุนุจุฑ ูุงุชุณุงุจ</a>
                        </div>
                    </div>
                    <div class="border bg-white border-gray-200 rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 fade-in-up hover:-translate-y-2" style="animation-delay: 0.2s;">
                        <img src="assets/images/magnesium-citrate-solaray-400-2.webp" alt="ุฒูุช ุงููุงุบููุณููู ุงูููู" class="w-full h-56 object-cover">
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-2">ุฒูุช ุงููุงุบูุณููู ุงูููู</h3>
                            <p class="text-gray-600 mb-4">ููุงุณุชุฑุฎุงุก ูุชุฎููู ุขูุงู ุงูุนุถูุงุช.</p>
                             <p class="text-2xl font-bold text-[--primary-color] mb-4">$25</p>
                            <a href="https://wa.me/967771447111?text=ุฃุฑุบุจ%20ูู%20ุดุฑุงุก%20ุฒูุช%20ุงููุงุบูุณููู%20ุงูููู" target="_blank" class="btn btn-secondary w-full block py-2 rounded-full">ุงุทูุจ ุนุจุฑ ูุงุชุณุงุจ</a>
                        </div>
                    </div>
                    <div class="border bg-white border-gray-200 rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 fade-in-up hover:-translate-y-2" style="animation-delay: 0.3s;">
                        <img src="assets/images/ุจูุชูุฑูุงุก%20ูุงูุนุฉ%20probiotic%20.png" alt="ุจุฑูุจููุชูู ุนุงูู ุงูุฌูุฏุฉ" class="w-full h-56 object-cover">
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-2">ุจุฑูุจููุชูู ุนุงูู ุงูุฌูุฏุฉ</h3>
                            <p class="text-gray-600 mb-4">ูุฏุนู ุตุญุฉ ุงูุฌูุงุฒ ุงููุถูู ูุงููููุฑูุจููู.</p>
                             <p class="text-2xl font-bold text-[--primary-color] mb-4">$50</p>
                            <a href="https://wa.me/967771447111?text=ุฃุฑุบุจ%20ูู%20ุดุฑุงุก%20ุจุฑูุจููุชูู%20ุนุงูู%20ุงูุฌูุฏุฉ" target="_blank" class="btn btn-secondary w-full block py-2 rounded-full">ุงุทูุจ ุนุจุฑ ูุงุชุณุงุจ</a>
                        </div>
                    </div>
                    <!-- NEW Product: Tibrah Ora โ ุจุงูุฌ ุตุญุฉ ุงููุซุฉ ูุงูุฃุณูุงู -->
                    <div class="border bg-white border-gray-200 rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 fade-in-up hover:-translate-y-2" style="animation-delay: 0.4s;">
                        <img src="assets/images/ุงุณุงุณู 2 ).png" alt="tibrah ora | ุจุงูุฌ ุตุญุฉ ุงููุซุฉ ูุงูุฃุณูุงู" class="w-full h-56 object-cover">
                        <div class="p-6 text-right">
                            <h3 class="text-xl font-bold mb-2">tibrah ora | ุจุงูุฌ ุตุญุฉ ุงููุซุฉ ูุงูุฃุณูุงู</h3>
                            <p class="text-gray-600 mb-4">ูุธุงู ูุชูุงูู ูุชูููุฉ ุงููู ูุฅูุนุงุด ุงูููุณ (ูุถูุถุฉ ุนูุงุฌูุฉ + ุจุฎุงุฎ ุนุดุจู).</p>
                            <p class="text-2xl font-bold text-[--primary-color] mb-4">3300 ุฑูุงู ูููู</p>
                            <a href="https://wa.me/967771447111?text=ุฃุฑุบุจ%20ูู%20ุดุฑุงุก%20ุจุงูุฌ%20Tibrah%20Ora" target="_blank" class="btn btn-secondary w-full block py-2 rounded-full">ุงุทูุจ ุนุจุฑ ูุงุชุณุงุจ</a>
                            <button class="btn btn-outline w-full mt-4 details-button" data-prod="tibrahOra">ูุตู ุงูููุชุฌ</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Frequency Generator Section -->
        <section id="view-frequencies" class="page-view py-20 bg-white hidden">
            <div class="container mx-auto px-6 text-center">
                 <div class="text-right mb-12">
                     <button class="nav-link font-bold text-[--primary-color] hover:text-[--accent-color] transition-colors" data-view="dashboard">
                         <i class="fas fa-arrow-right-long ml-2"></i>
                         ุงูุฑุฌูุน ุฅูู ููุญุฉ ุงูุชุญูู
                     </button>
                 </div>
                <h2 class="text-4xl font-bold mb-4 section-title">ูููุฏ ุงูุชุฑุฏุฏุงุช ุงูุดูุงุฆูุฉ</h2>
                <p class="max-w-2xl mx-auto mb-6">ุงุณุชูุน ููุชุฑุฏุฏุงุช ุงููููุฉ ููุชุฃูู ุงูุนูููุ ุฃู ุงุฎุชุฑ ุงูููุณููู ุงููุงุฏุฆุฉ ููุงุณุชุฑุฎุงุก. ุงุณุชุฎุฏู ุณูุงุนุงุช ุงูุฑุฃุณ ูุฃูุถู ุชุฃุซูุฑ.</p>
                
                <div id="audio-init-prompt" class="text-center mb-8">
                    <button id="start-audio-btn" class="btn btn-primary text-white py-3 px-8 text-lg rounded-full">
                        <i class="fas fa-power-off mr-2"></i> ุจุฏุก ุงููุธุงู ุงูุตูุชู
                    </button>
                </div>

                <div id="frequency-player-container" class="bg-gray-100 p-8 rounded-xl shadow-lg max-w-5xl mx-auto hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h3 class="text-2xl font-bold mb-4">ูุดุบู ุงูุชุฑุฏุฏุงุช</h3>
                             <canvas id="frequency-canvas" class="w-full h-40 mb-4"></canvas>
                             <button id="stop-freq-btn" class="btn btn-secondary py-2 px-6 rounded-full w-full">ุฅููุงู ุงูุชุฑุฏุฏ</button>
                        </div>
                        <div>
                           <h3 class="text-2xl font-bold mb-4">ููุณููู ูุงุฏุฆุฉ</h3>
                           <div id="music-player" class="bg-white p-4 rounded-lg">
                               <p id="music-title" class="font-bold text-lg">ููุณููู ููุงุณุชุฑุฎุงุก</p>
                               <p class="text-sm text-gray-500 mb-2">ุชุฃููู: Ashot Danielyan</p>
                               <audio id="background-music" loop src="https://cdn.pixabay.com/download/audio/2022/11/21/audio_a1bf8202ef.mp3"></audio>
                               <div class="flex items-center gap-4 mt-2">
                                   <button id="music-play-pause-btn" class="music-btn text-3xl text-[--primary-color]"><i class="fas fa-play"></i></button>
                                   <input id="music-volume" type="range" min="0" max="1" step="0.01" value="0.5" class="w-full">
                               </div>
                           </div>
                        </div>
                    </div>
                    <hr class="my-8">
                    <h3 class="text-2xl font-bold mb-4">ุชุฑุฏุฏุงุช ุงููููุฉ ุงูููุงุฒูุฉ (Parallel Shift)</h3>
                     <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8" id="parallel-shift-buttons">
                        <button class="freq-btn p-3 rounded-lg border-2 border-gray-200 transition bg-white" data-freq="7.83">
                            <span>7.83 Hz - ุชุฑุฏุฏ ุดููุงู</span>
                            <span class="freq-description">ุงูุชุฌุฐุฑ ูุงูุชูุงุบู ูุน ุงูุฃุฑุถ</span>
                        </button>
                        <button class="freq-btn p-3 rounded-lg border-2 border-gray-200 transition bg-white" data-freq="432">
                            <span>432 Hz - ุงูุชูุงุบู ุงููููู</span>
                             <span class="freq-description">ุงูุณูููุฉ ูุงููุฏูุก ุงูุฏุงุฎูู</span>
                        </button>
                        <button class="freq-btn p-3 rounded-lg border-2 border-gray-200 transition bg-white" data-freq="111">
                            <span>111 Hz - ุงูุฌุณุฑ ุงูุทุงูู</span>
                            <span class="freq-description">ุฑุจุท ุงูุนูู ุงููุงุนู ุจุงููุงูุงุนู</span>
                        </button>
                        <button class="freq-btn p-3 rounded-lg border-2 border-gray-200 transition bg-white" data-freq="222">
                            <span>222 Hz - ุงูุซูุฉ ูุงูุชูุงุฒู</span>
                             <span class="freq-description">ุฅุนุงุฏุฉ ุงูุชูุงุฒู ูุงูุซูุฉ ุจุงููุณุงุฑ</span>
                        </button>
                    </div>

                    <h3 class="text-2xl font-bold mb-4">ุชุฑุฏุฏุงุช ุงูุณููููุฌูู ุงูุนูุงุฌูุฉ</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4" id="frequency-buttons">
                        <button class="freq-btn p-3 rounded-lg border-2 border-gray-200 transition bg-white" data-freq="396">
                            <span>396 Hz - ุชุญุฑูุฑ ุงูุฐูุจ</span>
                             <span class="freq-description">ุงูุชุฎูุต ูู ุงูุฎูู ูุงูุดุนูุฑ ุจุงูุฐูุจ</span>
                        </button>
                        <button class="freq-btn p-3 rounded-lg border-2 border-gray-200 transition bg-white" data-freq="417">
                            <span>417 Hz - ุชุณููู ุงูุชุบููุฑ</span>
                             <span class="freq-description">ุฅุฒุงูุฉ ุงูุทุงูุงุช ุงูุณูุจูุฉ</span>
                        </button>
                        <button class="freq-btn p-3 rounded-lg border-2 border-gray-200 transition bg-white" data-freq="528">
                            <span>528 Hz - ุงูุชุญูู ูุงููุนุฌุฒุงุช</span>
                             <span class="freq-description">ุฅุตูุงุญ ุงูุญูุถ ุงููููู (DNA)</span>
                        </button>
                        <button class="freq-btn p-3 rounded-lg border-2 border-gray-200 transition bg-white" data-freq="639">
                             <span>639 Hz - ุฅุนุงุฏุฉ ุงูุงุชุตุงู</span>
                            <span class="freq-description">ุชุญุณูู ุงูุนูุงูุงุช ูุงูุชูุงุบู</span>
                        </button>
                        <button class="freq-btn p-3 rounded-lg border-2 border-gray-200 transition bg-white" data-freq="741">
                            <span>741 Hz - ุฅููุงุธ ุงูุญุฏุณ</span>
                            <span class="freq-description">ุงูุชุทููุฑ ูุงูุชุนุจูุฑ ุนู ุงูุฐุงุช</span>
                        </button>
                        <button class="freq-btn p-3 rounded-lg border-2 border-gray-200 transition bg-white" data-freq="852">
                            <span>852 Hz - ุงูุนูุฏุฉ ููุฑูุญ</span>
                             <span class="freq-description">ุงูุงุชุตุงู ุจุงููุธุงู ุงูุฑูุญู</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Body Map Section (SVG UPGRADE) -->
        <section id="view-body-map" class="page-view py-20 bg-white hidden">
            <div class="container mx-auto px-6">
                 <div class="text-right mb-12">
                     <button class="nav-link font-bold text-[--primary-color] hover:text-[--accent-color] transition-colors" data-view="dashboard">
                         <i class="fas fa-arrow-right-long ml-2"></i>
                         ุงูุฑุฌูุน ุฅูู ููุญุฉ ุงูุชุญูู
                     </button>
                 </div>
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold mb-4 section-title">ุฎุฑูุทุฉ ุงูุฌุณุฏ ุงูุดุนูุฑู</h2>
                    <p class="max-w-3xl mx-auto text-lg">ุงููุฑ ุนูู ุฃู ุนุถู ูุงุณุชูุดุงู ุงูุฃูุฑุงุถ ุงููุฑุชุจุทุฉ ุจู ูุฃุณุจุงุจูุง ุงูุดุนูุฑูุฉ ุงูุนูููุฉ ุจูุงุกู ุนูู ูุจุงุฏุฆ ุงูุทุจ ุงูุดุนูุฑู.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-start">
                    <!-- SVG Body Map Container -->
                    <div id="body-map-svg-container" class="md:col-span-1 w-full rounded-lg shadow-lg flex justify-center items-center p-4">
                       <svg id="body-map-svg" class="w-full max-w-xs h-auto" viewBox="0 0 300 600" xmlns="http://www.w3.org/2000/svg">
                            <!-- Base Body Outline -->
                            <path d="M150 580 C 120 500, 110 400, 110 350 C 110 250, 120 200, 150 180 C 180 200, 190 250, 190 350 C 190 400, 180 500, 150 580 Z" fill="rgba(230, 211, 193, 0.2)" stroke="#ccc" stroke-width="0.5"/>
                            <path d="M150 180 C 120 180, 100 130, 150 50 C 200 130, 180 180, 150 180Z" fill="rgba(230, 211, 193, 0.2)" stroke="#ccc" stroke-width="0.5"/>
                            <!-- Organs -->
                            <path class="organ-path" data-organ="brain" d="M150,110 a55,55 0 1,0 0.1,0 Z" />
                            <path class="organ-path" data-organ="thyroid" d="M150,195 a25,12 0 0,0 0,-1 Z" />
                            <path class="organ-path" data-organ="heart" d="M150 250 C 140 240, 120 245, 125 265 S 150 280, 150 280 S 175 265, 175 265 S 160 240, 150 250 Z" />
                            <path class="organ-path" data-organ="liver" d="M125,320 a40,25 0 0,1 50,0 l-5 -30 l-40 0 l-5 30 Z" />
                            <path class="organ-path" data-organ="gut" d="M150,380 a45,30 0 1,0 0.1,0 Z M150,380 a30,20 0 1,1 0.1,0 Z" />
                            <g data-organ="adrenals" class="organ-path">
                                <path d="M120,310 a15,8 0 0,1 10,-5" />
                                <path d="M170,310 a15,8 0 0,0 -10,-5" />
                            </g>
                             <g data-organ="kidneys" class="organ-path">
                                <path d="M125 340 C 115 340, 110 370, 125 370 C 135 370, 130 340, 125 340 Z" />
                                <path d="M175 340 C 165 340, 160 370, 175 370 C 185 370, 180 340, 175 340 Z" />
                            </g>
                        </svg>
                    </div>

                    <!-- Info Panel -->
                    <div id="body-map-info-container" class="md:col-span-2">
                        <div id="body-map-info" class="bg-white p-8 rounded-xl shadow-lg opacity-0 transform translate-y-5 h-full">
                            <h3 id="organ-name" class="text-3xl font-bold mb-4 text-[--primary-color]">ุญุฏุฏ ุนุถูุงู ููุจุฏุก</h3>
                            <div id="organ-details">
                                <p class="text-gray-600">ุงููุฑ ุนูู ุฑุณู ุงูุฌุณู ูุงูุชุดุงู ุงููุฒูุฏ.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Quizzes Section (NEW) -->
        <section id="view-quizzes" class="page-view py-20 bg-gray-50 hidden">
             <div class="container mx-auto px-6">
                 <div class="text-right mb-12">
                     <button class="nav-link font-bold text-[--primary-color] hover:text-[--accent-color] transition-colors" data-view="dashboard">
                         <i class="fas fa-arrow-right-long ml-2"></i>
                         ุงูุฑุฌูุน ุฅูู ููุญุฉ ุงูุชุญูู
                     </button>
                 </div>
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold mb-4 section-title">ุงูุชููููุงุช ุงูุตุญูุฉ ุงูุชูุงุนููุฉ</h2>
                    <p class="max-w-3xl mx-auto text-lg">ูุฐู ุงูุงุณุชุจูุงูุงุช ููุณุช ุชุดุฎูุตุงู ุทุจูุงูุ ุจู ูู ุฃุฏูุงุช ููุณุงุนุฏุชู ุนูู ุฒูุงุฏุฉ ูุนูู ุจุตุญุชู ูุชุญุฏูุฏ ุงููุฌุงูุงุช ุงูุชู ูุฏ ุชุญุชุงุฌ ุฅูู ุงูุชูุงู. ูุงูุด ุงููุชุงุฆุฌ ุฏุงุฆูุงู ูุน ูุฎุชุต.</p>
                </div>
                
                <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                        <h3 class="text-2xl font-bold mb-3 text-[--primary-dark]">ุงุฎุชุจุงุฑ ุงูุฅุฑูุงู ุงููุธุฑู</h3>
                        <p class="text-gray-600 mb-4">ูู ุชุดุนุฑ ุจุงูุชุนุจ ุงููุณุชูุฑ ูุตุนูุจุฉ ูู ุงูุชุนุงูู ูุน ุงูุฅุฌูุงุฏุ ูุฏ ุชููู ุบุฏุชู ุงููุธุฑูุฉ ุจุญุงุฌุฉ ุฅูู ุฏุนู.</p>
                        <button class="btn btn-primary text-white py-2 px-6 rounded-full quiz-start-btn" data-quiz="adrenal-fatigue">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ</button>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                        <h3 class="text-2xl font-bold mb-3 text-[--primary-dark]">ุชูููู ุงูุฃูุนุงุก ุงููุชุณุฑุจุฉ</h3>
                        <p class="text-gray-600 mb-4">ุงูุชุดู ูุง ุฅุฐุง ูุงูุช ูุดุงูู ูุซู ุงูุงูุชูุงุฎุ ุงูุญุณุงุณูุฉ ุงูุบุฐุงุฆูุฉุ ุฃู ุงููุดุงูู ุงูุฌูุฏูุฉ ูุฏ ุชููู ูุฑุชุจุทุฉ ุจุตุญุฉ ุฃูุนุงุฆู.</p>
                        <button class="btn btn-primary text-white py-2 px-6 rounded-full quiz-start-btn" data-quiz="leaky-gut">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ</button>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                        <h3 class="text-2xl font-bold mb-3 text-[--primary-dark]">ุงุญุณุจ ุฏุฑุฌุฉ ุงูุณููุฉ ูู ุฌุณูู</h3>
                        <p class="text-gray-600 mb-4">ูููู ุชุนุฑุถู ููุณููู ุงูุจูุฆูุฉ ููุฏุฑุฉ ุฌุณูู ุนูู ุงูุชุฎูุต ูููุง.</p>
                        <button class="btn btn-primary text-white py-2 px-6 rounded-full quiz-start-btn" data-quiz="toxicity-score">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ</button>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                        <h3 class="text-2xl font-bold mb-3 text-[--primary-dark]">ุงุฎุชุจุงุฑ ููุดูุฑ ููุฃููุงู</h3>
                        <p class="text-gray-600 mb-4">ุงุฎุชุฑ ุงูุฃููุงู ุญุณุจ ุชูุถููู ูููุดู ุนู ุฌูุงูุจ ูู ุญุงูุชู ุงูููุณูุฉ ุงูุญุงููุฉ.</p>
                        <button class="btn btn-primary text-white py-2 px-6 rounded-full quiz-start-btn" data-quiz="luscher-color-test">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Journal Section (NEW) -->
        <section id="view-journal" class="page-view py-20 bg-white hidden">
            <div class="container mx-auto px-6">
                <div id="journal-content-container">
                     <div class="text-right mb-12">
                         <button class="nav-link font-bold text-[--primary-color] hover:text-[--accent-color] transition-colors" data-view="dashboard">
                              <i class="fas fa-arrow-right-long ml-2"></i>
                              ุงูุฑุฌูุน ุฅูู ููุญุฉ ุงูุชุญูู
                           </button>
                     </div>
                    <div class="text-center mb-12">
                        <h2 class="text-4xl font-bold mb-4 section-title">ูููุฑุฉ ุงูุฃุนุฑุงุถ ูุงููุฒุงุฌ</h2>
                        <p class="max-w-3xl mx-auto text-lg">ุฃุฏุงุฉ ูููุฉ ูุชุตุจุญ ูุญููุงู ูู ุฑุญูุชู ุงูุตุญูุฉ. ุณุฌูู ุชุชุจุนู ุงููููู ููุง ูุงูุชุดุงู ุงูุฑูุงุจุท ุจูู ููุท ุญูุงุชู ููุง ุชุดุนุฑ ุจู.</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- New Entry Form -->
                        <div class="md:col-span-1 bg-gray-50 p-6 rounded-xl shadow-lg">
                            <h3 class="text-2xl font-bold mb-4 text-center">ุฅุฏุฎุงู ุงูููู</h3>
                            <form id="journal-form">
                                <div class="mb-4">
                                    <label for="entry-date">ุงูุชุงุฑูุฎ</label>
                                    <input type="date" id="entry-date" class="w-full p-2 border rounded-md" required>
                                </div>
                                <div class="mb-4">
                                    <label for="mood-rating">ุงููุฒุงุฌ (1=ุณูุก, 10=ููุชุงุฒ)</label>
                                    <input type="range" id="mood-rating" min="1" max="10" value="5" class="w-full">
                                </div>
                                 <div class="mb-4">
                                    <label for="energy-rating">ุงูุทุงูุฉ (1=ูููู, 10=ุญููู)</label>
                                    <input type="range" id="energy-rating" min="1" max="10" value="5" class="w-full">
                                </div>
                                 <div class="mb-4">
                                    <label for="sleep-quality">ุฌูุฏุฉ ุงูููู (ุณุงุนุงุช)</label>
                                    <input type="number" id="sleep-quality" min="0" max="12" step="0.5" class="w-full p-2 border rounded-md" placeholder="e.g., 7.5">
                                </div>
                                 <div class="mb-4">
                                    <label for="symptoms-today">ุงูุฃุนุฑุงุถ ุงูููู</label>
                                    <textarea id="symptoms-today" rows="3" class="w-full p-2 border rounded-md" placeholder="ุตุฏุงุนุ ุงูุชูุงุฎุ ุฃูู ููุงุตู..."></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary text-white w-full py-3 rounded-full">ุญูุธ ุงูุฅุฏุฎุงู</button>
                            </form>
                        </div>
                        <!-- Entries & Charts -->
                        <div class="md:col-span-2">
                             <h3 class="text-2xl font-bold mb-4 text-center">ุชุญููู ุงูุฃููุงุท</h3>
                             <div class="bg-gray-50 p-6 rounded-xl shadow-lg mb-6">
                                 <canvas id="journal-chart"></canvas>
                             </div>
                             <h3 class="text-2xl font-bold mb-4 text-center">ุณุฌู ุฅุฏุฎุงูุงุชู</h3>
                             <div id="journal-entries-container" class="space-y-4 max-h-96 overflow-y-auto pr-2">
                                 <!-- Entries will be loaded here -->
                             </div>
                        </div>
                    </div>
                </div>

                 <div id="journal-login-prompt" class="hidden text-center py-16">
                     <div class="bg-white max-w-2xl mx-auto p-8 rounded-xl shadow-lg">
                         <i class="fas fa-lock text-5xl text-[--accent-color] mb-4"></i>
                         <h3 class="text-2xl font-bold mb-3">ูุฐู ุงูููุฒุฉ ุญุตุฑูุฉ ููุฃุนุถุงุก</h3>
                         <p class="text-gray-600 mb-6">ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูููุตูู ุฅูู ูููุฑุฉ ุงูุฃุนุฑุงุถ ูุงููุฒุงุฌ ุงูุฎุงุตุฉ ุจู ูุญูุธ ุชูุฏูู.</p>
                         <button id="login-for-journal-btn" class="btn btn-primary text-white py-2 px-8 rounded-full">ุชุณุฌูู ุงูุฏุฎูู</button>
                     </div>
                 </div>
            </div>
        </section>
        
        <!-- Premium Content / Patient File Section -->
        <section id="view-premium-content" class="page-view py-20 hidden">
            <div class="container mx-auto px-6 text-center">
                 <div class="text-right mb-12">
                     <button class="nav-link font-bold text-[--primary-color] hover:text-[--accent-color] transition-colors" data-view="dashboard">
                         <i class="fas fa-arrow-right-long ml-2"></i>
                         ุงูุฑุฌูุน ุฅูู ููุญุฉ ุงูุชุญูู
                     </button>
                 </div>
                <h2 id="welcome-message" class="text-4xl font-bold mb-4 section-title">ูุฑุญุจุงู ุจู ูู ุฃุณุฑุชูุง</h2>
                <p class="max-w-2xl mx-auto mb-12">ูุฐู ูุณุงุญุชู ุงูุญุตุฑูุฉ. ููุง ุณุชุฌุฏ ุงููุญุชูู ุงูุฎุงุต ูุฌููุน ูุชุงุฆุฌู ุงููุญููุธุฉ ูู ุฃุฏูุงุชูุง ุงูุฐููุฉ.</p>
                <div id="patient-file-content" class="bg-white p-8 rounded-xl shadow-inner max-w-4xl mx-auto text-right">
                    <h3 class="text-2xl font-bold mb-6">ุณุฌูุงุชู ุงููุญููุธุฉ</h3>
                    <div id="saved-results-container" class="space-y-6">
                        <p>ุงูุฑุฌุงุก ุชุณุฌูู ุงูุฏุฎูู ูุนุฑุถ ุณุฌูุงุชู ุงููุญููุธุฉ.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Blog Section -->
        <section id="view-blog" class="page-view py-20 bg-gray-50 hidden">
             <div class="container mx-auto px-6 text-center">
                 <div class="text-right mb-12">
                     <button class="nav-link font-bold text-[--primary-color] hover:text-[--accent-color] transition-colors" data-view="dashboard">
                         <i class="fas fa-arrow-right-long ml-2"></i>
                         ุงูุฑุฌูุน ุฅูู ููุญุฉ ุงูุชุญูู
                     </button>
                 </div>
                <h2 class="text-4xl font-bold mb-4 section-title">ูู ูุญู ุงููุฏููุฉ</h2>
                <p class="max-w-2xl mx-auto mb-12">ููุงูุงุช ูุฑุคู ููุณุงุนุฏุชู ุนูู ููู ุฌุณุฏู ุจุดูู ุฃูุถู ูุงุชุฎุงุฐ ูุฑุงุฑุงุช ุตุญูุฉ ูุณุชููุฑุฉ.</p>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 text-right">
                    <div class="bg-white rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 fade-in-up hover:-translate-y-2">
                        <img src="https://images.unsplash.com/photo-1498837167922-ddd27525d352?q=80&w=2070&auto=format&fit=crop" alt="ุตูุฑุฉ ุทุนุงู ุตุญู" class="w-full h-56 object-cover">
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-3">ูู ุฃูุนุงุคู ูู ุณุจุจ ุชููุจุงุช ูุฒุงุฌูุ</h3>
                            <p class="text-gray-600 mb-4">ุงูุชุดู ุงูุนูุงูุฉ ุงููุฏูุดุฉ ุจูู ุตุญุฉ ุงูุฌูุงุฒ ุงููุถูู ูุตุญุชู ุงูููุณูุฉ.</p>
                            <a href="#" class="read-more-btn font-bold text-[--primary-color] hover:underline" data-postid="gut-brain">ุงูุฑุฃ ุงููุฒูุฏ &larr;</a>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 fade-in-up hover:-translate-y-2" style="animation-delay: 0.2s;">
                        <img src="https://images.unsplash.com/photo-1599301934984-1d2741913a5f?q=80&w=2070&auto=format&fit=crop" alt="ุตูุฑุฉ ุงูุฑุฃุฉ ุชุชุฃูู" class="w-full h-56 object-cover">
                        <div class="p-6">
                             <h3 class="text-xl font-bold mb-3">ููุฉ ุงูุชููุณ: ููู ุชูุฏุฆ ุฌูุงุฒู ุงูุนุตุจู ูู 5 ุฏูุงุฆู</h3>
                            <p class="text-gray-600 mb-4">ุชุนูู ุชูููุฉ ุชููุณ ุจุณูุทุฉ ููุนุงูุฉ ูุฎูุถ ุงูุชูุชุฑ ูุงูููู ููุฑุงู.</p>
                            <a href="#" class="read-more-btn font-bold text-[--primary-color] hover:underline" data-postid="breathing">ุงูุฑุฃ ุงููุฒูุฏ &larr;</a>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 fade-in-up hover:-translate-y-2" style="animation-delay: 0.4s;">
                        <img src="https://images.unsplash.com/photo-1476837579993-f1d3948f17c2?q=80&w=2070&auto=format&fit=crop" alt="ุตูุฑุฉ ุชูุงุจู ูุฃุนุดุงุจ" class="w-full h-56 object-cover">
                        <div class="p-6">
                           <h3 class="text-xl font-bold mb-3">ุฃูุถู 3 ููููุงุช ุบุฐุงุฆูุฉ ูููุงูุญุฉ ุงูุงูุชูุงุจุงุช</h3>
                            <p class="text-gray-600 mb-4">ุฏูููู ูุงุฎุชูุงุฑ ุงูููููุงุช ุงูุฃูุซุฑ ูุนุงููุฉ ูุฏุนู ุตุญุชู ุงูุนุงูุฉ.</p>
                            <a href="#" class="read-more-btn font-bold text-[--primary-color] hover:underline" data-postid="supplements">ุงูุฑุฃ ุงููุฒูุฏ &larr;</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Single Post View -->
        <section id="view-single-post" class="page-view py-20 bg-white hidden">
            <div class="container mx-auto px-6 max-w-4xl">
                 <div class="text-right mb-12">
                     <button class="nav-link font-bold text-[--primary-color] hover:text-[--accent-color] transition-colors" data-view="blog">
                         <i class="fas fa-arrow-right-long ml-2"></i>
                         ุงูุฑุฌูุน ุฅูู ุงููุฏููุฉ
                     </button>
                 </div>
                 <article>
                     <h1 id="post-title" class="text-4xl md:text-5xl font-bold mb-4 text-center section-title"></h1>
                     <img id="post-image" src="" alt="ุตูุฑุฉ ุงูููุงู" class="w-full h-96 object-cover rounded-xl shadow-lg my-8">
                     <div id="post-content" class="prose lg:prose-xl max-w-none text-right"></div>
                 </article>
            </div>
        </section>
        
        <!-- FAQ Section (NEW) -->
        <section class="py-20 bg-secondary-color">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold mb-12 text-center section-title">ุฃุณุฆูุฉ ุดุงุฆุนุฉ</h2>
                <div class="max-w-4xl mx-auto faq-section">
                    <details>
                        <summary>ูุชู ูููุตุญ ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุงูุชุดุฎูุต ุงูุขููุ</summary>
                        <p class="mt-4 text-gray-700">ุฃุฏุงุฉ ุงูุชุดุฎูุต ุงูุขูู ูุตููุฉ ูุชููู ููุทุฉ ุจุฏุงูุฉ ุงุณุชูุดุงููุฉ ุนูุฏูุง ุชุดุนุฑ ุจุฃุนุฑุงุถ ุบูุฑ ูุงุถุญุฉ ุฃู ูุชุนุฏุฏุฉ. ุฅููุง ุชุณุงุนุฏ ูู ุฑุจุท ุงูุฃุนุฑุงุถ ุงูุฌุณุฏูุฉ ุจุงููุดุงุนุฑ ูููุท ุงูุญูุงุฉ ูุชูุฏูู ุฑุคูุฉ ุดููููุฉ ูุญุชููุฉุ ูููููุง ูุง ุชุบูู ุฃุจุฏุงู ุนู ุงุณุชุดุงุฑุฉ ุทุจูุฉ ูุชุฎุตุตุฉ ูุชุฃููุฏ ุงูุชุดุฎูุต.</p>
                    </details>
                    <details>
                        <summary>ูุง ุงููุฑู ุจูู "ุฎุทุฉ ุนูุงุฌูุฉ" ู"ุชุดุฎูุต"ุ</summary>
                        <p class="mt-4 text-gray-700">ุงูุชุดุฎูุต ููุฏู ุฅูู ุชุญุฏูุฏ "ูุงุฐุง" ูุญุฏุซ ูู ุฌุณูู ุจูุงุกู ุนูู ุงูุฃุนุฑุงุถ ุงูุชู ุชูุฏููุง. ุฃูุง ุงูุฎุทุฉ ุงูุนูุงุฌูุฉ ูุชูุฏู ุฅูู ุชุญุฏูุฏ "ููู" ูููู ูุนุงูุฌุฉ ูุฐุง ุงูุชุดุฎูุต ุฃู ูุฌููุนุฉ ุงูุฃุนุฑุงุถ ูู ุฎูุงู ุงูุชุฑุงุญ ุจุฑูุชูููู ุนูุงุฌู ูุชุถูู ุชุบุฐูุฉุ ููููุงุชุ ููุตุงุฆุญ ุญูุงุชูุฉ. ููููู ุงุณุชุฎุฏุงู ูุชูุฌุฉ ุงูุชุดุฎูุต ููุฏุฎู ูุทูุจ ุฎุทุฉ ุนูุงุฌูุฉ.</p>
                    </details>
                     <details>
                        <summary>ูู "ุฎุฑูุทุฉ ุงูุฌุณุฏ ุงูุดุนูุฑู" ุนูููุฉุ</summary>
                        <p class="mt-4 text-gray-700">ุฎุฑูุทุฉ ุงูุฌุณุฏ ุงูุดุนูุฑู ูุจููุฉ ุนูู ูุจุงุฏุฆ ุงูุทุจ ุงูุดุนูุฑู ูุงูุทุจ ุงูุฃููุงูู ุงูุญุฏูุซ (GNM)ุ ููู ูุฏุงุฑุณ ุชุฑู ุฃู ููู ูุฑุถ ุฌุณุฏู ุฌุฐุฑ ุฃู ุตุฏูุฉ ุดุนูุฑูุฉ ูุฑุชุจุทุฉ ุจู. ุจูููุง ูุง ุชุฒุงู ูุฐู ุงูุฃููุงุฑ ูู ุทูุฑ ุงูุจุญุซ ูู ุงูุฃูุณุงุท ุงูุนูููุฉ ุงูุชูููุฏูุฉุ ูุฅููุง ุชูุฏู ููุธูุฑุงู ูููุงู ููุดูุงุก ุงูุฐุงุชู ูููู ุฃุนูู ูุฑุณุงุฆู ุฃุฌุณุงุฏูุง.</p>
                    </details>
                    <details>
                        <summary>ูู ูููููู ุงูุงุนุชูุงุฏ ุนูู ุจุฑูุชูููู ุงูุดุนุฑ ููุทุ</summary>
                        <p class="mt-4 text-gray-700">ุงูุจุฑูุชูููู ุงูููุฏู ูู ูุฌููุนุฉ ูู ุฃูุถู ุงูููุงุฑุณุงุช ุงูุดููููุฉ ุงูุชู ุฃุซุจุชุช ูุนุงููุชูุง ูููุซูุฑูู. ููุน ุฐููุ ุชุฎุชูู ุงูุงุณุชุฌุงุจุฉ ูู ุดุฎุต ูุขุฎุฑ. ููุญุตูู ุนูู ุฃูุถู ุงููุชุงุฆุฌุ ูููุถู ุฏูุฌ ุงูุจุฑูุชูููู ูุน ูุธุงู ุบุฐุงุฆู ุตุญูุ ุฅุฏุงุฑุฉ ููุชูุชุฑุ ูููู ูุงูู. ูู ุฌุฒุก ูู ููุธููุฉ ูุชูุงููุฉ ูููุณ ุญูุงู ุณุญุฑูุงู ูููุฑุฏุงู.</p>
                    </details>
                </div>
            </div>
        </section>

    </main>
    
    <!-- Footer -->
    <footer id="contact" class="bg-gray-800 text-white pt-20 pb-8">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-3xl font-bold mb-4">ูู ุฃูุช ูุณุชุนุฏ ูุจุฏุก ุฑุญูุฉ ุงูุดูุงุกุ</h2>
            <p class="max-w-xl mx-auto mb-8">ุชูุงุตู ูุนู ุงูููู ุนุจุฑ ูุงุชุณุงุจ ูุญุฌุฒ ุงุณุชุดุงุฑุชู ุงูุฃูููุ ุฃู ุชุงุจุนูู ุนูู ูุณุงุฆู ุงูุชูุงุตู ุงูุงุฌุชูุงุนู ููุญุชูู ูููู ูููู.</p>
            <a href="https://wa.me/967771447111?text=ุฃููุงู%20ุฏ.%20ุนูุฑุ%20ุฃุฑุบุจ%20ูู%20ุงูุงุณุชูุณุงุฑ%20ุนู%20ุฌูุณุงุช%20ุงูุนูุงุฌ%20ุงูุดูููู" target="_blank" class="btn btn-primary text-white text-xl py-3 px-8 rounded-full inline-block mb-12"><i class="fab fa-whatsapp"></i> ุชูุงุตู ูุนู ุนุจุฑ ูุงุชุณุงุจ</a>
            
            <div class="flex justify-center space-x-6 text-3xl mb-8">
                <a href="https://www.instagram.com/dr.omr369" target="_blank" class="hover:text-[--accent-color] transition"><i class="fab fa-instagram"></i></a>
                <a href="https://www.facebook.com/dr.omr369" target="_blank" class="hover:text-[--accent-color] transition"><i class="fab fa-facebook-f"></i></a>
                <a href="https://www.tiktok.com/@dr.omr369" target="_blank" class="hover:text-[--accent-color] transition"><i class="fab fa-tiktok"></i></a>
            </div>

            <div class="border-t border-gray-700 pt-6">
                 <p>&copy; 2025 ุฏ. ุนูุฑ ุงูุนูุงุฏ | ุฌููุน ุงูุญููู ูุญููุธุฉ.</p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="back-to-top-btn" class="hidden fixed bottom-5 right-5 bg-[--primary-color] text-white w-12 h-12 rounded-full shadow-lg flex items-center justify-center text-2xl transition-opacity duration-300 hover:bg-[--primary-dark]">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- WhatsApp Floating Button -->
    <a href="https://wa.me/967771447111" class="whatsapp-float" target="_blank" aria-label="ุชูุงุตู ูุนูุง ุนุจุฑ ูุงุชุณุงุจ">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Modals -->
    <div id="tool-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4 opacity-0">
        <div id="modal-content" class="bg-white p-8 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto transform scale-95 transition-transform duration-300"></div>
    </div>
    
    <div id="quiz-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4 opacity-0">
        <div id="quiz-modal-content" class="bg-white p-8 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto transform scale-95 transition-transform duration-300"></div>
    </div>


    <div id="hair-protocol-modal" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center z-[110] p-4">
        <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto relative text-right">
            <button class="absolute top-4 left-4 text-2xl text-gray-500 hover:text-gray-800" onclick="closeModal('hair-protocol-modal')">&times;</button>
            <h3 class="text-2xl font-bold mb-4 text-center text-[--primary-color]">ุงูุจุฑูุชูููู ุงูุดูููู ูุนูุงุฌ ุงูุดุนุฑ</h3>
            <div class="text-right space-y-4">
                <p class="text-center text-gray-600 mb-4">ุจุฑูุชูููู ุนูุงุฌู ุดุงูู ูุชุฃุฎูุฑ ุงูุดูุจ ูุชุญููุฒ ุชุตุจุบ ุงูุดุนุฑ ูุชูููู ุงูุชุณุงูุท.</p>
                
                <div class="p-4 bg-gray-50 rounded-lg">
                    <h4 class="font-bold text-lg mb-2 text-[--primary-dark]">ุงูุฌุฒุก 1: ุงูุฒููุช ุงูุนูุงุฌูุฉ ุงูููุถุนูุฉ (2-3 ูุฑุงุช ุฃุณุจูุนูุงู)</h4>
                    <p><strong>ุงูุชุฑููุจุฉ:</strong></p>
                    <ul class="list-disc list-inside pr-4">
                        <li>ุฒูุช ุฅูููู ุงูุฌุจู: 10 ูู</li>
                        <li>ุฒูุช ุงููุนูุงุน: 5 ูู</li>
                        <li>ุฒูุช ุงูููููู: 5 ูู</li>
                        <li>ุฒูุช ุงูุณูุณู (ูุฒูุช ุญุงูู): 30 ูู</li>
                        <li>ุฒูุช ุงูุฎุฑูุน (ุงุฎุชูุงุฑู ููุชูุซูู): 10 ูู</li>
                        <li>ููุฑูุณูู ุทุจู ุฃู ุจุงุฑุงููู ุทุจู: 5 ูู</li>
                    </ul>
                    <p class="mt-2"><strong>ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู:</strong> ุงูุฒุฌ ุงูููููุงุชุ ุฏูุฆูุง ููููุงูุ ุฏูู ูุฑูุฉ ุงูุฑุฃุณ ูู 5-10 ุฏูุงุฆูุ ูุงุชุฑููุง ูุณุงุนุชูู ุนูู ุงูุฃูู ูุจู ุบุณููุง ุจุดุงูุจู ุทุจูุนู.</p>
                </div>

                <div class="p-4 bg-gray-50 rounded-lg">
                    <h4 class="font-bold text-lg mb-2 text-[--primary-dark]">ุงูุฌุฒุก 2: ููููุงุช ุบุฐุงุฆูุฉ ููููุฉ</h4>
                     <ul class="list-disc list-inside pr-4">
                        <li><strong>ุตุจุงุญูุง ุจุนุฏ ุงููุทูุฑ:</strong> Zinc (30-50 ููุบ) ูุน Vitamin C (Liposomal) (500-1000 ููุบ)</li>
                        <li><strong>ุจุนุฏ ุณุงุนุชูู ูู ุงูุฒูู:</strong> Copper (2-3 ููุบ)</li>
                        <li><strong>ุตุจุงุญูุง ุฃู ูุณุงุกู:</strong> Fo-Ti (ูุจุณููุฉ 500-1000 ููุบ) - <span class="text-red-500 font-bold">ููุตุญ ุจุนูู ุชุญููู ูุธุงุฆู ูุจุฏ.</span></li>
                    </ul>
                </div>
                
                <div class="p-4 bg-gray-50 rounded-lg">
                    <h4 class="font-bold text-lg mb-2 text-[--primary-dark]">ุงูุฌุฒุก 3: ููุงุน ุงูุดุนุฑ ุงูุทุจูุนู (ูุฑุฉ ุฃุณุจูุนูุงู)</h4>
                    <p><strong>ุงูุชุฑููุจุฉ:</strong> ููุนูุฉ ูุจูุฑุฉ ุณุฏุฑ ุจูุฏุฑุฉุ ููุนูุฉ ุตุบูุฑุฉ ุนูุจุฑ ูุญูุ ูุตู ููุนูุฉ ุตุบูุฑุฉ ุจุฐูุฑ ุงูุฎูุฉ ุงููุทุญููุฉุ 2 ููุนูุฉ ูุจูุฑุฉ ุฎู ุชูุงุญ ุทุจูุนูุ ููุงุก ุฏุงูุฆ ููุนุฌู.</p>
                    <p class="mt-2"><strong>ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู:</strong> ููุถุน ุนูู ุงููุฑูุฉ ูุงูุดุนุฑ ููุฏุฉ 30-60 ุฏูููุฉ ุซู ูุบุณู ุฌูุฏุงู.</p>
                </div>

                <div class="p-4 bg-gray-50 rounded-lg">
                    <h4 class="font-bold text-lg mb-2 text-[--primary-dark]">ุงูุฌุฒุก 4: ูุงุฏุฉ ORMUS</h4>
                    <p><strong>ุงูุฌุฑุนุฉ:</strong> ููุนูุฉ ุตุบูุฑุฉ ููููุงู ุตุจุงุญุงู ุนูู ูุนุฏุฉ ูุงุฑุบุฉ ูู ูุตุฏุฑ ููุซูู.</p>
                    <p><strong>ุงูููุงุฆุฏ:</strong> ูุฒูุฏ ุงูุชุฑููุฒุ ููุงุฒู ุงูุทุงูุงุชุ ููุญูุฒ ุชุฌุฏุฏ ุงูุฎูุงูุง ุงูุตุจุบูุฉ.</p>
                    <p class="text-red-500 font-bold mt-2">ุชุญุฐูุฑ: ูุง ุชุณุชุฎุฏู ORMUS ูุน ุฃุฏููุฉ ููุณูุฉ ุฃู ููุงุนูุฉ ุฏูู ุงุณุชุดุงุฑุฉ ุทุจูุจ.</p>
                </div>

                <div class="p-4 bg-green-50 rounded-lg border-r-4 border-green-500">
                    <h4 class="font-bold text-lg mb-2 text-green-800">ูุตุงุฆุญ ุนุงูุฉ ุฏุงุนูุฉ</h4>
                    <ul class="list-disc list-inside pr-4">
                        <li>ุงุชุจุน ูุธุงููุง ุบุฐุงุฆููุง ุบูููุง ุจููุชุงูููุงุช B12ุ ุญูุถ ุงููููููุ ูุงูุณููููุง.</li>
                        <li>ุฎูู ุงูุชูุชุฑุ ูุฃู ุงูุฅุฌูุงุฏ ูุฒูุฏ ูู ุงูุดูุจ.</li>
                        <li>ุชุฌูุจ ุงูุตุจุบุงุช ุงูููููุงุฆูุฉ ุงููููุฉ ุฃุซูุงุก ุงูุจุฑูุชูููู.</li>
                        <li>ุฃูุซุฑ ูู ุดุฑุจ ุงูุนุตุงุฆุฑ ุงูุฎุถุฑุงุก.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- START Hemorrhoid Protocol Modal -->
    <div id="hemorrhoid-protocol-modal" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center z-[110] p-4">
        <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto relative text-right">
            <button class="absolute top-4 left-4 text-2xl text-gray-500 hover:text-gray-800" onclick="closeModal('hemorrhoid-protocol-modal')">&times;</button>
            <h3 class="text-2xl font-bold mb-4 text-center text-[--primary-color]">๐ฟ ุจุฑูุชูููู ุทูุจุฑุฉ ุงูุนููู ูุนูุงุฌ ุงูุจูุงุณูุฑ โ แนฌibrah Hemorrhoid Healing Protocol</h3>
            <div class="text-right space-y-4">
                <p class="italic bg-yellow-50 p-4 rounded-lg border-r-4 border-yellow-400 leading-relaxed">ูุฐุง ุงูุจุฑูุชูููู ุตูููู ููููู ุดุงูููุงุ ูุบุทู ุฌูุงูุจ ูุฎุชููุฉ ูู ุนูุงุฌ ุงูุจูุงุณูุฑ โ ูู ุงูุฃุฏููุฉ ุงูุญุฏูุซุฉุ ุฅูู ุงูุฃุนุดุงุจุ ุฅูู ุงูููููุงุชุ ุฅูู ุงูุนูุงุฌ ุงูุทุงูู ูุงูุฑูุญู.<br><br>ููู ุงูุญูููุฉ ุงูุจุณูุทุฉ ูู:<br><strong>ูุณุชู ุจุญุงุฌุฉ ุฃู ุชุทุจูู ูู ุดูุก ุฏูุนุฉ ูุงุญุฏุฉ.</strong><br><br><em>ุงุจุฏุฃ ุจูุง ููุงุณุจูุ ุจูุง ุชุฑุชุงุญ ููุ ุจูุง ุชุณุชุทูุน ูุนูู ุงูููู.</em> ูุฏ ุชุฎุชุงุฑ ุฃู ุชุจุฏุฃ ุจุงููุบุทุณ ููุทุ ุฃู ุจุงููุฑูู ุงูุทุจูุนูุ ุฃู ุจุงูููููุงุชโฆ ููููุง ุฃุจูุงุจ ุตุงุฏูุฉ ูุญู ุงูุดูุงุก.<br><br><strong>ุงุณุชูุน ุฅูู ุฌุณุฏูุ ูุซู ุจุฃู ูู ุฎุทูุฉ ุตุบูุฑุฉุ ุฅู ููุถุนุช ุจูููุฉุ ุชูุญุฏุซ ูุฑููุง.</strong><br>๐ฑ ุงูุดูุงุก ููุณ ุณุจุงููุงโฆ ุจู ุนูุฏุฉ ูุงุฏุฆุฉ ุฅูู ุฐุงุชู.</p>

                <div class="p-4 bg-gray-50 rounded-lg">
                    <h4 class="font-bold text-lg mb-2 text-[--primary-dark]">๐ฏ ุงูุฎุทูุฉ 1 | ุงูุนูุงุฌุงุช ุงูุชูููุฏูุฉ ุงูุญุฏูุซุฉ (Conventional Medicine)</h4><ol class="list-decimal list-inside pr-4 space-y-1"><li><strong>ุฃูุฑุงุต ุฏุงูููู (Daflon 1000mg)</strong> โ ูุฑุต ูุงุญุฏ ููููุงูุ ูุชุญุณูู ุงูุฏูุฑุฉ ุงููุฑูุฏูุฉ ูุชุฎููู ุงูุงุญุชูุงู.</li><li><strong>ูุฑูู ููููููุงุฑ (Neo-Healar)</strong> โ ูุฑุชูู ููููุงูุ ูููู ุงูุงูุชูุงุจ ูุงูุชูุฑู.</li><li><strong>ุชุญุงููู ุจุฑููุชูุฌููููููู (Procto-Glyvenol)</strong> โ ุชุญูููุฉ ูุณุงุกู ูุชุณููู ุงูุฃูู ุงูุฏุงุฎูู ูุงูุชูุฑู.</li><li><strong>ุชูููุงุช ุบูุฑ ุฌุฑุงุญูุฉ (ููุญุงูุงุช ุงููุชูุฏูุฉ):</strong><ul class="list-disc list-inside pr-6"><li>ุฑุจุท ุจุงูุดุฑูุท ุงููุทุงุทู</li><li>ุงูููุฒุฑ (Hemorrhoidoplasty)</li><li>ุงูุชุฑุฏุฏุงุช ุงูุฑุงุฏูููุฉ (RFA)</li></ul><span class="text-sm text-red-600">ุชูุฌุฑู ุฌููุนูุง ุชุญุช ุฅุดุฑุงู ุทุจู ูุฎุชุต.</span></li></ol></div><!-- ุงูุฎุทูุฉ 2 --><div class="p-4 bg-gray-50 rounded-lg"><h4 class="font-bold text-lg mb-2 text-[--primary-dark]">๐ ุงูุฎุทูุฉ 2 | ุงูุนูุงุฌ ุจุงูุฃุนุดุงุจ ุงูุทุจูุฉ (Herbal Medicine)</h4><p class="mb-2">ุดุงู ุฃู ูุจุณููุงุช ูุฑุชูู ููููุงู ุญุณุจ ุงูุชููุฑ:</p><ul class="list-disc list-inside pr-4 space-y-1"><li><strong>Witch Hazel bark:</strong> ูุงุจุถ ููุฃูุนูุฉุ ูููู ุงููุฒูู.</li><li><strong>Catnip:</strong> ูุฑูุญ ุนุถูุงุช ุงูุฃูุนุงุก ููููู ุงูุชุดูุฌุงุช.</li><li><strong>Yellow Dock:</strong> ูุนุงูุฌ ุงูุฅูุณุงู ููุญุณูู ุงููุถู.</li><li><strong>White Oak Bark:</strong> ูุงุจุถ ููุฃูุณุฌุฉ ููุณุฑูุน ุงูุดูุงุก.</li></ul><p class="mt-3 font-semibold">ุฎูุทุฉ ุงูุฃุนุดุงุจ (ูุฑุชูู ููููุงู):</p><ul class="list-disc list-inside pr-4 space-y-1"><li>Bayberry</li><li>Alum Root</li><li>Mullein</li><li>Pilewort</li><li>Yarrow</li></ul><p class="mt-2 text-sm text-gray-700">ุชูุณุฑูุน ุดูุงุก ุงููุฒูู ูุงูุงูุชูุงุจ.</p><p class="mt-3"><strong>Bloodroot (ุฌุฐุฑ ุงูุฏู):</strong> ููุดุท ููุงุนู ููู โ 10 ูุทุฑุงุช ูู ููุจ ูุงุก ููููุงู ููุฏุฉ ุฃุณุจูุนูู ููุทุ ูุชุญุช ุฅุดุฑุงู ูุฎุชุต.</p></div><!-- ุงูุฎุทูุฉ 3 --><div class="p-4 bg-gray-50 rounded-lg"><h4 class="font-bold text-lg mb-2 text-[--primary-dark]">๐ฟ ุงูุฎุทูุฉ 3 | ููููุงุช ุงูุฃูุฑุซูููููููููุฑ (Orthomolecular Supplements)</h4><p class="mb-2">ููุฏุฉ 4โ8 ุฃุณุงุจูุน:</p><ul class="list-disc list-inside pr-4 space-y-1"><li>ููุชุงููู C โ 1000mg ูุฑุชูู ููููุงู</li><li>ุฑูุชูู โ Rutin 500mg ูุฑุชูู</li><li>ููุชุงููู E (Tocotrienols) โ 400 IU ููููุงู</li><li>Zinc Bisglycinate โ 25mg ููููุงู</li><li>Horse Chestnut โ 250mg ูุฑุชูู</li><li>Grape Seed Extract โ 200mg ูุฑุชูู</li><li>Liquid Chlorophyll โ 10ml ูุฑุชูู</li><li>Bromelain โ 500mg ูุฑุชูู ุนูู ูุนุฏุฉ ูุงุฑุบุฉ</li></ul></div><!-- ุงูุฎุทูุฉ 4 --><div class="p-4 bg-gray-50 rounded-lg"><h4 class="font-bold text-lg mb-2 text-[--primary-dark]">๐งด ุงูุฎุทูุฉ 4 | ุงูุนูุงุฌุงุช ุงูููุถุนูุฉ ุบูุฑ ุงูุชูููุฏูุฉ (Topical Alternative)</h4><ol class="list-decimal list-inside pr-4 space-y-2"><li><strong>ูุฑูู ุทูุจุฑุฉ ุจุงูููุฑูุณูู ููุจูุงุณูุฑ:</strong><ul class="list-disc list-inside pr-4"><li>10ml ููุฑูุณูู ุทุจู ููู</li><li>10ml ุฒูุช ุฎุฑูุน</li><li>10ml ุฒูุช ุฌูุฒ ููุฏ</li><li>3 ูุทุฑุงุช Tea Tree Oil</li><li>3 ูุทุฑุงุช Lavender Oil</li></ul><span class="text-sm">ููุณุชุฎุฏู ูุฑุชูู ููููุงู.</span></li><li><strong>ูุฑูู DMSO ุงูุนููู:</strong><ul class="list-disc list-inside pr-4"><li>70% DMSO</li><li>30% ุฌู ุฃููููุฑุง</li><li>500mg ูุฑูููู ููู 50ml</li></ul><span class="text-sm">ููุณุชุฎุฏู ูุฑุฉ ูุณุงุกู.</span></li><li><strong>ููุงุฏุงุช Witch Hazel ูWhite Oak:</strong> 15 ุฏูููุฉ ููููุงู ุจูุบูู ูุจุฑุฏ.</li></ol></div><!-- ุงูุฎุทูุฉ 5 --><div class="p-4 bg-gray-50 rounded-lg"><h4 class="font-bold text-lg mb-2 text-[--primary-dark]">๐ง ุงูุฎุทูุฉ 5 | ุงููุบุทุณ ุงูุนูุงุฌู (Sitz Bath)</h4><ul class="list-disc list-inside pr-4"><li>10ml ููุฑูุณูู ุทุจู</li><li>10ml ุฒูุช ุงูููู</li><li>5 ูุทุฑุงุช Tea Tree Oil</li><li>5 ูุทุฑุงุช Cypress Oil</li></ul><p class="mt-2 text-sm">ููุณุชุฎุฏู ููููุงู 15โ20 ุฏูููุฉ.</p></div><!-- ุงูุฎุทูุฉ 6 --><div class="p-4 bg-gray-50 rounded-lg"><h4 class="font-bold text-lg mb-2 text-[--primary-dark]">๐ ุงูุฎุทูุฉ 6 | ุงูุชุบุฐูุฉ ุงูุนูุงุฌูุฉ ุงููุงุนูุฉ</h4><ul class="list-disc list-inside pr-4"><li>ุฃููุงู ูุจุงุชูุฉ (ุณูููููุ ุดูุงุ ูุชุงู)</li><li>3 ูุชุฑ ูุงุก ููููุงู</li><li>ุชุฌููุจ ุงูุณูุฑุ ุงูุฃูุจุงูุ ุงูููุญ</li></ul></div><!-- ุงูุฎุทูุฉ 7 --><div class="p-4 bg-gray-50 rounded-lg"><h4 class="font-bold text-lg mb-2 text-[--primary-dark]">๐ถโโ๏ธ ุงูุฎุทูุฉ 7 | ููุท ุงูุญูุงุฉ ุงููุงุนู</h4><ul class="list-disc list-inside pr-4"><li>ุชูุงุฑูู ุชููุณ 10 ุฏูุงุฆู</li><li>ูุดู 20 ุฏูููุฉ</li><li>ุฑูุน ุงูุณุงููู ุฃุซูุงุก ุงูููู</li><li>ุชุฌููุจ ุงูุฌููุณ ุงูุทููู</li></ul></div><!-- ุงูุฎุทูุฉ 8 --><div class="p-4 bg-gray-50 rounded-lg"><h4 class="font-bold text-lg mb-2 text-[--primary-dark]">๐ ุงูุฎุทูุฉ 8 | ูุนุงูุฌุฉ ุงูุฌุฐุฑ ุงูุดุนูุฑู ูุงูุทุงูู</h4><ul class="list-disc list-inside pr-4"><li><strong>ุชุฃูู ุชูุฑูุบ ุงูุญูุถ โ Pelvic Release Meditation</strong></li><li><strong>ุฑุณุงูุฉ ููููููู:</strong> "ุฃูุง ุขุณู ูุฃููู ูุชูุช..."</li></ul><p class="mt-2 text-sm">ุงูุดูุงุก ุฃุญูุงููุง ูู ุฅุทูุงู ุงูุญุฒูุ ูุง ููุท ุงูุจุฑุงุฒ.</p></div><!-- ูุตุงุฆุญ --><div class="p-4 bg-green-50 rounded-lg border-r-4 border-green-500"><h4 class="font-bold text-lg mb-2 text-green-800">โก ูุตุงุฆุญ ูุงูุฉ</h4><ul class="list-disc list-inside pr-4"><li>DMSO ููู ุงูุงุฎุชุฑุงูุ ูุธูู ุงูููุทูุฉ ุฌูุฏูุง ูุจู ุงุณุชุฎุฏุงูู.</li><li>Bloodroot ูุง ููุณุชุฎุฏู ุฅูุง ุจุฅุดุฑุงู ูุฎุชุต.</li><li>ูุฑูู ุทูุจุฑุฉ ูุนูุงู ูููุณุชุฎุฏู ูุน ุงูุนูุงุฌุงุช ุงูุชูููุฏูุฉ.</li><li>ุฏุงูููู ุนููููุง ูุซุจุช.</li></ul></div><div class="p-4 bg-red-50 rounded-lg border-r-4 border-red-500"><h4 class="font-bold text-lg mb-2 text-red-800">๐จ ุชุญุฐูุฑุงุช</h4><ul class="list-disc list-inside pr-4"><li>ูุง ุชุณุชุฎุฏู ููุงุฏ ุบูุฑ ููุซููุฉ.</li><li>ุฑุงูุจ ุงูุชุญุณุณ ูู ุงูููุฑูุณูู ูDMSO.</li><li>ุงุณุชุดุฑ ูุฎุชุตูุง ุนูุฏ ุงุณุชุฎุฏุงู Bloodroot.</li></ul></div><div class="p-4 bg-blue-50 rounded-lg border-r-4 border-blue-500"><h4 class="font-bold text-lg mb-2 text-blue-800">โ ุงูููุงุฆุฏ ุงููุชููุนุฉ</h4><ul class="list-disc list-inside pr-4"><li>ููู ุณุฑูุน ูููุฒูู</li><li>ุชูููู ุงูุฃูู ูุงูุญุฑูุงู</li><li>ุดูุงุก ุนููู ููุจูุงุณูุฑ ุงูุฏุงุฎููุฉ ูุงูุฎุงุฑุฌูุฉ</li><li>ุชุญุณูู ููุงุนุฉ ูุตุญุฉ ุงููุถู</li></ul></div><p class="text-center font-semibold text-[--primary-dark]">๐ ูุฐุง ุจุฑูุชูููู ุนูุงุฌู ุดุงูู ูุฌูุน ุจูู ุงูุทุจ ุงูุชูููุฏู ูุงูุญุฏูุซ ูุงูุนุดุจู ูุงูุชููููู โ ูููุตูู ุฅูู ุดูุงุก ุฌุฐุฑู ูุงุนู.<br>ุจุงูุดูุงุก ุงูุชุงู ุจุฅุฐู ุงููู. ๐ฟโจ</p>

            </div>
        </div>
    </div>
    <!-- END Hemorrhoid Protocol Modal -->

    <!-- Notification Toast -->
    <div id="notification-toast" class="hidden fixed top-20 right-5 py-3 px-6 rounded-lg shadow-xl z-[150] transition-transform duration-500 translate-x-full">
        <p id="notification-message" class="text-white"></p>
    </div>
    
    <script>
  window.openModal = id => document.getElementById(id)?.classList.remove('hidden');
  window.closeModal = id => document.getElementById(id)?.classList.add('hidden');
</script>

<script type="module">
        // --- SDK IMPORTS ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc, collection, addDoc, getDocs, query, limit } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // =========================================================================
        // !! โซููุชุงุญ API ุงููุญุฏุซ !!
        // =========================================================================
        const GEMINI_API_KEY = "AIzaSyCaev1GHwaZ7EqoxIyvRmgLehWs6Hq1gDw"; // <-- ุชู ุชุญุฏูุซ ุงูููุชุงุญ ููุง
        // =========================================================================

        // --- FIREBASE CONFIG ---
        const firebaseConfig = typeof __firebase_config !== 'undefined'
          ? JSON.parse(__firebase_config)
          : {
               apiKey: "AIzaSyBi2y64T-X1FNwbhv8ATQnF5xTZ3Pq4neg", // Fallback for local testing
               authDomain: "tibrasoul.firebaseapp.com",
               projectId: "tibrasoul",
               storageBucket: "tibrasoul.appspot.com",
               messagingSenderId: "920755760709",
               appId: "1:920755760709:web:778cd12e6edbd199827d2c"
            };
        
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        // --- FIREBASE INITIALIZATION ---
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const provider = new GoogleAuthProvider();
        
        // --- GLOBAL STATE ---
        let currentUser = null;
        let wheelChart;
        let journalChart; 

        // --- APP INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            initAuth();
            initSmartTools();
            initFrequencyGenerator();
            initGeneralUI();
            initNavigation();
            initCreativeEffects();
            initBlog();
            initWheelOfLife();
            initAudioPlayer();
            initBodyMap(); 
            initQuizzes(); 
            initJournal(); 
            showView('hero');
        });

        // --- NAVIGATION MODULE ---
        function initNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const viewName = link.dataset.view;
                    if (viewName) {
                        document.getElementById('mobile-menu').classList.add('hidden');
                        showView(viewName);
                    }
                });
            });
        }

        function showView(viewId) {
             document.querySelectorAll('.page-view').forEach(view => {
                 view.classList.add('hidden');
             });
             const targetView = document.getElementById('view-' + viewId);
             if(targetView) {
                 // Special case: when showing hero, also show featured services section below it
                 if(viewId === 'hero') {
                     const feat = document.getElementById('featured-services');
                     if(feat) feat.classList.remove('hidden');
                 }
                 targetView.classList.remove('hidden');
                 // Smoothly scroll to the revealed view so the user sees the change
                 targetView.scrollIntoView({behavior: 'smooth'});

                 const elementsToAnimate = targetView.querySelectorAll('.fade-in-up');
                 elementsToAnimate.forEach(el => el.classList.remove('is-visible'));
                 setTimeout(() => {
                     elementsToAnimate.forEach(el => {
                         el.classList.add('is-visible');
                     });
                 }, 100);
             }
        }

        // --- NOTIFICATION MODULE ---
        const notificationToast = document.getElementById('notification-toast');
        const notificationMessage = document.getElementById('notification-message');
        let notificationTimeout;
        function showNotification(message, type = 'error', duration = 4000) {
            if (notificationTimeout) clearTimeout(notificationTimeout);
            notificationMessage.textContent = message;
            notificationToast.className = 'fixed top-20 right-5 py-3 px-6 rounded-lg shadow-xl z-[150] transition-all duration-500 transform text-white';
            if (type === 'success') {
                notificationToast.classList.add('bg-green-500');
            } else if (type === 'warning') {
                notificationToast.classList.add('bg-yellow-500');
            } else {
                notificationToast.classList.add('bg-red-600');
            }
            notificationToast.classList.remove('hidden');
            notificationToast.classList.add('translate-x-full');
            setTimeout(() => {
                notificationToast.classList.remove('translate-x-full');
            }, 10);
            notificationTimeout = setTimeout(() => {
                notificationToast.classList.add('translate-x-full');
                 setTimeout(() => notificationToast.classList.add('hidden'), 500);
            }, duration);
        }

        // --- AUTHENTICATION MODULE ---
        function initAuth() {
            const loginBtns = [
                document.getElementById('login-btn'), 
                document.getElementById('login-btn-mobile'),
                document.getElementById('login-for-journal-btn')
            ];
            
            onAuthStateChanged(auth, user => {
                currentUser = user;
                const isLoggedIn = !!user;
                
                document.getElementById('login-btn').classList.toggle('hidden', isLoggedIn);
                document.getElementById('login-btn-mobile').classList.toggle('hidden', isLoggedIn);
                document.getElementById('profile-section-nav').classList.toggle('hidden', !isLoggedIn);
                document.getElementById('profile-section-nav').classList.toggle('flex', isLoggedIn);
                document.getElementById('profile-link-mobile').classList.toggle('hidden', !isLoggedIn);

                if (isLoggedIn) {
                    document.getElementById('user-avatar').src = user.photoURL || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM1YTZlNWEiLz4KPHRleHQgeD0iNTAlIiB5PSI1MCUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjIwIiBmaWxsPSJ3aGl0ZSI+VTwvdGV4dD4KPC9zdmc+Cg==';
                    document.getElementById('welcome-message').textContent = `ูุฑุญุจุงู ุจู ูู ุฃุณุฑุชูุงุ ${user.displayName || 'ุตุฏููู'}`;
                    loadPatientFileData();
                    toggleJournalView(true);
                    loadJournalEntries(); 
                } else {
                    document.getElementById('saved-results-container').innerHTML = '<p>ุงูุฑุฌุงุก ุชุณุฌูู ุงูุฏุฎูู ูุนุฑุถ ุณุฌูุงุชู ุงููุญููุธุฉ.</p>';
                    toggleJournalView(false);
                }
            });

            const handleLogin = () => {
                signInWithPopup(auth, provider).catch(error => {
                    console.error("Google Login Error:", error);
                    showNotification("ูุดู ุชุณุฌูู ุงูุฏุฎูู. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.", "error");
                });
            }
            loginBtns.forEach(btn => {
                if(btn) btn.addEventListener('click', handleLogin)
            });
        }
        
        // --- FIRESTORE MODULE ---
        async function saveResultToFirestore(toolName, resultData) {
            if (!currentUser) {
                showNotification('ุงูุฑุฌุงุก ุชุณุฌูู ุงูุฏุฎูู ูุญูุธ ูุชุงุฆุฌู.', 'warning'); 
                return;
            }
            const resultId = `${toolName.replace(/\s+/g, '-')}-${new Date().getTime()}`;
            const resultRef = doc(db, 'artifacts', appId, 'users', currentUser.uid, 'toolResults', resultId);
            
            try {
                await setDoc(resultRef, {
                    tool: toolName,
                    data: resultData,
                    createdAt: new Date()
                });
                const saveBtn = document.getElementById('save-result-btn') || document.getElementById('save-wheel-result-btn');
                if(saveBtn) {
                   saveBtn.textContent = 'ุชู ุงูุญูุธ ุจูุฌุงุญ!';
                   saveBtn.disabled = true;
                }
                showNotification('ุชู ุญูุธ ุงููุชูุฌุฉ ุจูุฌุงุญ ูู ูููู!', 'success');
                loadPatientFileData();
            } catch (error) {
                console.error("Error saving document: ", error);
                showNotification('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงููุชูุฌุฉ.', 'error');
            }
        }

        async function loadPatientFileData() {
            if (!currentUser) return;
            const container = document.getElementById('saved-results-container');
            container.innerHTML = '<p>ุฌุงุฑู ุชุญููู ุณุฌูุงุชู...</p>';
            try {
                const resultsCol = collection(db, 'artifacts', appId, 'users', currentUser.uid, 'toolResults');
                const q = query(resultsCol, limit(50));
                const querySnapshot = await getDocs(q);

                if (querySnapshot.empty) {
                    container.innerHTML = '<p>ูุง ุชูุฌุฏ ูุชุงุฆุฌ ูุญููุธุฉ ุจุนุฏ. ุงุณุชุฎุฏู ุฅุญุฏู ุงูุฃุฏูุงุช ุงูุฐููุฉ ูุงุญูุธ ุงููุชูุฌุฉ ูุชุธูุฑ ููุง.</p>';
                    return;
                }
                
                const results = [];
                querySnapshot.forEach(doc => {
                    results.push(doc.data());
                });

                results.sort((a, b) => b.createdAt.toDate().getTime() - a.createdAt.toDate().getTime());
                
                let html = '';
                results.forEach(result => {
                    html += `
                        <div class="p-4 bg-gray-50 border-r-4 border-gray-300 rounded-md">
                            <h4 class="font-bold text-lg">${result.tool}</h4>
                            <p class="text-sm text-gray-500 mb-2">ุชุงุฑูุฎ ุงูุญูุธ: ${result.createdAt.toDate().toLocaleString('ar-EG')}</p>
                            <div class="text-gray-700 whitespace-pre-wrap">${result.data}</div>
                        </div>`;
                });
                container.innerHTML = html;
            } catch (error) {
                console.error("Error loading patient data:", error);
                container.innerHTML = '<p class="text-red-500">ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุณุฌูุงุชู. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.</p>';
            }
        }
        
        // --- Central API Request Handler ---
        async function handleApiRequest(prompt, resultsDivId, apiKey) {
            const resultsDiv = document.getElementById(resultsDivId);
            if (!resultsDiv) {
                console.error(`Element with ID ${resultsDivId} not found.`);
                return null;
            }
            
            resultsDiv.classList.remove('hidden');
            resultsDiv.style.opacity = '1';
            resultsDiv.innerHTML = `<div class="ai-loader"><div class="ai-loader-dots"><div class="dot1"></div><div class="dot2"></div><div class="dot3"></div></div><p class="mt-4 text-[--primary-color]">ุฌุงุฑู ุงูุชุญููู...</p></div>`;
            
            if (!apiKey || apiKey === "YOUR_API_KEY_HERE" || apiKey.length < 30) {
                showNotification("ููุชุงุญ Google API ุบูุฑ ููุฌูุฏ ุฃู ุบูุฑ ุตุญูุญ. ูุฑุฌู ุฅุถุงูุชู ูู ุงูููุฏ.", "error");
                resultsDiv.innerHTML = `<p class="text-center text-red-500">ุฎุทุฃ: ููุชุงุญ Google API ูุทููุจ ูุชุดุบูู ูุฐู ุงูุฃุฏุงุฉ.</p>`;
                return null;
            }

            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload)
                });
                if (!response.ok) {
                    const errorData = await response.json();
                    console.error("API Error Response:", errorData);
                    throw new Error(`HTTP error! status: ${response.status} - ${errorData.error?.message || 'Unknown error'}`);
                }
                const data = await response.json();
                if (data.candidates && data.candidates[0].content && data.candidates[0].content.parts && data.candidates[0].content.parts.length > 0) {
                    return data.candidates[0].content.parts[0].text;
                } else { throw new Error("Invalid API response structure"); }
            } catch (error) {
                console.error("API Request Error:", error);
                resultsDiv.innerHTML = `<p class="text-center text-red-500">ุญุฏุซ ุฎุทุฃ: ${error.message}. ูุฑุฌู ุงูุชุญูู ูู ููุชุงุญ API ูุตูุงุญูุงุชู.</p>`;
                return null;
            }
        }


        // --- SMART TOOLS MODULE ---
        function initSmartTools() {
            const toolModal = document.getElementById('tool-modal');
            const modalContent = document.getElementById('modal-content');
            
            const showModal = (content) => {
                modalContent.innerHTML = content;
                toolModal.classList.remove('hidden');
                setTimeout(() => {
                    toolModal.classList.add('is-open');
                    modalContent.parentElement.classList.add('scale-100');
                }, 10);
                const closeButton = modalContent.querySelector('.close-modal-btn');
                if (closeButton) closeButton.addEventListener('click', hideModal);
            };

            const hideModal = () => {
                toolModal.classList.remove('is-open');
                modalContent.parentElement.classList.remove('scale-100');
                setTimeout(() => {
                    toolModal.classList.add('hidden');
                    modalContent.innerHTML = '';
                }, 300);
            };
            
            toolModal.addEventListener('click', e => {
                if (e.target === toolModal) hideModal();
            });

            document.querySelectorAll('.smart-tool-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const tool = button.dataset.tool;
                    let modalHTML = '';
                    switch(tool) {
                        case 'protocols':
                            modalHTML = `
                                <button class="close-modal-btn absolute top-4 left-4 text-2xl text-gray-500 hover:text-gray-800">&times;</button>
                                <h3 class="text-2xl font-bold mb-4 text-center text-[--primary-color]">๐งช ุจุฑูุชููููุงุช ุทูุจุฑุง ุงูุนูุงุฌูุฉ</h3>
                                <p class="text-center text-gray-600 mb-6">ุจุฑูุชููููุงุช ุนูุงุฌูุฉ ูุชูุงููุฉ ุตููููุง ุฏ. ุนูุฑ ููุฑุงููุฉ ุฑุญูุฉ ุงูุดูุงุก ุงูุทุจูุนูุฉ</p>
                                <div class="grid gap-4 sm:grid-cols-2">
                                    <div class="p-6 bg-white rounded-lg shadow border text-right flex flex-col justify-between">
                                        <div>
                                            <h4 class="font-bold text-lg mb-2">๐โโ๏ธ ุจุฑูุชูููู ุชูููุฉ ูุชุบุฐูุฉ ุงูุดุนุฑ ูุฅุฒุงูุฉ ุงูุดูุจ ูุงูุตูุน</h4>
                                            <p class="text-sm mb-4">ุจุฑูุชูููู ุดุงูู ูุชูููุฉ ุงูุฌุฐูุฑุ ุชุฃุฎูุฑ ุงูุดูุจุ ูุชุญููุฒ ููู ุงูุดุนุฑ ุงูุทุจูุนู</p>
                                        </div>
                                        <button class="btn btn-secondary w-full mt-auto" onclick="openModal('hair-protocol-modal')">ุนุฑุถ ุงูุชูุงุตูู</button>
                                    </div>
                                    <div class="p-6 bg-white rounded-lg shadow border text-right flex flex-col justify-between">
                                        <div>
                                            <h4 class="font-bold text-lg mb-2">๐ฉบ ุจุฑูุชูููู ุงูุจูุงุณูุฑ ุงููุชูุงูู</h4>
                                            <p class="text-sm mb-4">ุนูุงุฌ ุดุงูู ููุจูุงุณูุฑ ุนุจุฑ ุงูุฏูุฌ ุจูู ุงูุทุจ ุงูุญุฏูุซุ ุงูุฃุนุดุงุจุ ุงูููููุงุชุ ูุงูุนูุงุฌ ุงูุทุงููโุงูุดุนูุฑู. ุจุฅุดุฑุงู ุฏ. ุนูุฑ.</p>
                                        </div>
                                        <button class="btn btn-secondary w-full mt-auto" onclick="openModal('hemorrhoid-protocol-modal')">ุนุฑุถ ุงูุชูุงุตูู</button>
                                    </div>
                                    <div class="p-6 bg-gray-50 rounded-lg shadow border flex items-center justify-center text-center">
                                        <h4 class="font-bold">๐ง ุจุฑูุชูููู ุตูุงุก ุงูุฏูุงุบ<br><span class="text-sm text-gray-500">ูุฑูุจูุง</span></h4>
                                    </div>
                                    <div class="p-6 bg-gray-50 rounded-lg shadow border flex items-center justify-center text-center">
                                        <h4 class="font-bold">๐ฅ ุจุฑูุชูููู ุชูููู ุงูุงูุชูุงุจ<br><span class="text-sm text-gray-500">ูุฑูุจูุง</span></h4>
                                    </div>
                                    <div class="p-6 bg-gray-50 rounded-lg shadow border flex items-center justify-center text-center">
                                        <h4 class="font-bold">๐ฟ ุจุฑูุชูููู ุชูุธูู ุงูููููู<br><span class="text-sm text-gray-500">ูุฑูุจูุง</span></h4>
                                    </div>
                                </div>`;
                            showModal(modalHTML);
                            break;
                        case 'hair-protocol':
                            modalHTML = `
                                <button class="close-modal-btn absolute top-4 left-4 text-2xl text-gray-500 hover:text-gray-800">&times;</button>
                                <h3 class="text-2xl font-bold mb-4 text-center text-[--primary-color]">ุงูุจุฑูุชูููู ุงูุดูููู ูุนูุงุฌ ุงูุดุนุฑ</h3>
                                <div class="text-right space-y-4">
                                    <p class="text-center text-gray-600 mb-4">ุจุฑูุชูููู ุนูุงุฌู ุดุงูู ูุชุฃุฎูุฑ ุงูุดูุจ ูุชุญููุฒ ุชุตุจุบ ุงูุดุนุฑ ูุชูููู ุงูุชุณุงูุท.</p>
                                    
                                    <div class="p-4 bg-gray-50 rounded-lg">
                                        <h4 class="font-bold text-lg mb-2 text-[--primary-dark]">ุงูุฌุฒุก 1: ุงูุฒููุช ุงูุนูุงุฌูุฉ ุงูููุถุนูุฉ (2-3 ูุฑุงุช ุฃุณุจูุนูุงู)</h4>
                                        <p><strong>ุงูุชุฑููุจุฉ:</strong></p>
                                        <ul class="list-disc list-inside pr-4">
                                            <li>ุฒูุช ุฅูููู ุงูุฌุจู: 10 ูู</li>
                                            <li>ุฒูุช ุงููุนูุงุน: 5 ูู</li>
                                            <li>ุฒูุช ุงูููููู: 5 ูู</li>
                                            <li>ุฒูุช ุงูุณูุณู (ูุฒูุช ุญุงูู): 30 ูู</li>
                                            <li>ุฒูุช ุงูุฎุฑูุน (ุงุฎุชูุงุฑู ููุชูุซูู): 10 ูู</li>
                                            <li>ููุฑูุณูู ุทุจู ุฃู ุจุงุฑุงููู ุทุจู: 5 ูู</li>
                                        </ul>
                                        <p class="mt-2"><strong>ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู:</strong> ุงูุฒุฌ ุงูููููุงุชุ ุฏูุฆูุง ููููุงูุ ุฏูู ูุฑูุฉ ุงูุฑุฃุณ ูู 5-10 ุฏูุงุฆูุ ูุงุชุฑููุง ูุณุงุนุชูู ุนูู ุงูุฃูู ูุจู ุบุณููุง ุจุดุงูุจู ุทุจูุนู.</p>
                                    </div>

                                    <div class="p-4 bg-gray-50 rounded-lg">
                                        <h4 class="font-bold text-lg mb-2 text-[--primary-dark]">ุงูุฌุฒุก 2: ููููุงุช ุบุฐุงุฆูุฉ ููููุฉ</h4>
                                         <ul class="list-disc list-inside pr-4">
                                            <li><strong>ุตุจุงุญูุง ุจุนุฏ ุงููุทูุฑ:</strong> Zinc (30-50 ููุบ) ูุน Vitamin C (Liposomal) (500-1000 ููุบ)</li>
                                            <li><strong>ุจุนุฏ ุณุงุนุชูู ูู ุงูุฒูู:</strong> Copper (2-3 ููุบ)</li>
                                            <li><strong>ุตุจุงุญูุง ุฃู ูุณุงุกู:</strong> Fo-Ti (ูุจุณููุฉ 500-1000 ููุบ) - <span class="text-red-500 font-bold">ููุตุญ ุจุนูู ุชุญููู ูุธุงุฆู ูุจุฏ.</span></li>
                                        </ul>
                                    </div>
                                    
                                    <div class="p-4 bg-gray-50 rounded-lg">
                                        <h4 class="font-bold text-lg mb-2 text-[--primary-dark]">ุงูุฌุฒุก 3: ููุงุน ุงูุดุนุฑ ุงูุทุจูุนู (ูุฑุฉ ุฃุณุจูุนูุงู)</h4>
                                        <p><strong>ุงูุชุฑููุจุฉ:</strong> ููุนูุฉ ูุจูุฑุฉ ุณุฏุฑ ุจูุฏุฑุฉุ ููุนูุฉ ุตุบูุฑุฉ ุนูุจุฑ ูุญูุ ูุตู ููุนูุฉ ุตุบูุฑุฉ ุจุฐูุฑ ุงูุฎูุฉ ุงููุทุญููุฉุ 2 ููุนูุฉ ูุจูุฑุฉ ุฎู ุชูุงุญ ุทุจูุนูุ ููุงุก ุฏุงูุฆ ููุนุฌู.</p>
                                        <p class="mt-2"><strong>ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู:</strong> ููุถุน ุนูู ุงููุฑูุฉ ูุงูุดุนุฑ ููุฏุฉ 30-60 ุฏูููุฉ ุซู ูุบุณู ุฌูุฏุงู.</p>
                                    </div>

                                    <div class="p-4 bg-gray-50 rounded-lg">
                                        <h4 class="font-bold text-lg mb-2 text-[--primary-dark]">ุงูุฌุฒุก 4: ูุงุฏุฉ ORMUS</h4>
                                        <p><strong>ุงูุฌุฑุนุฉ:</strong> ููุนูุฉ ุตุบูุฑุฉ ููููุงู ุตุจุงุญุงู ุนูู ูุนุฏุฉ ูุงุฑุบุฉ ูู ูุตุฏุฑ ููุซูู.</p>
                                        <p><strong>ุงูููุงุฆุฏ:</strong> ูุฒูุฏ ุงูุชุฑููุฒุ ููุงุฒู ุงูุทุงูุงุชุ ููุญูุฒ ุชุฌุฏุฏ ุงูุฎูุงูุง ุงูุตุจุบูุฉ.</p>
                                        <p class="text-red-500 font-bold mt-2">ุชุญุฐูุฑ: ูุง ุชุณุชุฎุฏู ORMUS ูุน ุฃุฏููุฉ ููุณูุฉ ุฃู ููุงุนูุฉ ุฏูู ุงุณุชุดุงุฑุฉ ุทุจูุจ.</p>
                                    </div>

                                    <div class="p-4 bg-green-50 rounded-lg border-r-4 border-green-500">
                                        <h4 class="font-bold text-lg mb-2 text-green-800">ูุตุงุฆุญ ุนุงูุฉ ุฏุงุนูุฉ</h4>
                                        <ul class="list-disc list-inside pr-4">
                                            <li>ุงุชุจุน ูุธุงููุง ุบุฐุงุฆููุง ุบูููุง ุจููุชุงูููุงุช B12ุ ุญูุถ ุงููููููุ ูุงูุณููููุง.</li>
                                            <li>ุฎูู ุงูุชูุชุฑุ ูุฃู ุงูุฅุฌูุงุฏ ูุฒูุฏ ูู ุงูุดูุจ.</li>
                                            <li>ุชุฌูุจ ุงูุตุจุบุงุช ุงูููููุงุฆูุฉ ุงููููุฉ ุฃุซูุงุก ุงูุจุฑูุชูููู.</li>
                                            <li>ุฃูุซุฑ ูู ุดุฑุจ ุงูุนุตุงุฆุฑ ุงูุฎุถุฑุงุก.</li>
                                        </ul>
                                    </div>
                                </div>`;
                             break;
                         case 'blood-test-decoder':
                             modalHTML = `
                                 <h3 class="text-2xl font-bold mb-4 text-[--primary-color]">ูู ุดูุฑุฉ ุชุญุงููู ุงูุฏู</h3>
                                 <p class="text-gray-600 mb-6">ุงูุตู ูุชุงุฆุฌ ุชุญุงููู ุฏูู ููุง. ุณุชููู ุงูุฃุฏุงุฉ ุจุชุญููููุง ูู ููุธูุฑ ุงูุทุจ ุงููุธูููุ ูุน ุงูุชุฑููุฒ ุนูู ุงููุนุฏูุงุช ุงููุซุงููุฉ ูููุณ ููุท ุงูุทุจูุนูุฉ.</p>
                                 <form id="tool-form">
                                     <div class="mb-4">
                                         <label for="blood-test-data" class="block text-right font-semibold mb-2">ูุชุงุฆุฌ ุงูุชุญููู</label>
                                         <textarea id="blood-test-data" rows="10" class="w-full p-2 border rounded-md" placeholder="ูุซุงู:&#10;Vitamin D (25-OH) ..... 21 ng/mL&#10;Ferritin ................ 35 ng/mL&#10;TSH ..................... 3.8 mIU/L"></textarea>
                                     </div>
                                     <div class="text-left">
                                         <button type="button" class="close-modal-btn btn btn-secondary py-2 px-6 rounded-full">ุฅุบูุงู</button>
                                         <button type="submit" class="btn btn-primary text-white py-2 px-6 rounded-full mr-2">ุญูู ูุชุงุฆุฌู</button>
                                     </div>
                                 </form>
                                 <div id="tool-results" class="mt-6 hidden"></div>`;
                             break;
                         case 'diagnosis':
                             modalHTML = `
                                 <h3 class="text-2xl font-bold mb-4 text-[--primary-color]">ุชุดุฎูุต ูุชุนุฏุฏ ุงูุฃุจุนุงุฏ</h3>
                                 <p class="text-gray-600 mb-6">ูุฑุฌู ุฅุฏุฎุงู ุงููุนูููุงุช ุงูุชุงููุฉ ุจุฃูุจุฑ ูุฏุฑ ูููู ูู ุงูุชูุตูู.</p>
                                 <form id="tool-form">
                                     <div class="mb-4">
                                         <label for="symptoms" class="block text-right font-semibold mb-2">1. ุงูุฃุนุฑุงุถ ุงูุฌุณุฏูุฉ</label>
                                         <textarea id="symptoms" rows="3" class="w-full p-2 border rounded-md" placeholder="ูุซุงู: ุตุฏุงุน ูุตููุ ุฃูู ูู ุงูููุงุตู..."></textarea>
                                     </div>
                                     <div class="mb-4">
                                         <label for="feelings" class="block text-right font-semibold mb-2">2. ุงููุดุงุนุฑ ูุงูุฃููุงุฑ</label>
                                         <textarea id="feelings" rows="3" class="w-full p-2 border rounded-md" placeholder="ูุซุงู: ุฃุดุนุฑ ุจููู ุฏุงุฆูุ ุฃููุงุฑ ุณูุจูุฉ..."></textarea>
                                     </div>
                                     <div class="mb-4">
                                         <label for="lifestyle" class="block text-right font-semibold mb-2">3. ููุท ุงูุญูุงุฉ</label>
                                         <textarea id="lifestyle" rows="3" class="w-full p-2 border rounded-md" placeholder="ูุซุงู: ูููู ูุชูุทุนุ ุฃุนุชูุฏ ุนูู ุงููุฌุจุงุช ุงูุณุฑูุนุฉ..."></textarea>
                                     </div>
                                     <div class="text-left">
                                         <button type="button" class="close-modal-btn btn btn-secondary py-2 px-6 rounded-full">ุฅุบูุงู</button>
                                         <button type="submit" class="btn btn-primary text-white py-2 px-6 rounded-full mr-2">ุงุจุฏุฃ ุงูุชุญููู</button>
                                     </div>
                                 </form>
                                 <div id="tool-results" class="mt-6 hidden"></div>`;
                             break;
                         case 'treatment-plan':
                             modalHTML = `
                                 <h3 class="text-2xl font-bold mb-4 text-[--primary-color]">ูุตูุฉ ุนูุงุฌูุฉ ุดููููุฉ ุฐููุฉ</h3>
                                 <p class="text-gray-600 mb-6">ุฃุฏุฎู ุงูุชุดุฎูุต ุฃู ุงูุฃุนุฑุงุถ ุงูุฑุฆูุณูุฉุ ูุน ูุนูููุงุช ุฅุถุงููุฉุ ููุญุตูู ุนูู ุฎุทุฉ ุนูุงุฌูุฉ ููุชุฑุญุฉ.</p>
                                 <form id="tool-form">
                                     <div class="mb-4">
                                         <label for="diagnosis-input" class="block text-right font-semibold mb-2">1. ุงูุชุดุฎูุต ุฃู ุงูุฃุนุฑุงุถ ุงูุฑุฆูุณูุฉ</label>
                                         <textarea id="diagnosis-input" rows="4" class="w-full p-2 border rounded-md" placeholder="ูุซุงู: ุชุดุฎูุต ุจุงูููููู ุงูุนุตุจูุ ูุน ููู ูุชุนุจ ูุณุชูุฑ"></textarea>
                                     </div>
                                     <div class="text-left">
                                         <button type="button" class="close-modal-btn btn btn-secondary py-2 px-6 rounded-full">ุฅุบูุงู</button>
                                         <button type="submit" class="btn btn-primary text-white py-2 px-6 rounded-full mr-2">ุตูู ุฎุทุชู</button>
                                     </div>
                                 </form>
                                 <div id="tool-results" class="mt-6 hidden"></div>`;
                             break;
                         case 'awareness-exercise':
                              modalHTML = `
                                 <h3 class="text-2xl font-bold mb-4 text-[--primary-color]">ุชูุฑูู ูุนู ููุฌูู</h3>
                                 <p class="text-gray-600 mb-6">ุตู ุงููุดุงุนุฑ ุงูุชู ุชูุฑ ุจูุง ุฃู ุงูุตุฏูุฉ ุงูุชู ุชูุฏ ุงูุนูู ุนูููุงุ ูุณูููู ุงููุณุงุนุฏ ุงูุฐูู ุจุฅูุดุงุก ุชูุฑูู ูุชุงุจุฉ ููุฌู ูู.</p>
                                 <form id="tool-form">
                                     <div class="mb-4">
                                         <label for="repressed-feelings" class="block text-right font-semibold mb-2">ุงููุดุงุนุฑ ุงูููุจูุชุฉ ุฃู ุงูุตุฏูุฉ</label>
                                         <textarea id="repressed-feelings" rows="4" class="w-full p-2 border rounded-md" placeholder="ูุซุงู: ุฃุดุนุฑ ุจุบุถุจ ููุจูุช ุชุฌุงู ูููู ูุนูู..."></textarea>
                                     </div>
                                     <div class="text-left">
                                         <button type="button" class="close-modal-btn btn btn-secondary py-2 px-6 rounded-full">ุฅุบูุงู</button>
                                         <button type="submit" class="btn btn-primary text-white py-2 px-6 rounded-full mr-2">ุฃูุดุฆ ุงูุชูุฑูู</button>
                                     </div>
                                 </form>
                                 <div id="tool-results" class="mt-6 hidden"></div>`;
                             break;
                         case 'consultation':
                              modalHTML = `
                                 <h3 class="text-2xl font-bold mb-4 text-[--primary-color]">ุงุณุชุดุงุฑุฉ ุทุจูุฉ ุขููุฉ</h3>
                                 <p class="text-gray-600 mb-6">ุงุทุฑุญ ุณุคุงูู ุนูู ูุณุงุนุฏ ุฏ. ุนูุฑ ุงูุฐูู ููุญุตูู ุนูู ุฅุฌุงุจุงุช ุชุณุชูุฏ ุฅูู ูุจุงุฏุฆ ุงูุทุจ ุงูุดูููู.</p>
                                 <form id="tool-form">
                                     <div class="mb-4">
                                         <label for="question" class="block text-right font-semibold mb-2">ุณุคุงูู</label>
                                         <textarea id="question" rows="4" class="w-full p-2 border rounded-md" placeholder="ูุซุงู: ูุง ูู ุฃูุถู ุงูุทุฑู ูุชูููุฉ ุงูููุงุนุฉ ุจุดูู ุทุจูุนูุ"></textarea>
                                     </div>
                                     <div class="text-left">
                                         <button type="button" class="close-modal-btn btn btn-secondary py-2 px-6 rounded-full">ุฅุบูุงู</button>
                                         <button type="submit" class="btn btn-primary text-white py-2 px-6 rounded-full mr-2">ุงุญุตู ุนูู ุงูุฅุฌุงุจุฉ</button>
                                     </div>
                                 </form>
                                 <div id="tool-results" class="mt-6 hidden"></div>`;
                             break;
                         case 'supplements':
                              modalHTML = `
                                 <h3 class="text-2xl font-bold mb-4 text-[--primary-color]">ุชูุตูุฉ ููููุงุช ุบุฐุงุฆูุฉ</h3>
                                 <p class="text-gray-600 mb-6">ุตู ุฃุนุฑุงุถู ุฃู ุงูุตู ูุชุงุฆุฌ ุชุญููู ุงูุฏู ููุงุ ูุณูููู ุงููุณุงุนุฏ ุงูุฐูู ุจุชุญููููุง ูุชูุฏูู ุชูุตูุงุช ููููููุงุช ุงูุบุฐุงุฆูุฉ.</p>
                                 <form id="tool-form">
                                     <div class="mb-4">
                                         <label for="analysis-data" class="block text-right font-semibold mb-2">ุงูุฃุนุฑุงุถ ุฃู ูุชุงุฆุฌ ุงูุชุญููู</label>
                                         <textarea id="analysis-data" rows="5" class="w-full p-2 border rounded-md" placeholder="ูุซุงู: ุฃุนุงูู ูู ุชุณุงูุท ุงูุดุนุฑุ ุฅุฑูุงู ูุณุชูุฑ..."></textarea>
                                     </div>
                                     <div class="text-left">
                                         <button type="button" class="close-modal-btn btn btn-secondary py-2 px-6 rounded-full">ุฅุบูุงู</button>
                                         <button type="submit" class="btn btn-primary text-white py-2 px-6 rounded-full mr-2">ุงุญุตู ุนูู ุชูุตูุฉ</button>
                                     </div>
                                 </form>
                                 <div id="tool-results" class="mt-6 hidden"></div>`;
                             break;
                         case 'intention':
                              modalHTML = `
                                 <h3 class="text-2xl font-bold mb-4 text-[--primary-color]">ููุฉ ุงูููู</h3>
                                 <p class="text-gray-600 mb-6">ุงุญุตู ุนูู ููุฉ ุฅูุฌุงุจูุฉ ููุฑูุฒุฉ ูุฏุนูู ูู ูููู.</p>
                                 <form id="tool-form">
                                     <div class="text-left">
                                         <button type="button" class="close-modal-btn btn btn-secondary py-2 px-6 rounded-full">ุฅุบูุงู</button>
                                         <button type="submit" class="btn btn-primary text-white py-2 px-6 rounded-full mr-2">ุฃุนุทูู ููุชู</button>
                                     </div>
                                 </form>
                                 <div id="tool-results" class="mt-6 hidden"></div>`;
                             break;
                    }
                    showModal(modalHTML);
                    const form = document.getElementById('tool-form');
                    if (form) form.addEventListener('submit', (e) => handleToolSubmit(e, tool));
                });
            });
            
            async function handleToolSubmit(e, tool) {
                e.preventDefault();
                let prompt = '', toolTitle = '', rawInputForSaving = '';
                 switch(tool) {
                       case 'blood-test-decoder':
                           toolTitle = "ูู ุดูุฑุฉ ุชุญุงููู ุงูุฏู";
                           const bloodTestData = document.getElementById('blood-test-data').value;
                           rawInputForSaving = `ุจูุงูุงุช ุงูุชุญููู: ${bloodTestData}`;
                           if (!bloodTestData) { showNotification('ูุฑุฌู ูุตู ูุชุงุฆุฌ ุงูุชุญููู.', 'warning'); return; }
                           prompt = `Act as a functional medicine expert analyzing blood test results. The user has provided these results: "${bloodTestData}". Your task is to:
1.  Identify key markers (like Vitamin D, Ferritin, TSH, etc.).
2.  For each marker, state its functional/optimal range (which is often stricter than the standard lab range).
3.  Compare the user's result to the optimal range.
4.  Explain in simple Arabic what this result means for their health from a holistic perspective (e.g., how low ferritin affects energy and hair).
5.  Provide actionable recommendations including specific foods, lifestyle changes, and potential supplements to help them reach the optimal range.
Structure the output in Arabic with clear headings for each marker using markdown. Start with a disclaimer that this is not a medical diagnosis.`;
                           break;
                       case 'diagnosis':
                           toolTitle = "ุชุดุฎูุต ูุชุนุฏุฏ ุงูุฃุจุนุงุฏ";
                           const symptoms = document.getElementById('symptoms').value;
                           const feelings = document.getElementById('feelings').value;
                           const lifestyle = document.getElementById('lifestyle').value;
                           rawInputForSaving = `ุงูุฃุนุฑุงุถ: ${symptoms}\nุงููุดุงุนุฑ: ${feelings}\nููุท ุงูุญูุงุฉ: ${lifestyle}`;
                           if (!symptoms && !feelings && !lifestyle) { showNotification('ูุฑุฌู ุฅุฏุฎุงู ุจุนุถ ุงููุนูููุงุช ููุชุญููู.', 'warning'); return; }
                           prompt = `Act as a holistic medicine expert. Analyze the user's input based on a tripartite model (organic, emotional, energetic) and provide a probable diagnosis or assessment. User Input -> Symptoms: "${symptoms}", Feelings: "${feelings}", Lifestyle: "${lifestyle}". Structure the output as a clean, readable text in Arabic with three main sections: "ุงูุงุญุชูุงู ุงูุนุถูู", "ุงูุฌุฐุฑ ุงูุดุนูุฑู", and "ุงูุชูุงุฒู ุงูุทุงูู ุงููุฎุชู". Use markdown for formatting.`;
                           break;
                       case 'treatment-plan':
                           toolTitle = "ูุตูุฉ ุนูุงุฌูุฉ ุดููููุฉ";
                           const diagnosisInput = document.getElementById('diagnosis-input').value;
                           rawInputForSaving = `ุงูุชุดุฎูุต: ${diagnosisInput}`;
                           if (!diagnosisInput) { showNotification('ูุฑุฌู ุฅุฏุฎุงู ุงูุชุดุฎูุต ุฃู ุงูุฃุนุฑุงุถ ุงูุฑุฆูุณูุฉ.', 'warning'); return; }
                           prompt = `As a functional medicine doctor, design a comprehensive 21-day holistic treatment plan for a patient with the following diagnosis/symptoms: "${diagnosisInput}". The plan should include sections for: "ุงูุฃุฏููุฉ ุฃู ุงูููููุงุช ุงูููุชุฑุญุฉ", "ุชูุตูุงุช ุงูุชุบุฐูุฉ", "ุชูุงุฑูู ุชุฃูู ุฃู ูุนู", and "ูุตุงุฆุญ ุทุงูุฉ ูููุท ุญูุงุฉ". Present the output in a well-structured, easy-to-read format in Arabic using markdown.`;
                           break;
                       case 'awareness-exercise':
                           toolTitle = "ุชูุฑูู ูุนู ููุฌูู";
                           const repressedFeelings = document.getElementById('repressed-feelings').value;
                           rawInputForSaving = `ุงููุดุงุนุฑ: ${repressedFeelings}`;
                           if (!repressedFeelings) { showNotification('ูุฑุฌู ูุตู ูุดุงุนุฑู.', 'warning'); return; }
                           prompt = `You are a therapeutic writing coach. Based on the user's stated repressed feelings: "${repressedFeelings}", create a guided expressive writing exercise. The output should be in Arabic and include: 1. A gentle introduction. 2. A series of 3-5 reflective writing prompts. 3. A concluding guidance on how to process what they've written. Format the output with clear headings using markdown.`;
                           break;
                       case 'consultation':
                           toolTitle = "ุงุณุชุดุงุฑุฉ ุทุจูุฉ ุขููุฉ";
                           const question = document.getElementById('question').value;
                           rawInputForSaving = `ุงูุณุคุงู: ${question}`;
                           if (!question) { showNotification('ูุฑุฌู ูุชุงุจุฉ ุณุคุงูู.', 'warning'); return; }
                           prompt = `As a holistic medicine assistant for Dr. Omar, answer the following question in Arabic, incorporating principles of holistic, functional, and spiritual medicine where appropriate. Question: "${question}"`;
                           break;
                       case 'supplements':
                           toolTitle = "ุชูุตูุฉ ููููุงุช ุบุฐุงุฆูุฉ";
                           const analysisData = document.getElementById('analysis-data').value;
                           rawInputForSaving = `ุงูุจูุงูุงุช: ${analysisData}`;
                           if (!analysisData) { showNotification('ูุฑุฌู ุฅุฏุฎุงู ุงูุฃุนุฑุงุถ ุฃู ูุชุงุฆุฌ ุงูุชุญููู.', 'warning'); return; }
                           prompt = `As a functional medicine expert, analyze the provided symptoms or blood test results: "${analysisData}" and recommend the most effective supplements. Include recommended timing (e.g., with food, in the morning) and any potential warnings. The output should be a clear, bulleted list in Arabic.`;
                           break;
                       case 'intention':
                           toolTitle = "ููุฉ ุงูููู";
                           rawInputForSaving = `ุทูุจ ููุฉ ุงูููู`;
                           prompt = `As a spiritual wellness coach, provide a supportive, healing daily intention for the user. The output should be a single, powerful intention sentence in Arabic, followed by a short (1-2 sentences) "ุชูุฑูู ุฏุนู ุฏุงุฎูู" to help them embody that intention.`;
                           break;
                }
                const responseText = await handleApiRequest(prompt, 'tool-results', GEMINI_API_KEY);
                if (responseText) {
                    const resultsDiv = document.getElementById('tool-results');
                    resultsDiv.innerHTML = `
                        <div id="result-content" class="p-4 bg-gray-50 rounded-md text-right whitespace-pre-wrap border">${responseText}</div>
                        <div class="mt-4 text-left">
                            ${currentUser ? '<button id="save-result-btn" class="btn btn-secondary py-2 px-4 rounded-full text-sm">ุญูุธ ุงููุชูุฌุฉ</button>' : ''}
                            <button id="download-pdf-btn" class="btn btn-primary text-white py-2 px-4 rounded-full mr-2 text-sm">ุชุญููู ูู PDF</button>
                        </div>`;
                    if (currentUser) {
                        document.getElementById('save-result-btn').addEventListener('click', () => {
                            const fullResultText = `--- ุงููุฏุฎูุงุช ---\n${rawInputForSaving}\n\n--- ูุชูุฌุฉ ุงูุชุญููู ---\n${responseText}`;
                            saveResultToFirestore(toolTitle, fullResultText)
                        });
                    }
                    document.getElementById('download-pdf-btn').addEventListener('click', () => downloadResultAsPDF('result-content', toolTitle));
                }
            }
        }
        
        // --- PDF DOWNLOAD MODULE ---
        function downloadResultAsPDF(elementId, title) {
            const { jsPDF } = window.jspdf;
            const element = document.getElementById(elementId);
            if (!element) return;
            showNotification("ุฌุงุฑู ุฅุนุฏุงุฏ ููู ุงูู PDF...", 'warning', 2000);
            html2canvas(element, { scale: 2, useCORS: true }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });
                pdf.setProperties({ title: `ุชูุฑูุฑ ${title} - ุฏ. ุนูุฑ ุงูุนูุงุฏ`, author: 'ูููุน ุฏ. ุนูุฑ ุงูุนูุงุฏ - TibraSoul' });
                const pdfWidth = pdf.internal.pageSize.getWidth();
                pdf.addImage(imgData, 'PNG', 10, 10, pdfWidth - 20, 0);
                pdf.save(`${title.replace(/\s+/g, '-')}_${new Date().toISOString().split('T')[0]}.pdf`);
            });
        }

        // --- FREQUENCY GENERATOR MODULE (ROBUST & UPGRADED) ---
        function initFrequencyGenerator() {
            const audioPrompt = document.getElementById('audio-init-prompt');
            const startAudioBtn = document.getElementById('start-audio-btn');
            const playerContainer = document.getElementById('frequency-player-container');
            const stopFreqBtn = document.getElementById('stop-freq-btn');
            const canvas = document.getElementById('frequency-canvas');
            const musicPlayer = document.getElementById('background-music');
            const musicPlayPauseBtn = document.getElementById('music-play-pause-btn');
            const musicVolumeSlider = document.getElementById('music-volume');

            if (!startAudioBtn || !playerContainer) return;

            let audioContext, oscillator, analyser, gainNode, animationFrameId;
            let isAudioInitialized = false;
            const canvasCtx = canvas.getContext('2d');
            
            const allFreqButtons = document.querySelectorAll('.freq-btn');

            const setupAudioSystem = async () => {
                if (isAudioInitialized) return true;
                try {
                    await Tone.start();
                    audioContext = Tone.context;
                    analyser = new Tone.Analyser('waveform', 1024);
                    gainNode = new Tone.Gain(0.5).toDestination();
                    isAudioInitialized = true;
                    console.log("Audio Context is ready.");
                    audioPrompt.classList.add('hidden');
                    playerContainer.classList.remove('hidden');
                    return true;
                } catch (e) {
                    console.error("Could not start Audio Context: ", e);
                    showNotification("ูุง ูููู ุชุดุบูู ุงูุตูุช. ูุฑุฌู ุงูุชูุงุนู ูุน ุงูุตูุญุฉ ุฃููุงู.", "error");
                    return false;
                }
            };
            
            startAudioBtn.addEventListener('click', setupAudioSystem);

            const playFrequency = (freq) => {
                if (!isAudioInitialized) return;
                
                musicPlayer.pause();
                musicPlayPauseBtn.innerHTML = '<i class="fas fa-play"></i>';

                if (oscillator) {
                    oscillator.disconnect();
                    oscillator.stop();
                }

                oscillator = new Tone.Oscillator(freq, "sine").connect(analyser).connect(gainNode);
                oscillator.volume.value = -9;
                oscillator.start();
                
                stopFreqBtn.classList.remove('hidden');
                if (!animationFrameId) visualize();
            };
            
            const stopFrequency = () => {
                if (oscillator) {
                    oscillator.stop();
                    oscillator.disconnect();
                    oscillator = null;
                }
                stopFreqBtn.classList.add('hidden');
                allFreqButtons.forEach(b => b.classList.remove('active'));
            };
            
            function visualize() {
                const draw = () => {
                    animationFrameId = requestAnimationFrame(draw);
                    if (!analyser || !oscillator) {
                       canvasCtx.clearRect(0, 0, canvas.width, canvas.height);
                       return;
                    };
                    const waveform = analyser.getValue();
                    canvasCtx.fillStyle = '#121212';
                    canvasCtx.fillRect(0, 0, canvas.width, canvas.height);
                    canvasCtx.lineWidth = 2;
                    canvasCtx.strokeStyle = 'rgb(200, 160, 125, 0.7)';
                    canvasCtx.beginPath();
                    
                    for (let i = 0; i < waveform.length; i++) {
                        const x = (i / (waveform.length -1)) * canvas.width;
                        const y = (waveform[i] + 1) / 2 * canvas.height;
                        if (i === 0) canvasCtx.moveTo(x, y);
                        else canvasCtx.lineTo(x, y);
                    }
                    canvasCtx.stroke();
                };
                draw();
            }
            
            allFreqButtons.forEach(button => {
                 button.addEventListener('click', async (e) => {
                    if (!isAudioInitialized) {
                       const audioReady = await setupAudioSystem();
                       if (!audioReady) return;
                    }
                    allFreqButtons.forEach(b => b.classList.remove('active'));
                    button.classList.add('active');
                    const freq = parseFloat(button.dataset.freq);
                    playFrequency(freq);
                });
            });
            
            stopFreqBtn.addEventListener('click', stopFrequency);
            
            // Music Player Logic
            musicPlayPauseBtn.addEventListener('click', () => {
                if (!isAudioInitialized) return;
                if (musicPlayer.paused) {
                    stopFrequency();
                    musicPlayer.play();
                    musicPlayPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                } else {
                    musicPlayer.pause();
                    musicPlayPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                }
            });
            musicVolumeSlider.addEventListener('input', (e) => {
                musicPlayer.volume = e.target.value;
            });
        }

        // --- BLOG MODULE ---
        function initBlog() {
            const posts = {
                'gut-brain': { 
                    title: 'ูู ุฃูุนุงุคู ูู ุณุจุจ ุชููุจุงุช ูุฒุงุฌูุ', 
                    image: 'https://images.unsplash.com/photo-1498837167922-ddd27525d352?q=80&w=2070&auto=format&fit=crop', 
                    content: `
                        <h2>ุงูุนูุงูุฉ ุงูุฎููุฉ ุจูู ุงูููุงุฉ ุงููุถููุฉ ูุงูุฏูุงุบ</h2>
                        <p>ูู ุชุนูู ุฃู ุฃูุนุงุกู ูุทูู ุนูููุง "ุงูุฏูุงุบ ุงูุซุงูู"ุ ูุฐุง ููุณ ูุฌุฑุฏ ุชุนุจูุฑ ูุฌุงุฒู. ููุฌุฏ ุงุชุตุงู ูุจุงุดุฑ ููุนูุฏ ุจูู ุฏูุงุบู ูุฌูุงุฒู ุงููุถููุ ููุนุฑู ุจุงุณู ูุญูุฑ ุงูุฃูุนุงุก-ุงูุฏูุงุบ. ูุฐุง ุงููุญูุฑ ูู ุทุฑูู ุณุฑูุน ุซูุงุฆู ุงูุงุชุฌุงูุ ุญูุซ ุชุฑุณู ุงูุฃูุนุงุก ุฅุดุงุฑุงุช ุฅูู ุงูุฏูุงุบ ูุงูุนูุณ ุตุญูุญ.</p>
                        <p>ูุง ููุฑุจ ูู 80-90% ูู ุงูุณูุฑูุชูููู ูู ุงูุฌุณูุ ููู ูุงูู ุนุตุจู ุฑุฆูุณู ูุณุคูู ุนู ุงูุดุนูุฑ ุจุงูุณุนุงุฏุฉ ูุงูุฑูุงููุฉุ ูุชู ุฅูุชุงุฌู ูู ุงูููุงุฉ ุงููุถููุฉ. ุนูุฏูุง ูููู ุงููููุฑูุจููู ุงููุนูู (ูุฌููุนุฉ ุงูุจูุชูุฑูุง ูุงููุงุฆูุงุช ุงูุญูุฉ ุงูุฏูููุฉ ุงูุฃุฎุฑู ูู ุฃูุนุงุฆู) ุบูุฑ ูุชูุงุฒูุ ูููู ุฃู ูุคุซุฑ ุฐูู ุจุดูู ูุจุงุดุฑ ุนูู ุฅูุชุงุฌ ุงูุณูุฑูุชููููุ ููุง ูุคุฏู ุฅูู ุชููุจุงุช ูุฒุงุฌูุฉุ ูููุ ูุญุชู ุงูุชุฆุงุจ.</p>
                        <h2>ููู ุชุฏุนู ูุฐุง ุงููุญูุฑ ุงููุงูุ</h2>
                        <ul>
                            <li><strong>ุชุบุฐูุฉ ุบููุฉ ุจุงูุฃููุงู:</strong> ุชุบุฐู ุงูุฃููุงู ุงูุจูุชูุฑูุง ุงููููุฏุฉ ูู ุฃูุนุงุฆู. ุฑูุฒ ุนูู ุงูุฎุถุฑูุงุช ูุงูููุงูู ูุงูุจููููุงุช.</li>
                            <li><strong>ุงูุฃุทุนูุฉ ุงููุฎูุฑุฉ:</strong> ุงูุฒุจุงุฏูุ ุงููููุฑุ ูุฎูู ุงูููููู ูู ูุตุงุฏุฑ ููุชุงุฒุฉ ููุจุฑูุจููุชูู (ุงูุจูุชูุฑูุง ุงูุฌูุฏุฉ).</li>
                            <li><strong>ุชูููู ุงูุณูุฑ ูุงูุฃุทุนูุฉ ุงููุตูุนุฉ:</strong> ูุฐู ุงูุฃุทุนูุฉ ุชุบุฐู ุงูุจูุชูุฑูุง ุงูุถุงุฑุฉ ูุชุณุจุจ ุงูุงูุชูุงุจุงุช.</li>
                            <li><strong>ุฅุฏุงุฑุฉ ุงูุฅุฌูุงุฏ:</strong> ุงูุฅุฌูุงุฏ ุงููุฒูู ูููู ุฃู ูุถุฑ ุจุจุทุงูุฉ ุงูุฃูุนุงุก ููุฎู ุจุชูุงุฒู ุงููููุฑูุจููู. ูุงุฑุณ ุงูุชุฃููุ ุงูุชููุณ ุงูุนูููุ ุฃู ุงูููุฌุง.</li>
                        </ul>
                        <p>ุงูุงูุชูุงู ุจุตุญุฉ ุฃูุนุงุฆู ููุณ ููุท ูุชุญุณูู ุงููุถูุ ุจู ูู ุฎุทูุฉ ุฃุณุงุณูุฉ ูุญู ุตุญุฉ ููุณูุฉ ูุนูููุฉ ุฃูุถู. ุงุจุฏุฃ ุงูููู ุจุฅุฌุฑุงุก ุชุบููุฑ ุตุบูุฑ ูุงุญุฏุ ูุดุงูุฏ ููู ูุชุบูุฑ ุดุนูุฑู.</p>
                    ` 
                },
                'breathing': { 
                    title: 'ููุฉ ุงูุชููุณ: ููู ุชูุฏุฆ ุฌูุงุฒู ุงูุนุตุจู ูู 5 ุฏูุงุฆู', 
                    image: 'https://images.unsplash.com/photo-1599301934984-1d2741913a5f?q=80&w=2070&auto=format&fit=crop', 
                    content: `
                        <h2>ุฃููู ุฃุฏุงุฉ ููุชุญูู ูู ุญุงูุชู ุงูููุณูุฉ</h2>
                        <p>ุฃููุงุณู ูู ุงูุฃุฏุงุฉ ุงูุฃูุซุฑ ูุนุงููุฉ ููุฌุงููุฉ ุงูุชู ุชูุชูููุง ูุชุบููุฑ ุญุงูุชู ุงููุณููููุฌูุฉ ูุงูููุณูุฉ ุจุดูู ููุฑู. ุนูุฏูุง ุชุดุนุฑ ุจุงูุชูุชุฑ ุฃู ุงููููุ ูุชูุดุท ุฌูุงุฒู ุงูุนุตุจู ุงููุฏู (ุงุณุชุฌุงุจุฉ "ุงููุฑ ุฃู ุงููุฑ")ุ ููุง ูุคุฏู ุฅูู ุชุณุงุฑุน ุถุฑุจุงุช ุงูููุจ ูุงูุชููุณ ุงูุณุทุญู. ุงูุชููุณ ุงูุนููู ูุงูุจุทูุก ููุนู ุงูุนูุณ ุชูุงููุง: ุฅูู ููุดุท ุฌูุงุฒู ุงูุนุตุจู ุงููุงูุฏู (ุงุณุชุฌุงุจุฉ "ุงูุฑุงุญุฉ ูุงููุถู").</p>
                        <h2>ุชูุฑูู ุงูุชููุณ ุงูุตูุฏููู (Box Breathing)</h2>
                        <p>ูุฐู ุงูุชูููุฉ ุจุณูุทุฉ ุฌุฏูุง ููุนุงูุฉุ ููุณุชุฎุฏููุง ุญุชู ุฃูุฑุงุฏ ุงูููุงุช ุงูุฎุงุตุฉ ูุชูุฏุฆุฉ ุฃููุณูู ุชุญุช ุงูุถุบุท. ุงุชุจุน ูุฐู ุงูุฎุทูุงุช:</p>
                        <ul>
                            <li><strong>ุดููู:</strong> ุฎุฐ ุดููููุง ุนููููุง ูู ุฃููู ุจุจุทุก ูุนุฏ ุญุชู 4.</li>
                            <li><strong>ุงุญุจุณ:</strong> ุงุญุจุณ ุฃููุงุณู ูุนุฏ ุญุชู 4.</li>
                            <li><strong>ุฒููุฑ:</strong> ุฃุฎุฑุฌ ุงูููุงุก ุจุจุทุก ูู ููู ูุนุฏ ุญุชู 4.</li>
                            <li><strong>ุงุญุจุณ:</strong> ุงุญุจุณ ุฃููุงุณู ูุฑุฉ ุฃุฎุฑู ูุนุฏ ุญุชู 4.</li>
                        </ul>
                        <p>ูุฑุฑ ูุฐู ุงูุฏูุฑุฉ ููุฏุฉ 3-5 ุฏูุงุฆู. ููููู ููุงุฑุณุฉ ูุฐุง ุงูุชูุฑูู ูู ุฃู ููุงู ููู ุฃู ููุช ุชุดุนุฑ ููู ุจุงูุญุงุฌุฉ ุฅูู ุงููุฏูุก ูุงูุชุฑููุฒ. ุณุชูุงุญุธ ูุฑููุง ููุฑููุง ูู ุดุนูุฑู ุจุงูุณูููุฉ ูุงููุถูุญ ุงูุฐููู.</p>
                    `
                },
                'supplements': { 
                    title: 'ุฃูุถู 3 ููููุงุช ุบุฐุงุฆูุฉ ูููุงูุญุฉ ุงูุงูุชูุงุจุงุช', 
                    image: 'https://images.unsplash.com/photo-1476837579993-f1d3948f17c2?q=80&w=2070&auto=format&fit=crop', 
                    content: `
                        <h2>ุงูุงูุชูุงุจ: ุตุฏูู ูุนุฏู</h2>
                        <p>ุงูุงูุชูุงุจ ูู ุงุณุชุฌุงุจุฉ ุทุจูุนูุฉ ูู ุงูุฌุณู ููุดูุงุก ูู ุงูุฅุตุงุจุงุช ูุงูุนุฏูู. ูููู ุนูุฏูุง ูุตุจุญ ุงูุงูุชูุงุจ ูุฒูููุงุ ูุฅูู ูุณุงูู ูู ูุฌููุนุฉ ูุงุณุนุฉ ูู ุงูุฃูุฑุงุถุ ูู ุฃูุฑุงุถ ุงูููุจ ูุงูุณูุฑู ุฅูู ุฃูุฑุงุถ ุงูููุงุนุฉ ุงูุฐุงุชูุฉ. ุจุฌุงูุจ ุงููุธุงู ุงูุบุฐุงุฆู ุงูุตุญูุ ูููู ูุจุนุถ ุงูููููุงุช ุฃู ุชุณุงุนุฏ ูู ุงูุณูุทุฑุฉ ุนูู ุงูุงูุชูุงุจ ุงููุฒูู.</p>
                        <h2>ุฃูุถู ุชูุตูุงุชู</h2>
                        <ul>
                            <li><strong>ุงููุฑูููู (ุงููุงุฏุฉ ุงููุนุงูุฉ ูู ุงููุฑูู):</strong> ูุนุชุจุฑ ุงููุฑูููู ูู ุฃููู ูุถุงุฏุงุช ุงูุงูุชูุงุจ ุงูุทุจูุนูุฉ. ุฅูู ูุนูู ุนูู ูุณุงุฑุงุช ูุชุนุฏุฏุฉ ูู ุงูุฌุณู ูุชูููู ุงูุงูุชูุงุจ. ุงุจุญุซ ุนู ูููู ูุญุชูู ุนูู ุงููููู ุงูุฃุณูุฏ (ุจูุจุฑูู) ูุฒูุงุฏุฉ ุงูุงูุชุตุงุต ุจุดูู ูุจูุฑ.</li>
                            <li><strong>ุฃุญูุงุถ ุฃูููุบุง-3 ุงูุฏูููุฉ:</strong> ุชูุฌุฏ ูู ุฒูุช ุงูุณูู ูุฒูุช ุงููุฑููุ ููู ุถุฑูุฑูุฉ ูุฎูุถ ุงูุงูุชูุงุจ ูู ุงูุฌุณู. ุฅููุง ุชุณุงุนุฏ ูู ููุงุฒูุฉ ูุณุจุฉ ุฃูููุบุง-6 ุฅูู ุฃูููุบุง-3ุ ูุงูุชู ุบุงูุจูุง ูุง ุชููู ูุฎุชูุฉ ูู ุงููุธู ุงูุบุฐุงุฆูุฉ ุงูุญุฏูุซุฉ.</li>
                            <li><strong>ุงููุบููุณููู:</strong> ูุฐุง ุงููุนุฏู ุงูุฃุณุงุณู ูุดุงุฑู ูู ุฃูุซุฑ ูู 300 ุชูุงุนู ููููุงุฆู ุญููู ูู ุงูุฌุณูุ ุจูุง ูู ุฐูู ุชูุธูู ุงุณุชุฌุงุจุฉ ุงูุฌุณู ููุงูุชูุงุจุงุช. ููุต ุงููุบููุณููู ุดุงุฆุน ุฌุฏูุง ููููู ุฃู ูุคุฏู ุฅูู ุฒูุงุฏุฉ ุงูุงูุชูุงุจ ุงููุฒูู.</li>
                        </ul>
                        <p><strong>ููุงุญุธุฉ ูุงูุฉ:</strong> ุงุณุชุดุฑ ุฏุงุฆููุง ุฃุฎุตุงุฆู ุฑุนุงูุฉ ุตุญูุฉ ูุจู ุงูุจุฏุก ูู ุฃู ูุธุงู ููููุงุช ุฌุฏูุฏุ ุฎุงุตุฉ ุฅุฐุง ููุช ุชุชูุงูู ุฃุฏููุฉ ุฃุฎุฑู ุฃู ูุฏูู ุญุงูุฉ ุทุจูุฉ ููุฌูุฏุฉ.</p>
                    ` 
                }
            };
            document.querySelectorAll('.read-more-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const postId = button.dataset.postid;
                    const post = posts[postId];
                    if (post) {
                        document.getElementById('post-title').textContent = post.title;
                        document.getElementById('post-image').src = post.image;
                        document.getElementById('post-image').alt = post.title;
                        document.getElementById('post-content').innerHTML = post.content;
                        showView('single-post');
                    }
                });
            });
        }

        // --- WHEEL OF LIFE MODULE ---
        function initWheelOfLife() {
            const ctx = document.getElementById('wheel-of-life-chart');
            if (!ctx) return;
            const slidersContainer = document.getElementById('wheel-of-life-sliders');
            const getInsightBtn = document.getElementById('get-wheel-insight-btn');
            
            const labels = ['ุงูุตุญุฉ ุงูุฌุณุฏูุฉ', 'ุงูููู ุงูุดุฎุตู', 'ุงูุญูุงุฉ ุงูููููุฉ', 'ุงููุงููุฉ', 'ุงูุจูุฆุฉ ุงููุญูุทุฉ', 'ุงููุฑุญ ูุงูุงุณุชุฌูุงู', 'ุงูุนูุงูุงุช ุงูุฃุณุฑูุฉ ูุงูุงุฌุชูุงุนูุฉ', 'ุงูุญูุงุฉ ุงูุฑูุญูุฉ'];
            const initialData = Array(labels.length).fill(5);
            
            slidersContainer.innerHTML = labels.map((label, index) => `
                <div class="flex items-center gap-4">
                    <label for="slider-${index}" class="w-1/3 text-right">${label}</label>
                    <input type="range" id="slider-${index}" min="0" max="10" value="5" class="range-slider flex-grow" data-index="${index}">
                    <span id="value-${index}" class="w-8 text-center font-bold">5</span>
                </div>`).join('');
            
            wheelChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'ุชููููู ุงูุญุงูู',
                        data: initialData,
                        fill: true,
                        backgroundColor: 'rgba(200, 160, 125, 0.4)',
                        borderColor: 'rgb(200, 160, 125)',
                        pointBackgroundColor: 'rgb(200, 160, 125)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(200, 160, 125)'
                    }]
                },
                options: {
                    elements: { line: { borderWidth: 3 } },
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(90, 110, 90, 0.3)' },
                            grid: { color: 'rgba(90, 110, 90, 0.3)' },
                            pointLabels: { font: { family: "'Noto Kufi Arabic', sans-serif", size: 13 }, color: '#333' },
                            ticks: { backdropColor: 'var(--secondary-color)', color: '#555', stepSize: 2 },
                            suggestedMin: 0,
                            suggestedMax: 10
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            });

            slidersContainer.addEventListener('input', (e) => {
                if (e.target.type === 'range') {
                    const index = e.target.dataset.index;
                    const value = e.target.value;
                    document.getElementById(`value-${index}`).textContent = value;
                    wheelChart.data.datasets[0].data[index] = value;
                    wheelChart.update();
                }
            });
            
            getInsightBtn.addEventListener('click', getWheelInsight);
        }
        
        async function getWheelInsight() {
            const resultDiv = document.getElementById('wheel-of-life-result');
            const data = wheelChart.data.datasets[0].data;
            const labels = wheelChart.data.labels;
            
            resultDiv.classList.remove('hidden');
            resultDiv.style.opacity = '0';
            
            let userInput = "User's Wheel of Life scores are: ";
            labels.forEach((label, index) => {
                userInput += `${label}: ${data[index]}/10, `;
            });

            const prompt = `Act as a wise and compassionate holistic life coach. Based on the user's Wheel of Life scores: [${userInput}]. Your task is to:
1.  Identify the top 2-3 highest scoring areas and acknowledge them as strengths.
2.  Identify the top 2-3 lowest scoring areas and frame them as opportunities for growth, not failures.
3.  Provide one insightful, holistic observation about the potential interplay between the high and low areas (e.g., "I notice your career score is high, but your health is low. Perhaps your professional success is coming at the expense of your physical wellbeing?").
4.  Offer one simple, actionable first step for one of the lowest areas.
5.  End with an encouraging and empowering message.
The entire response should be in warm, supportive Arabic. Start with a positive affirmation. Use markdown for lists and bolding.`;
            
            const insightText = await handleApiRequest(prompt, 'wheel-of-life-result', GEMINI_API_KEY);

            if (insightText) {
                resultDiv.innerHTML = `
                    <div id="wheel-result-content" class="text-right whitespace-pre-wrap">${insightText}</div>
                    <div class="mt-4 text-center">
                        ${currentUser ? '<button id="save-wheel-result-btn" class="btn btn-secondary py-2 px-4 rounded-full text-sm">ุญูุธ ุงููุชูุฌุฉ ูู ูููู</button>' : '<p class="text-sm text-gray-500">ุณุฌู ุงูุฏุฎูู ูุญูุธ ูุฐู ุงูุฑุคู ุงููููุฉ!</p>'}
                    </div>`;
                if(currentUser) {
                    document.getElementById('save-wheel-result-btn').addEventListener('click', () => {
                        const fullResultText = `--- ุชูููู ุนุฌูุฉ ุงูุนุงููุฉ ---\n${userInput}\n\n--- ุฑุคู ุงูุชุญููู ---\n${insightText}`;
                        saveResultToFirestore("ุชุญููู ุนุฌูุฉ ุงูุนุงููุฉ", fullResultText);
                    });
                }
            }
            resultDiv.style.opacity = '1';
        }
        
        // --- AUDIO PLAYER MODULE ---
        function initAudioPlayer() {
             const audio = document.getElementById('guided-audio');
            if(!audio) return;
            const playPauseBtn = document.getElementById('audio-play-pause-btn');
            const playIcon = playPauseBtn.querySelector('i');
            const progressBar = document.getElementById('audio-progress-bar');
            const timeDisplay = document.getElementById('audio-time');
            const totalDuration = 60; // 1 minute

            const formatTime = (seconds) => {
                const minutes = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
            };

            playPauseBtn.addEventListener('click', () => {
                if (audio.paused) {
                    audio.play();
                    playIcon.classList.replace('fa-play-circle', 'fa-pause-circle');
                } else {
                    audio.pause();
                    playIcon.classList.replace('fa-pause-circle', 'fa-play-circle');
                }
            });

            audio.addEventListener('timeupdate', () => {
                const progress = (audio.currentTime / audio.duration) * 100;
                progressBar.value = progress;
                timeDisplay.textContent = `${formatTime(audio.currentTime)} / ${formatTime(totalDuration)}`;
            });

            audio.addEventListener('ended', () => {
                playIcon.classList.replace('fa-pause-circle', 'fa-play-circle');
                progressBar.value = 0;
                timeDisplay.textContent = `00:00 / ${formatTime(totalDuration)}`;
            });

            progressBar.addEventListener('input', () => {
                const seekTime = (progressBar.value / 100) * audio.duration;
                audio.currentTime = seekTime;
            });
        }

        // --- GENERAL UI & CREATIVE EFFECTS ---
        function initGeneralUI() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            mobileMenu.addEventListener('click', (e) => { 
                if(e.target.classList.contains('nav-link') || e.target.closest('.nav-link')){
                     mobileMenu.classList.add('hidden');
                }
            });

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('is-visible');
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.fade-in-up').forEach(el => observer.observe(el));
            
            // Back to top button
            const backToTopBtn = document.getElementById('back-to-top-btn');
            window.addEventListener('scroll', () => {
                backToTopBtn.classList.toggle('hidden', window.scrollY < 300);
            }, { passive: true });
            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }

        function initCreativeEffects() {
            const cards = document.querySelectorAll('.dashboard-card');
            cards.forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const rotateX = ((y - card.offsetHeight / 2) / (card.offsetHeight / 2)) * -5;
                    const rotateY = ((x - card.offsetWidth / 2) / (card.offsetWidth / 2)) * 5;
                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.05, 1.05, 1.05)`;
                });
                card.addEventListener('mouseleave', () => {
                    card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
                });
            });
            document.querySelectorAll('.btn').forEach(button => {
                button.addEventListener('click', function(e) {
                     const rect = this.getBoundingClientRect();
                     const ripple = document.createElement('span');
                     const d = Math.max(this.clientWidth, this.clientHeight);
                     ripple.style.width = ripple.style.height = d + 'px';
                     ripple.style.left = e.clientX - rect.left - d/2 + 'px';
                     ripple.style.top = e.clientY - rect.top - d/2 + 'px';
                     ripple.classList.add('ripple');
                     this.appendChild(ripple);
                     setTimeout(() => ripple.remove(), 600);
                });
            });
        }

        // --- BODY MAP MODULE (SVG UPGRADE) ---
        function initBodyMap() {
            const infoContainer = document.getElementById('body-map-info');
            const organNameEl = document.getElementById('organ-name');
            const organDetailsEl = document.getElementById('organ-details');
            const organPaths = document.querySelectorAll('#body-map-svg .organ-path');
            if (!infoContainer) return;
            
            window.organData = {
                brain: {
                    name: 'ุงูุฏูุงุบ ูุงูุฌูุงุฒ ุงูุนุตุจู',
                    emotionalCause: 'ุตุฑุงุนุงุช ููุฑูุฉ ูุณุชูุฑุฉุ ุฑูุถ ุฃู ููุงููุฉ ุงูุฃููุงุฑ ุงูุฌุฏูุฏุฉุ ุงูุดุนูุฑ ุจุงูุงููุตุงู ุนู ุงูุญุฏุณ ุงูุฏุงุฎูู.',
                    associatedDiseases: 'ุงูุตุฏุงุน ุงููุตููุ ุงูุฒูุงููุฑุ ุจุงุฑููุณููุ ุงูุฌูุทุงุชุ ุงูุฃูุฑุงูุ ุถุจุงุจูุฉ ุงูุฏูุงุบ.',
                    holisticAdvice: 'ูุงุฑุณ ุงูุชุฃูู ูุชุตููุฉ ุงูุฐููุ ุชุนูู ุชูููุงุช ุงูุชููุณ ูุชูุฏุฆุฉ ุงูุฌูุงุฒ ุงูุนุตุจูุ ุงูุชุจ ุฃููุงุฑู ูุชุญุฑูุฑูุงุ ุซู ุจุญุฏุณู ุฃูุซุฑ.'
                },
                thyroid: {
                    name: 'ุงูุบุฏุฉ ุงูุฏุฑููุฉ',
                    emotionalCause: 'ุงูุดุนูุฑ ุจุงูุฅุฐูุงูุ ุนุฏู ุงููุฏุฑุฉ ุนูู ุงูุชุนุจูุฑ ุนู ุงูุฐุงุชุ ุงูุดุนูุฑ ุจุฃู ุฏูุฑู ูู ูุฃุช ุจุนุฏุ ูุจุช ุงูุฅุจุฏุงุน.',
                    associatedDiseases: 'ุฎููู ุฃู ูุฑุท ูุดุงุท ุงูุบุฏุฉุ ุชุถุฎู ุงูุบุฏุฉุ ูุฑุถ ูุงุดูููุชูุ ูุฑุถ ุฌุฑููุฒ.',
                    holisticAdvice: 'ุชุญุฏุซ ุนู ุญูููุชูุ ูุงุฑุณ ููุงูุฉ ุฅุจุฏุงุนูุฉ (ุฑุณูุ ูุชุงุจุฉุ ุบูุงุก)ุ ูู "ูุง" ุนูุฏ ุงูุญุงุฌุฉุ ุญุฑุฑ ุฑูุจุชู ููุชููู ูู ุฎูุงู ุงูุชูุงุฑูู.'
                },
                heart: {
                    name: 'ุงูููุจ',
                    emotionalCause: 'ููุต ุงููุฑุญ ูุงูุญุจุ ุฌุฑูุญ ุนุงุทููุฉ ูุฏููุฉุ ุงูุดุนูุฑ ุจุงููุญุฏุฉุ ุงูููุฏ ุงูุฐุงุชู ุงููุงุณู.',
                    associatedDiseases: 'ุงุฑุชูุงุน ุถุบุท ุงูุฏูุ ุงูููุจุงุช ุงูููุจูุฉุ ุนุฏู ุงูุชุธุงู ุถุฑุจุงุช ุงูููุจ, ุฃูุฑุงุถ ุงูุดุฑุงููู.',
                    holisticAdvice: 'ูุงุฑุณ ุงูุงูุชูุงู ููููุงูุ ุณุงูุญ ููุณู ูุงูุขุฎุฑููุ ุงูุถ ููุชุงู ูู ุงูุทุจูุนุฉุ ุชูุงุตู ูุน ุงูุฃุตุฏูุงุก ูุงูุฃุญุจุงุกุ ุงุญุชุถู ุฃูุซุฑ.'
                },
                liver: {
                    name: 'ุงููุจุฏ',
                    emotionalCause: 'ุงูุบุถุจ ุงูููุจูุชุ ุงููุฑุงุฑุฉุ ุงูุงุณุชูุงุก ุงููุฒููุ ุงูุฎูู ูู ุงูููุต ูุงูููุฑ.',
                    associatedDiseases: 'ุชููู ุงููุจุฏุ ุงููุจุฏ ุงูุฏูููุ ุงูุชูุงุจ ุงููุจุฏุ ุญุตูุงุช ุงููุฑุงุฑุฉุ ูุดุงูู ุฌูุฏูุฉ.',
                    holisticAdvice: 'ุชุนูู ุชูููุงุช ุตุญูุฉ ููุชุนุจูุฑ ุนู ุงูุบุถุจ (ูุซู ุงููุชุงุจุฉ ุฃู ุงูุฑูุงุถุฉ)ุ ูุงุฑุณ ุงูุชุณุงูุญุ ุฑูุฒ ุนูู ุงูููุฑุฉ ุจุฏูุงู ูู ุงูููุตุ ุชูุงูู ุงูุฃุทุนูุฉ ุงููุฑุฉ (ุฌุฑุฌูุฑุ ููุฏุจุงุก).'
                },
                gut: {
                    name: 'ุงูุฃูุนุงุก (ุงูุฌูุงุฒ ุงููุถูู)',
                    emotionalCause: 'ุนุฏู ุงููุฏุฑุฉ ุนูู "ูุถู" ุฃู ุชูุจู ููุงูู ุงูุญูุงุฉุ ุงูุชูุณู ุจุงููุงุถูุ ุงูููู ุงูููุฑุท ุจุดุฃู ุงููุณุชูุจู.',
                    associatedDiseases: 'ุงูููููู ุงูุนุตุจูุ ูุฑููุฒุ ุงูุชูุงุจ ุงูููููู ุงูุชูุฑุญูุ ุงูุฅูุณุงู/ุงูุฅุณูุงู ุงููุฒููุ ุงูุญุณุงุณูุงุช ุงูุบุฐุงุฆูุฉ.',
                    holisticAdvice: 'ูุงุฑุณ ุงูููุธุฉ ุงูุฐูููุฉ ุฃุซูุงุก ุชูุงูู ุงูุทุนุงูุ ุชุนูู ุงูุชุฎูู ุนูุง ูุง ููููู ุงูุชุญูู ูููุ ุงูุชุจ ูุฎุงููู ุนูู ูุฑูุ ุชูุงูู ุงูุจุฑูุจููุชูู ูุฏุนู "ุนููู ุงูุซุงูู".'
                },
                adrenals: {
                    name: 'ุงูุบุฏุฏ ุงููุธุฑูุฉ',
                    emotionalCause: 'ุงูุฅุฌูุงุฏ ุงููุฒููุ ุงูุดุนูุฑ ุจุฃูู ูู ูุถุน "ุงููุฌุงุฉ" ุจุงุณุชูุฑุงุฑุ ุนุฏู ุงูุดุนูุฑ ุจุงูุฃูุงูุ ุชุญูู ูุณุคูููุงุช ุชููู ุทุงูุชู.',
                    associatedDiseases: 'ุงูุฅุฑูุงู ุงููุธุฑูุ ูุชูุงุฒูุฉ ุงูุชุนุจ ุงููุฒููุ ูุดุงูู ุงููููุ ุงูููู.',
                    holisticAdvice: 'ุถุน ุญุฏูุฏุงู ุตุญูุฉุ ุชุนูู ููู "ูุง"ุ ุฎุตุต ููุชุงู ููููุงู ููุงุณุชุฑุฎุงุก ุงูุชุงู (ุจุฏูู ุดุงุดุงุช)ุ ููู ูู ุงููุงููููุ ูุงุฑุณ ุงูุชุฃูู ุฃู ุงูููุฌุง ุงูุชุตุงูุญูุฉ.'
                },
                kidneys: {
                    name: 'ุงูููู',
                    emotionalCause: 'ุงูุฎูู ุงูุนูููุ ูุดุงูู ูู ุงูุนูุงูุงุช ูุงูุดุฑุงูุงุชุ ุงูุดุนูุฑ ุจุฎูุจุฉ ุงูุฃูู ูุงูููุฏ.',
                    associatedDiseases: 'ุญุตูุงุช ุงููููุ ุงููุดู ุงูููููุ ุงูุชูุงุจุงุช ุงููุณุงูู ุงูุจูููุฉ ุงููุชูุฑุฑุฉ.',
                    holisticAdvice: 'ูุงุฌู ูุฎุงููู ุจุฏูุงู ูู ุงููุฑูุจ ูููุงุ ููู ุนูุงูุงุชู ูุงุจูู ุฑูุงุจุท ุตุญูุฉุ ุงุดุฑุจ ูููุฉ ูุงููุฉ ูู ุงููุงุก ุจููุฉ ุงูุชุทููุฑุ ูุงุฑุณ ุชูููุงุช ุงูุชุฃุฑูุถ.'
                }
            };
            
            organPaths.forEach(path => {
                path.addEventListener('click', () => {
                    const organKey = path.dataset.organ;
                    const data = window.organData[organKey];

                    organPaths.forEach(p => p.classList.remove('selected'));
                    path.classList.add('selected');

                    if (data) {
                        infoContainer.style.opacity = 0;
                        infoContainer.style.transform = 'translateY(20px)';
                        
                        setTimeout(() => {
                            organNameEl.textContent = data.name;
                            organDetailsEl.innerHTML = `
                                <p class="mb-2"><strong>ุงูุฃูุฑุงุถ ุงููุฑุชุจุทุฉ:</strong> ${data.associatedDiseases}</p>
                                <p class="mb-2"><strong>ุงูุณุจุจ ุงูุดุนูุฑู ุงูุฌุฐุฑู:</strong> ${data.emotionalCause}</p>
                                <p class="mb-2"><strong>ูุตูุญุฉ ุดููููุฉ:</strong> ${data.holisticAdvice}</p>
                            `;
                            infoContainer.style.opacity = 1;
                            infoContainer.style.transform = 'translateY(0)';
                        }, 300);
                    }
                });
            });
        }

        // --- QUIZZES MODULE (COMPLETED) ---
        function initQuizzes() {
            const modal = document.getElementById('quiz-modal');
            const modalContent = document.getElementById('quiz-modal-content');

            const quizzes = {
                'adrenal-fatigue': {
                    title: 'ุงุฎุชุจุงุฑ ุงูุฅุฑูุงู ุงููุธุฑู',
                    questions: [
                        { q: "ูู ุชุดุนุฑ ุจุงูุชุนุจ ุญุชู ุจุนุฏ ูููุฉ ููู ูุงููุฉุ", points: 2 },
                        { q: "ูู ุชุฌุฏ ุตุนูุจุฉ ูู ุงูุงุณุชููุงุธ ูู ุงูุตุจุงุญุ", points: 2 },
                        { q: "ูู ุชุดุชูู ุงูุฃุทุนูุฉ ุงููุงูุญุฉ ุฃู ุงูุณูุฑูุฉ ุจุดุฏุฉุ", points: 2 },
                        { q: "ูู ุชุดุนุฑ ุจุงูุฏูุงุฑ ุฃู ุงูุฏูุฎุฉ ุนูุฏ ุงููููู ุจุณุฑุนุฉุ", points: 1 },
                        { q: "ูู ูุฏุฑุชู ุนูู ุงูุชุนุงูู ูุน ุงูุฅุฌูุงุฏ ููุฎูุถุฉุ", points: 2 },
                        { q: "ูู ุชูุฑุถ ุจุณูููุฉ ูุชุณุชุบุฑู ููุชุงู ุฃุทูู ููุดูุงุกุ", points: 1 },
                        { q: "ูู ุชุดุนุฑ ุจุฃู ูุฏูู ุทุงูุฉ ุฃูุถู ูู ุงููุณุงุกุ", points: 1 },
                    ],
                    results: [
                        { score: 0, text: "ุงุญุชูุงููุฉ ููุฎูุถุฉ ููุฌูุฏ ุฅุฑูุงู ูุธุฑู. ูุจุฏู ุฃู ุบุฏุฏู ุงููุธุฑูุฉ ุชุนูู ุจุดูู ุฌูุฏ. ุญุงูุธ ุนูู ููุท ุญูุงุชู ุงูุตุญู!" },
                        { score: 4, text: "ุงุญุชูุงููุฉ ูุชูุณุทุฉ ููุฌูุฏ ุฅุฑูุงู ูุธุฑู. ูุฏ ุชููู ุบุฏุฏู ุงููุธุฑูุฉ ุชุญุช ุถุบุท. ูู ุงูุฌูุฏ ุงูุจุฏุก ูู ุชุทุจูู ุชูููุงุช ุฅุฏุงุฑุฉ ุงูุฅุฌูุงุฏ ูุงูููู ุจุดูู ุฃูุถู." },
                        { score: 7, text: "ุงุญุชูุงููุฉ ุนุงููุฉ ููุฌูุฏ ุฅุฑูุงู ูุธุฑู. ุบุฏุฏู ุงููุธุฑูุฉ ุจุญุงุฌุฉ ูุงุณุฉ ููุฏุนู. ููุตู ุจุดุฏุฉ ุจุงูุชุฑููุฒ ุนูู ุฅุฏุงุฑุฉ ุงูุฅุฌูุงุฏุ ุงูุชุบุฐูุฉ ุงูุฏุงุนูุฉุ ูุงูููู. ูุฏ ูููู ูู ุงููููุฏ ุญุฌุฒ ุงุณุชุดุงุฑุฉ ูููุงูุดุฉ ุงููุชุงุฆุฌ." }
                    ]
                },
                'leaky-gut': {
                    title: 'ุชูููู ุงูุฃูุนุงุก ุงููุชุณุฑุจุฉ',
                    questions: [
                        { q: "ูู ุชุนุงูู ูู ุงูุชูุงุฎ ุฃู ุบุงุฒุงุช ุฃู ุขูุงู ูู ุงูุจุทู ุจุดูู ููุชุธูุ", points: 2 },
                        { q: "ูู ูุฏูู ุญุณุงุณูุงุช ุบุฐุงุฆูุฉ ูุนุฑููุฉ ุฃู ุชุดุชุจู ูู ูุฌูุฏูุงุ", points: 2 },
                        { q: "ูู ุชุนุงูู ูู ูุดุงูู ุฌูุฏูุฉ ูุซู ุงูุฃูุฒููุงุ ุญุจ ุงูุดุจุงุจุ ุฃู ุงูุตุฏููุฉุ", points: 2 },
                        { q: "ูู ุชุนุงูู ูู ุขูุงู ูู ุงูููุงุตู ุฃู ุงูุนุถูุงุช ุจุฏูู ุณุจุจ ูุงุถุญุ", points: 1 },
                        { q: "ูู ุชุนุงูู ูู ุถุจุงุจูุฉ ุงูุฏูุงุบุ ุตุนูุจุฉ ูู ุงูุชุฑููุฒุ ุฃู ุชููุจุงุช ูุฒุงุฌูุฉุ", points: 2 },
                        { q: "ูู ุชู ุชุดุฎูุตู ุจูุฑุถ ููุงุนู ุฐุงุชู (ูุซู ุงููุงุดูููุชู ุฃู ุงูุชูุงุจ ุงูููุงุตู ุงูุฑููุงุชููุฏู)ุ", points: 2 },
                        { q: "ูู ุชุชูุงูู ุงููุถุงุฏุงุช ุงูุญูููุฉ ุฃู ูุณููุงุช ุงูุฃูู ุจุดูู ูุชูุฑุฑุ", points: 1 },
                    ],
                    results: [
                        { score: 0, text: "ุงุญุชูุงููุฉ ููุฎูุถุฉ ููุฌูุฏ ุฃูุนุงุก ูุชุณุฑุจุฉ. ุฌูุงุฒู ุงููุถูู ูุจุฏู ูู ุญุงูุฉ ุฌูุฏุฉ." },
                        { score: 4, text: "ุงุญุชูุงููุฉ ูุชูุณุทุฉ ููุฌูุฏ ุฃูุนุงุก ูุชุณุฑุจุฉ. ูุฏ ูููู ูู ุงููููุฏ ุงูุชุฑููุฒ ุนูู ูุธุงู ุบุฐุงุฆู ูุถุงุฏ ููุงูุชูุงุจุงุช ูุฏุนู ุตุญุฉ ุงูุฃูุนุงุก." },
                        { score: 7, text: "ุงุญุชูุงููุฉ ุนุงููุฉ ููุฌูุฏ ุฃูุนุงุก ูุชุณุฑุจุฉ. ููุตู ุจุดุฏุฉ ุจุงููุธุฑ ูู ุจุฑูุชูููู ุนูุงุฌู ููุฃูุนุงุก ูุงุณุชุดุงุฑุฉ ูุฎุชุต." }
                    ]
                },
                'toxicity-score': {
                    title: 'ุงุญุณุจ ุฏุฑุฌุฉ ุงูุณููุฉ ูู ุฌุณูู',
                    questions: [
                        { q: "ูู ุชุณุชุฎุฏู ุฃูุงูู ุทูู ุบูุฑ ูุงุตูุฉ (ุชููููู) ุจุงูุชุธุงูุ", points: 1 },
                        { q: "ูู ุชุดุฑุจ ูู ููุงุฑูุฑ ุจูุงุณุชูููุฉ ุฃู ุชุณุชุฎุฏู ุญุงููุงุช ุทุนุงู ุจูุงุณุชูููุฉุ", points: 1 },
                        { q: "ูู ูุธุงูู ุงูุบุฐุงุฆู ูุญุชูู ุนูู ุงููุซูุฑ ูู ุงูุฃุทุนูุฉ ุงููุตูุนุฉ ุฃู ุงูุณุฑูุนุฉุ", points: 2 },
                        { q: "ูู ุชุณุชุฎุฏู ููุชุฌุงุช ุงูุชูุธูู ุฃู ุงูุนูุงูุฉ ุงูุดุฎุตูุฉ ุงูุชูููุฏูุฉ (ุบูุฑ ุงูุทุจูุนูุฉ)ุ", points: 2 },
                        { q: "ูู ุชุนุงูู ูู ุตุฏุงุนุ ุชุนุจุ ุฃู ุญุณุงุณูุฉ ููููุงุฆูุฉ (ููุนุทูุฑ ูุซูุงู)ุ", points: 2 },
                        { q: "ูู ุญุฑูุฉ ุฃูุนุงุฆู ููุชุธูุฉ (ุนูู ุงูุฃูู ูุฑุฉ ูุงุญุฏุฉ ููููุงู)ุ", points: -2 }, 
                        { q: "ูู ุชุชุนุฑู ุจุงูุชุธุงู ูู ุฎูุงู ุงูุชูุงุฑูู ุงูุฑูุงุถูุฉ ุฃู ุงูุณุงููุงุ", points: -1 },
                    ],
                    results: [
                        { score: -3, text: "ุฏุฑุฌุฉ ุณููุฉ ููุฎูุถุฉ ุฌุฏูุง. ูุจุฏู ุฃูู ุชููู ุจุนูู ุฑุงุฆุน ูู ุชูููู ุชุนุฑุถู ููุณููู ูุฏุนู ูุฏุฑุฉ ุฌุณูู ุนูู ุงูุชุฎูุต ูููุง." },
                        { score: 0, text: "ุฏุฑุฌุฉ ุณููุฉ ููุฎูุถุฉ ุฅูู ูุนุชุฏูุฉ. ููุงู ุจุนุถ ุงูุฌูุงูุจ ุงูุชู ูููู ุชุญุณูููุง ูุชูููู ุงูุนุจุก ุนูู ุฌุณูู." },
                        { score: 3, text: "ุฏุฑุฌุฉ ุณููุฉ ูุนุชุฏูุฉ ุฅูู ุนุงููุฉ. ูุฏ ูุณุชููุฏ ุฌุณูู ุจุดูู ูุจูุฑ ูู ุงุณุชุฑุงุชูุฌูุงุช ุฏุนู ุฅุฒุงูุฉ ุงูุณููู ูุชูููู ุงูุชุนุฑุถ ููููุงุฏ ุงูููููุงุฆูุฉ." },
                        { score: 6, text: "ุฏุฑุฌุฉ ุณููุฉ ุนุงููุฉ. ูู ุงูููู ุงุชุฎุงุฐ ุฎุทูุงุช ุฌุงุฏุฉ ูุชูููู ุชุนุฑุถู ููุณููู ูุฏุนู ูุณุงุฑุงุช ุงูุชุฎูุต ูููุง ูู ุงููุจุฏ ูุงูุฃูุนุงุก ูุงูุฌูุฏ." }
                    ]
                },
                'luscher-color-test': {
                    title: 'ุงุฎุชุจุงุฑ ููุดูุฑ ุงููุจุณุท ููุฃููุงู',
                    isColorTest: true,
                    colors: [
                        { name: 'ุฃุฒุฑู', hex: '#004084' }, { name: 'ุฃุฎุถุฑ', hex: '#006400' }, { name: 'ุฃุญูุฑ', hex: '#b00000' }, { name: 'ุฃุตูุฑ', hex: '#ffd700' },
                        { name: 'ุจููุณุฌู', hex: '#6a0dad' }, { name: 'ุจูู', hex: '#8b4513' }, { name: 'ุฃุณูุฏ', hex: '#000000' }, { name: 'ุฑูุงุฏู', hex: '#808080' }
                    ],
                    interpretations: {
                        'ุฃุฒุฑู': 'ูุดูุฑ ุฅูู ุงูุญุงุฌุฉ ุฅูู ุงููุฏูุก ูุงูุณูููุฉ ูุงูุฑุถุง. ุงุฎุชูุงุฑู ูู ุฃููุงู ูุนูุณ ุฑุบุจุฉ ูู ุจูุฆุฉ ูุณุชูุฑุฉ ููุชูุงุบูุฉ.',
                        'ุฃุฎุถุฑ': 'ููุซู ุงูุซุจุงุช ูุงูุนุฒููุฉ ูุงููุซุงุจุฑุฉ. ุงุฎุชูุงุฑู ูุนุจุฑ ุนู ุฑุบุจุฉ ูู ุชุฃููุฏ ุงูุฐุงุช ูุงูุณูุทุฑุฉ ุนูู ูุณุงุฑ ุงูุญูุงุฉ.',
                        'ุฃุญูุฑ': 'ูุฑูุฒ ุฅูู ุงูุทุงูุฉ ูุงูุญูููุฉ ูุงูุฑุบุจุฉ ูู ุงููุนู ูุงูุฅูุฌุงุฒ. ุงุฎุชูุงุฑู ูุนูุณ ุญุงูุฉ ูู ุงูุฅุซุงุฑุฉ ูุงูููุฉ ุงูุฏุงูุนุฉ.',
                        'ุฃุตูุฑ': 'ูุนุจุฑ ุนู ุงูุฃูู ูุงูุชูุงุคู ูุงูุฑุบุจุฉ ูู ุงูุชุญุฑุฑ ูุงููุณุชูุจู ุงููุดุฑู. ุงุฎุชูุงุฑู ูุดูุฑ ุฅูู ุงูุจุญุซ ุนู ุงูุณุนุงุฏุฉ ูุงูุชูุณุน.',
                        'ุจููุณุฌู': 'ูุฒูุฌ ูู ุงูุฃุญูุฑ ูุงูุฃุฒุฑูุ ูุฑูุฒ ุฅูู ุงูุฑุบุจุฉ ูู ุนูุงูุฉ ุตูููุฉ ุฃู ุณุญุฑูุฉ. ูุฏ ูุนุจุฑ ุนู ุนุฏู ุงููุถุฌ ุฃู ุงูุญุงุฌุฉ ูููุฑูุจ ูู ุงููุงูุน.',
                        'ุจูู': 'ููุซู ุงูุฌุฐูุฑ ูุงูุญูุงุณ ุงูุฌุณุฏูุฉ. ูุฏ ูุดูุฑ ุงุฎุชูุงุฑู ุฅูู ุงูุดุนูุฑ ุจุงูุฅุฑูุงู ูุงูุญุงุฌุฉ ุฅูู ุงูุฑุงุญุฉ ูุงุณุชุนุงุฏุฉ ุงูุญูููุฉ ุงูุฌุณุฏูุฉ.',
                        'ุฃุณูุฏ': 'ูุฑูุฒ ุฅูู ุงูููู ูุงูุฑูุถ ูุงูุชุฎูู. ุงุฎุชูุงุฑู ูุฃูู ููู ูุฏ ูุดูุฑ ุฅูู ุงูุชูุฑุฏ ุถุฏ ุงููุถุน ุงูุญุงูู ุฃู ุงูุดุนูุฑ ุจุงูุถุบุท ุงูุดุฏูุฏ.',
                        'ุฑูุงุฏู': 'ููุซู ุงูุญูุงุฏ ูุนุฏู ุงูุฑุบุจุฉ ูู ุงููุดุงุฑูุฉ. ุงุฎุชูุงุฑู ูุฏ ูุนุจุฑ ุนู ุฑุบุจุฉ ูู ุนุฒู ุงูููุณ ุนู ุงูุตุฑุงุนุงุช ุฃู ุงูุชุญููุฒ ุงูุฒุงุฆุฏ.'
                    }
                }
            };

            const hideQuizModal = () => {
                modal.classList.remove('is-open');
                setTimeout(() => modal.classList.add('hidden'), 300);
            };

            document.querySelectorAll('.quiz-start-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const quizId = btn.dataset.quiz;
                    startQuiz(quizId);
                });
            });
            
            function startQuiz(quizId) {
                const quizData = quizzes[quizId];
                if (quizData.isColorTest) {
                    renderColorTest(quizData);
                } else {
                    renderQuestionnaire(quizData);
                }
                modal.classList.remove('hidden');
                setTimeout(() => modal.classList.add('is-open'), 10);
            }
            
            function renderQuestionnaire(quizData) {
                let currentQuestion = 0;
                let score = 0;
                function renderQuestion() {
                    if (currentQuestion >= quizData.questions.length) {
                        renderResult();
                        return;
                    }
                    const q = quizData.questions[currentQuestion];
                    modalContent.innerHTML = `
                        <h3 class="text-2xl font-bold mb-2">${quizData.title}</h3>
                        <p class="text-gray-500 mb-6">ุงูุณุคุงู ${currentQuestion + 1} ูู ${quizData.questions.length}</p>
                        <p class="text-xl font-semibold mb-6 text-center">${q.q}</p>
                        <div class="flex justify-center gap-4">
                           <button class="quiz-answer-btn btn btn-primary text-white py-2 px-8 rounded-full" data-answer="yes">ูุนู</button>
                           <button class="quiz-answer-btn btn btn-secondary py-2 px-8 rounded-full" data-answer="no">ูุง</button>
                        </div>
                    `;
                    document.querySelectorAll('.quiz-answer-btn').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            if (e.target.dataset.answer === 'yes') score += q.points;
                            else if (q.points < 0) score -= q.points;
                            currentQuestion++;
                            renderQuestion();
                        });
                    });
                }
                function renderResult() {
                    let resultText = '';
                    for (let i = quizData.results.length - 1; i >= 0; i--) {
                        if (score >= quizData.results[i].score) {
                            resultText = quizData.results[i].text;
                            break;
                        }
                    }
                     modalContent.innerHTML = `<h3 class="text-2xl font-bold mb-2">ุงููุชูุฌุฉ</h3><div class="bg-gray-100 p-6 rounded-lg text-center"><p class="text-lg mb-2">ุฏุฑุฌุชู ูู: <span class="font-bold text-2xl text-[--primary-color]">${score}</span></p><p class="text-gray-700">${resultText}</p></div><div class="text-center mt-6"><button class="close-quiz-modal-btn btn btn-primary text-white py-2 px-6 rounded-full">ุฅุบูุงู</button></div>`;
                    modalContent.querySelector('.close-quiz-modal-btn').addEventListener('click', hideQuizModal);
                }
                renderQuestion();
            }

            function renderColorTest(quizData) {
                let selectedOrder = [];
                const totalColors = quizData.colors.length;

                function updateInstructions() {
                     const instructionEl = modalContent.querySelector('#luscher-instruction');
                     if(instructionEl) {
                        const remaining = totalColors - selectedOrder.length;
                        if (remaining > 0) {
                           instructionEl.textContent = `ุงุฎุชุฑ ุงูููู ุงูููุถู ูุฏูู ูู ุจูู ุงูุฃููุงู ุงููุชุจููุฉ. (${remaining} ูุชุจูู)`;
                        } else {
                           instructionEl.textContent = 'ุงูุชูู ุงูุงุฎุชูุงุฑ! ุงููุฑ ุฃุฏูุงู ููุญุตูู ุนูู ุชุญูููู.';
                        }
                     }
                }

                function handleColorClick(e) {
                    const swatch = e.target;
                    if (swatch.classList.contains('selected')) return;

                    selectedOrder.push(swatch.dataset.colorName);
                    swatch.classList.add('selected');
                    swatch.setAttribute('data-order', selectedOrder.length);
                    
                    updateInstructions();

                    if (selectedOrder.length === totalColors) {
                        const analyzeBtn = modalContent.querySelector('#analyze-luscher-btn');
                        if(analyzeBtn) {
                           analyzeBtn.classList.remove('hidden');
                           analyzeBtn.classList.add('flex', 'mx-auto');
                        }
                    }
                }

                modalContent.innerHTML = `
                    <h3 class="text-2xl font-bold mb-2">${quizData.title}</h3>
                    <p id="luscher-instructions" class="text-gray-600 mb-4 text-center">ุงุฎุชุฑ ุงูููู ุงูููุถู ูุฏูู ูู ุจูู ุงูุฃููุงู ุงููุชุจููุฉ. (8 ูุชุจูู)</p>
                    <div class="color-swatch-container">
                        ${quizData.colors.map(c => `<div class="color-swatch" data-color-name="${c.name}" style="background-color: ${c.hex};"></div>`).join('')}
                    </div>
                    <div class="text-sm text-gray-500 mb-4">
                        <p><strong>ุฅุฎูุงุก ูุณุคูููุฉ:</strong> ูุฐุง ุงูุงุฎุชุจุงุฑ ูู ูุณุฎุฉ ูุจุณุทุฉ ูุฃุบุฑุงุถ ุงูุงุณุชูุดุงู ุงูุฐุงุชู ููุท ููุง ููุซู ุชุดุฎูุตุงู ููุณูุงู ุฃู ุทุจูุงู ูุงููุงู.</p>
                    </div>
                    <div class="text-center mt-6">
                        <button id="analyze-luscher-btn" class="hidden btn btn-primary text-white py-2 px-8 rounded-full">ุงุญุตู ุนูู ุงูุชุญููู</button>
                    </div>
                `;

                const swatches = modalContent.querySelectorAll('.color-swatch');
                swatches.forEach(swatch => swatch.addEventListener('click', handleColorClick));

                modalContent.querySelector('#analyze-luscher-btn').addEventListener('click', () => {
                    const firstChoice = selectedOrder[0];
                    const lastChoice = selectedOrder[7];
                    const analysis = `
                        <h3 class="text-2xl font-bold mb-2">ุชุญููู ุงุฎุชูุงุฑุงุชู</h3>
                        <div class="text-right space-y-3">
                           <p><strong>ุชูุถููู ุงูุฃูู (<span class="font-bold text-green-600">ูุฏู ูุฑุบูุจ</span>): ${firstChoice}</strong></p>
                           <p class="text-gray-700 pr-4">${quizData.interpretations[firstChoice]}</p>
                           <p><strong>ุชูุถููู ุงูุฃุฎูุฑ (<span class="font-bold text-red-600">ุตูุฉ ูุฑููุถุฉ</span>): ${lastChoice}</strong></p>
                           <p class="text-gray-700 pr-4">ุฑูุถู ูููู ${lastChoice} ูุฏ ูุดูุฑ ุฅูู ุฃูู ุชุฑูุถ ุจูุนู ุฃู ุจุบูุฑ ูุนู ุงูุตูุงุช ุงูุชู ููุซููุง. ${quizData.interpretations[lastChoice]}</p>
                        </div>
                        <div class="text-center mt-6">
                           <button class="close-quiz-modal-btn btn btn-primary text-white py-2 px-6 rounded-full">ุฅุบูุงู</button>
                        </div>
                    `;
                    modalContent.innerHTML = analysis;
                    modalContent.querySelector('.close-quiz-modal-btn').addEventListener('click', hideQuizModal);
                });
            }
        }

        // --- JOURNAL MODULE ---
        function initJournal() {
            const form = document.getElementById('journal-form');
            if(!form) return;

            document.getElementById('entry-date').valueAsDate = new Date();

            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                if (!currentUser) {
                    showNotification("ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ูุญูุธ ุงูุฅุฏุฎุงูุงุช.", "error");
                    return;
                }
                const entry = {
                    date: document.getElementById('entry-date').value,
                    mood: document.getElementById('mood-rating').value,
                    energy: document.getElementById('energy-rating').value,
                    sleep: document.getElementById('sleep-quality').value,
                    symptoms: document.getElementById('symptoms-today').value,
                    createdAt: new Date()
                };

                try {
                    const journalCollection = collection(db, 'artifacts', appId, 'users', currentUser.uid, 'journalEntries');
                    await addDoc(journalCollection, entry);
                    showNotification("ุชู ุญูุธ ุงูุฅุฏุฎุงู ุจูุฌุงุญ!", "success");
                    form.reset();
                    document.getElementById('entry-date').valueAsDate = new Date();
                    loadJournalEntries(); 
                } catch (error) {
                    console.error("Error saving journal entry: ", error);
                    showNotification("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงูุฅุฏุฎุงู.", "error");
                }
            });
        }
        
        function toggleJournalView(isLoggedIn) {
            document.getElementById('journal-content-container').classList.toggle('hidden', !isLoggedIn);
            document.getElementById('journal-login-prompt').classList.toggle('hidden', isLoggedIn);
        }

        async function loadJournalEntries() {
            if (!currentUser) return;
            const entriesContainer = document.getElementById('journal-entries-container');
            entriesContainer.innerHTML = '<p>ุฌุงุฑู ุชุญููู ุงูุณุฌูุงุช...</p>';

            const journalCollection = collection(db, 'artifacts', appId, 'users', currentUser.uid, 'journalEntries');
            const q = query(journalCollection, limit(30));
            const querySnapshot = await getDocs(q);

            if (querySnapshot.empty) {
                entriesContainer.innerHTML = '<p>ูุง ุชูุฌุฏ ุฅุฏุฎุงูุงุช ุจุนุฏ. ุงุจุฏุฃ ุจุชุณุฌูู ูููู!</p>';
                if(journalChart) journalChart.destroy();
                return;
            }
            
            const entries = [];
            querySnapshot.forEach(doc => {
                entries.push(doc.data());
            });
            
            entries.sort((a, b) => new Date(b.date) - new Date(a.date));

            let entriesHTML = '';
            entries.forEach(data => {
                entriesHTML += `
                    <div class="bg-white p-4 rounded-lg shadow-sm journal-entry">
                        <p class="font-bold text-lg">${data.date}</p>
                        <p class="text-sm"><strong>ุงููุฒุงุฌ:</strong> ${data.mood}/10 | <strong>ุงูุทุงูุฉ:</strong> ${data.energy}/10 | <strong>ุงูููู:</strong> ${data.sleep || 'N/A'} ุณ</p>
                        ${data.symptoms ? `<p class="text-sm text-gray-600 mt-1"><strong>ุงูุฃุนุฑุงุถ:</strong> ${data.symptoms}</p>` : ''}
                    </div>`;
            });
            entriesContainer.innerHTML = entriesHTML;
            
            renderJournalChart(entries.reverse());
        }

        function renderJournalChart(entries) {
            const ctx = document.getElementById('journal-chart').getContext('2d');
            if (journalChart) {
                journalChart.destroy();
            }
            journalChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: entries.map(e => e.date),
                    datasets: [
                        {
                            label: 'ูุณุชูู ุงููุฒุงุฌ',
                            data: entries.map(e => e.mood),
                            borderColor: 'rgb(200, 160, 125)',
                            backgroundColor: 'rgba(200, 160, 125, 0.5)',
                            tension: 0.1
                        },
                        {
                            label: 'ูุณุชูู ุงูุทุงูุฉ',
                            data: entries.map(e => e.energy),
                            borderColor: 'rgb(90, 110, 90)',
                            backgroundColor: 'rgba(90, 110, 90, 0.5)',
                            tension: 0.1
                        }
                    ]
                },
                options: {
                                responsive: true,
                                 plugins: { legend: { position: 'top' } },
                    scales: { y: { beginAtZero: true, max: 10 } }
                }
            });
        }
    </script>

<script>
 document.addEventListener('DOMContentLoaded', () => {
   const newProduct = {
     id: 'uxira',
     name: "UXIRA โ ูุฒูู ุนุฑู ุทุจูุนู",
     shortDesc: "ุชุฑููุจุฉ ุทุจูุนูุฉ ูู ุงูุฒููุช ูููุฏุฑูุฌูู ุจูุฑููุณูุฏ ูุชูููุฉ ุงููุณุงู ูููุน ุงูุฑูุงุฆุญ ุจูุนุงููุฉ ููุนููุฉ.",
     price: "2900 ุฑูุงู ูููู",
     imageUrl: "assets/images/UXIRA%20%20DEODERANT%20.png",
     whatsappLink: "https://wa.me/967771447111?text=ูุฑุญุจูุงุ%20ุฃุฑุบุจ%20ุจุทูุจ%20ูุฒูู%20ุงูุนุฑู%20UXIRA",
     detailsButtonText: "ูุตู ุงูููุชุฌ",
     fullDesc: `
     <h3 class="text-lg font-bold mb-2">๐ UXIRA โ ูุฒูู ุนุฑู ุทุจูุนู ุขูู ููุนูุงู</h3>
     <p class="mb-2"><strong>ุชุฑููุจุฉ ูุชูุงููุฉ ุชุฌูุน ุจูู ููุงุก ุงูุฒููุช ุงูุทุจูุนูุฉ ูููุฉ ุงูููุฏุฑูุฌูู ุจูุฑููุณูุฏ ุจุชุฑููุฒ ูุฏุฑูุณุ ูุชููุญู ุญูุงูุฉ ููููุฉ ูู ุงูุนุฑู ูุงูุฑูุงุฆุญ ุงููุฑููุฉุ ูุน ุนูุงูุฉ ูุงุฆูุฉ ุจุจุดุฑุฉ ุงูุฅุจุท.</strong></p>
     <h4 class="font-bold mb-1">โ ุงูููุงุฆุฏ ุงูุฑุฆูุณูุฉ:</h4>
     <ul class="list-disc pr-5 text-right mb-2">
       <li><strong>ูุฒูู ุนุฑู ุทุจูุนู 100%</strong> ุจุฏูู ุฃู ููุงุฏ ููููุงุฆูุฉ ูุงุณูุฉ ุฃู ุฃูููููู.</li>
       <li><strong>ุชูููุฉ ุนูููุฉ ูููุณุงู</strong> ูู ุงูุจูุชูุฑูุง ูุงูุณููู ุงููุณุจุจุฉ ููุฑุงุฆุญุฉ.</li>
       <li><strong>ุชูุชูุญ ุขูู ููุจุดุฑุฉ ุงูุฏุงููุฉ ุชุญุช ุงูุฅุจุทูู</strong> ุจูุถู ุฎุตุงุฆุต ุงูููุฏุฑูุฌูู ุจูุฑููุณูุฏ ุงูููุดุฑุฉ ุงููุทููุฉ.</li>
       <li><strong>ุชุฑุทูุจ ูุชูุฏุฆุฉ ููุฑูุฉ</strong> ุจูุถู ูุฒูุฌ ุงูุฒููุช ุงููุจุงุชูุฉ ุงููุบุฐูุฉ.</li>
       <li><strong>ูุญุงุฑุจ ุงูุจูุชูุฑูุง ุฏูู ุงูุชุฃุซูุฑ ุนูู ุงูุชูุงุฒู ุงูุทุจูุนู ููุฌูุฏ.</strong></li>
       <li><strong>ุขูู ููุงุณุชุฎุฏุงู ุงููููู ุญุชู ุนูู ุงูุจุดุฑุฉ ุงูุญุณุงุณุฉ.</strong></li>
     </ul>
     <p class="font-bold mb-1">๐ฟ ููุงุณุจ ูููุ</p>
     <ul class="list-disc pr-5 text-right mb-2">
       <li>ูู ูุจุญุซ ุนู ุจุฏูู ุทุจูุนู ูุตุญู ููุฒููุงุช ุงูุนุฑู ุงูุชุฌุงุฑูุฉ.</li>
       <li>ูู ูุนุงูู ูู <strong>ุงุณูุฑุงุฑ ุชุญุช ุงูุฅุจุท</strong> ุฃู <strong>ุชููุฌ ุงูุฌูุฏ</strong> ุจุณุจุจ ูุฒููุงุช ุงูุนุฑู ุงูููููุงุฆูุฉ.</li>
       <li>ูู ูุฑูุฏ ููุชุฌูุง ูุนุงููุง ูุฏูู ุทูุงู ุงูููู ุฏูู ุงูุณุฏุงุฏ ุงููุณุงู ุฃู ุชุนุทูู ุงูุชุนุฑูู ุงูุทุจูุนู.</li>
     </ul>
     <p class="font-bold mb-1">๐งด ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู:</p>
     <ol class="list-decimal pr-5 text-right mb-2">
       <li>ููุบุณู ุงูุฅุจุท ูููุฌูู ุจูุทู ุชุงู.</li>
       <li>ููุฑูุด ูููุฉ ุฎูููุฉ ูู ููุฏุฑูุฌูู ุจูุฑููุณูุฏ ูููุชุฑู ูู30โ60 ุซุงููุฉ ุญุชู ูุฌู ุฌุฒุฆููุง.</li>
       <li>ูููุถุน ุทุจูุฉ ุฑูููุฉ ูู ูุฑูู UXIRA ูููุชุฑู ููุฌู ุทุจูุนููุง.</li>
       <li>ููุณุชุฎุฏู ุตุจุงุญูุง ููููู ุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู ุญุณุจ ุงูุญุงุฌุฉ.</li>
     </ol>
     <p class="font-bold mb-1">๐ ุขูู ูููุฌุฑูุจ</p>
     <ul class="list-disc pr-5 text-right">
       <li>โ ุฎุงูู ูู ุงูุฃูููููู</li>
       <li>โ ุฎุงูู ูู ุงูุนุทูุฑ ุงูุตูุงุนูุฉ</li>
       <li>โ ุฎุงูู ูู ุงูุจุงุฑุงุจูู</li>
       <li>โ ููุฎุชุจุฑ ุนูู ุงูุจุดุฑุฉ ุงูุญุณุงุณุฉ</li>
     </ul>
     `
   };

   // ุฎุฑูุทุฉ ุฃูุตุงู ุงูููุชุฌุงุช ุงููุงููุฉ
   const productDescriptions = { 
     uxira: newProduct.fullDesc,
     tibrahOra: `
       <h4 class="font-bold text-lg">๐ฆท ุทูุจุฑุฉ ููุนูุงูุฉ ุงูููููุฉ ุงููุชูุฏูุฉ | ูุธุงู ุนูุงุฌูโููุนุด ูููู</h4>
       <p><strong>ููุชุฌุงู ุชูููููุงู ูุนููุงู ุจุชูุงุบู:</strong> ุชูููุฉ ุนูููุฉโฆ ูุงูุชุนุงุด ูุฏูู. ูุตุญุฉ ูุซุชูุ ูููุงุก ูููุ ูุซูุชู ูู ููู.</p>
       <h4 class="font-bold">โ ูุถูุถุฉ ุทูุจุฑุฉ ุงูุนูุงุฌูุฉ | แนฌibrah Oral Detox Rinse</h4>
       <ul class="list-disc pr-6 space-y-1">
         <li>ุชูุธูู ุงููู ูู ุงูุณููู ูุงููุถูุงุช ุงูุญูุถูุฉ</li>
         <li>ุชูููู ุงูุชูุงุจุงุช ุงููุซุฉ ููุฒูููุง</li>
         <li>ุชูููู ุงูุจูุงู ูููุน ุงูุชุตุจุบุงุช ุงูุณุทุญูุฉ</li>
         <li>ููุงุฒูุฉ ุจูุฆุฉ ุงููู ุจุนุฏ ูุถุบ ุงูุฃุนุดุงุจ ุฃู ุชูุงูู ุงููููุฉ</li>
       </ul>
       <h4 class="font-bold">โก ุจุฎุงุฎ ุทูุจุฑุฉ ุงูููุนุด | แนฌibrah Herbal Oral Mist</h4>
       <ul class="list-disc pr-6 space-y-1">
         <li>ููุนุด ุงูููุณ ุจุฑุงุฆุญุฉ ุนุดุจูุฉ ูุธููุฉ</li>
         <li>ููุฏุฆ ุงููุซุฉ ููุฑุทูุจ ุงููู</li>
         <li>ูููู ูู ุฃุซุฑ ุงูุชุตุจุบุงุช ุงูุณุฑูุนุฉ ุจุนุฏ ุงูุฃูู</li>
       </ul>
       <h4 class="font-bold">๐ก๏ธ ููุงุฐุง ูุซู ุจูุ</h4>
       <ul class="list-disc pr-6 space-y-1">
         <li>ุชุฑููุจุฉ ููุนุงูุฑุฉ ุทุจููุงุ ุจุฏูู ูููุงุช ุตูุงุนูุฉ</li>
         <li>ููุงุณุจ ููุฃุณูุงู ุงูุญุณุงุณุฉ ูุงูุชูุงุจุงุช ุงููุซุฉ ุงููุฒููุฉ</li>
         <li>ูููููู ุนุงุฏุงุชู ุงูููููุฉ ุจุฏู ุฃู ูุนูููุง</li>
       </ul>
       <p class="font-semibold">๐ฏ ูุชุงุฆุฌ ูุชููุนุฉ ุฎูุงู ุฃุณุจูุนูู ูู ุงูุงุณุชุฎุฏุงู ุงูููุชุธู:</p>
       <ul class="list-disc pr-6 space-y-1">
         <li>ุฅุฒุงูุฉ ููุฑูุฉ ูุฑุงุฆุญุฉ ุงููู ุงููุฑููุฉ ูู ุงูุฌุฐูุฑุ ูููุณ ุชุบุทูุชูุง ููุท.</li>
         <li>ุชูููู ููุญูุธ ููุฒูู ุงููุซุฉ ูุงูุชูุงุจูุงุ ุฎุงุตุฉ ุนูุฏ ุงูุชูุฑูุด ุฃู ุงููุถุบ.</li>
         <li>ุฅุญุณุงุณ ุจูุธุงูุฉ ููููุฉ ูุงุนูุฉ ูุทุนู ูููู ูุนุชุฏู ุบูุฑ ูุฒุนุฌ.</li>
       </ul>
       <p class="font-semibold">โ ูุชุงุฆุฌ ูุคูุฏุฉ ุนูุฏ ุงูุงุณุชูุฑุงุฑ ุงูููุชุธู:</p>
       <ul class="list-disc pr-6 space-y-1">
         <li>ุชูููู ูุฅุฒุงูุฉ ุงูุจุคุฑ ุงูุชุณูุณูุฉ ุงูุณุทุญูุฉ ุงู ุงูุนูููุฉ ูุจูุฑุง ูุจู ุงู ุชุชุณุจุจ ูู ุชุฏูุฑ ุงูุณู</li>
         <li>ุชุญููุฒ ูุณููููุฌู ุทุจูุนู ูุฅุนุงุฏุฉ ุงููุซุฉ ุงูููุณุญุจุฉ ุฅูู ููุถุนูุง ููู ุงูุณู โ ุญุชู ูู ุญุงูุงุช ุงุฑุชุฎุงุก ุงููุซุฉ ุจุณุจุจ ุงููุงุช ุฃู ุงูุงูุชูุงุจุงุช ุงููุชูุฑุฑุฉ.</li>
         <li>ุชูููุฉ ุฃููุงู ุงููุซุฉ ุงูุฏุงุนูุฉ ูุชูููู ุงุฑุชุฎุงุกูุงุ ุญุชู ูุฏู ุงููุฏุฎููู ููุชุนุงุทู ุงูุฃุนุดุงุจ ุงููุฎุฑุดุฉ.</li>
         <li>ุชูููู ุงุตูุฑุงุฑ ุงูุฃุณูุงู ุงููุงุชุฌ ุนู ุงูุชุฑุณุจุงุช ุงูุญูุถูุฉ ูุงูุจูุน ุงูุณุทุญูุฉ.</li>
       </ul>
       <p class="italic">๐ฟ ุทูุจุฑุฉ โ ูุฃู ููู ููุณ ููุท ูุฏุฎู ุงูุทุนุงูโฆ ุจู ุจูุงุจุฉ ุตุญุชู ุงูุฏุงุฎููุฉ.</p>
     `
   };

   const container = document.getElementById('store-products-grid');
   if (container) {
     const card = document.createElement('div');
     card.className = "border bg-white border-gray-200 rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 fade-in-up hover:-translate-y-2";
     card.innerHTML = `
       <img src="${newProduct.imageUrl}" alt="${newProduct.name}" class="w-full h-56 object-cover">
       <div class="p-6">
         <h3 class="text-xl font-bold mb-2">${newProduct.name}</h3>
         <p class="text-gray-600 mb-4">${newProduct.shortDesc}</p>
         <p class="text-2xl font-bold text-[--primary-color] mb-4">${newProduct.price}</p>
         <a href="${newProduct.whatsappLink}" target="_blank" class="btn btn-secondary w-full block py-2 rounded-full mb-2">ุงุทูุจ ุนุจุฑ ูุงุชุณุงุจ</a>
         <button class="btn btn-outline w-full details-button" data-prod="${newProduct.id}">${newProduct.detailsButtonText}</button>
       </div>`;
     container.appendChild(card);
   }

   // Create product modal once
   const modal = document.createElement('div');
   modal.id = 'product-modal';
   modal.className = 'fixed inset-0 bg-black/60 flex items-center justify-center z-50 hidden';
   modal.innerHTML = `
     <div class="bg-white p-8 rounded-xl max-w-md w-11/12 text-center relative">
       <button id="close-product-modal" class="absolute top-2 right-4 text-2xl text-gray-500">&times;</button>
       <h3 id="modal-product-title" class="text-2xl font-bold mb-4"></h3>
       <div id="modal-product-description" class="text-gray-700 text-right space-y-2 max-h-[70vh] overflow-y-auto"></div>
     </div>`;
   document.body.appendChild(modal);

   const closeModal = () => modal.classList.add('hidden');
   document.getElementById('close-product-modal').addEventListener('click', closeModal);
   modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });

   document.addEventListener('click', (e) => {
     const btn = e.target.closest('.details-button');
     if (!btn) return;
     const card = btn.closest('.border');
     const title = card.querySelector('h3')?.textContent || '';
     const id = btn.dataset.prod || '';
     const desc = productDescriptions[id] || '';
     document.getElementById('modal-product-title').textContent = title;
     document.getElementById('modal-product-description').innerHTML = desc;
     modal.classList.remove('hidden');
   });
 });
</script>
</body>
</html>

                    
